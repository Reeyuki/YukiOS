(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const y of document.querySelectorAll('link[rel="modulepreload"]'))p(y);new MutationObserver(y=>{for(const g of y)if(g.type==="childList")for(const I of g.addedNodes)I.tagName==="LINK"&&I.rel==="modulepreload"&&p(I)}).observe(document,{childList:!0,subtree:!0});function f(y){const g={};return y.integrity&&(g.integrity=y.integrity),y.referrerPolicy&&(g.referrerPolicy=y.referrerPolicy),y.crossOrigin==="use-credentials"?g.credentials="include":y.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function p(y){if(y.ep)return;y.ep=!0;const g=f(y);fetch(y.href,g)}})();const Ns="modulepreload",Ds=function(it){return"/desktop/"+it},ki={},Cs=function(c,f,p){let y=Promise.resolve();if(f&&f.length>0){let w=function(v){return Promise.all(v.map(a=>Promise.resolve(a).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};var I=w;document.getElementsByTagName("link");const S=document.querySelector("meta[property=csp-nonce]"),k=S?.nonce||S?.getAttribute("nonce");y=w(f.map(v=>{if(v=Ds(v),v in ki)return;ki[v]=!0;const a=v.endsWith(".css"),b=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${b}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":Ns,a||(u.as="script"),u.crossOrigin="",u.href=v,k&&u.setAttribute("nonce",k),document.head.appendChild(u),a)return new Promise((N,x)=>{u.addEventListener("load",N),u.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${v}`)))})}))}function g(S){const k=new Event("vite:preloadError",{cancelable:!0});if(k.payload=S,window.dispatchEvent(k),!k.defaultPrevented)throw S}return y.then(S=>{for(const k of S||[])k.status==="rejected"&&g(k.reason);return c().catch(g)})};function As(it={}){const{immediate:c=!1,onNeedRefresh:f,onOfflineReady:p,onRegistered:y,onRegisteredSW:g,onRegisterError:I}=it;let S,k;const w=async(a=!0)=>{await k};async function v(){if("serviceWorker"in navigator){if(S=await Cs(async()=>{const{Workbox:a}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:a}},[]).then(({Workbox:a})=>new a("/desktop/sw.js",{scope:"/desktop/",type:"classic"})).catch(a=>{I?.(a)}),!S)return;S.addEventListener("activated",a=>{(a.isUpdate||a.isExternal)&&window.location.reload()}),S.addEventListener("installed",a=>{a.isUpdate||p?.()}),S.register({immediate:c}).then(a=>{g?g("/desktop/sw.js",a):y?.(a)}).catch(a=>{I?.(a)})}}return k=v(),w}const Oe=document.getElementById("desktop");class Ms{constructor(c,f){this.fs=c,this.wm=f,this.currentPath=["home","reeyuki"],this.history=[],this.historyIndex=-1,this.username="reeyuki",this.hostname="desktop-os",this.printQueue=Promise.resolve(),this.commands={},this.pageLoadTime=Date.now(),this.isPrinting=!1,this.inputBuffer="",this.printDepth=0,this.registerDefaultCommands()}async print(c,f=null,p=!1,y=null,g=30){this.printDepth++,this.printDepth===1&&(this.isPrinting=!0,this.inputBuffer=this.terminalInput.value,this.terminalInput.value="",this.terminalInputLine.style.display="none");const I=document.createElement("div"),S=document.createElement("span");if(p){const k=document.createElement("span");k.textContent=y||this.terminalPrompt.textContent,k.style.color="white",I.appendChild(k),I.appendChild(S)}else f&&(S.style.color=f),I.appendChild(S);this.terminalOutput.appendChild(I);for(let k=0;k<c.length;k++)S.textContent+=c[k],await new Promise(w=>setTimeout(w,g)),this.terminalOutput.parentElement.scrollTop=this.terminalOutput.parentElement.scrollHeight;this.printDepth--,this.printDepth===0&&(this.isPrinting=!1,this.terminalInputLine.style.display="flex",this.terminalInput.value=this.inputBuffer,this.terminalInput.focus())}enqueuePrint(c,f=null,p=!1,y=null,g=6){return this.printQueue=this.printQueue.then(()=>this.print(c,f,p,y,g)),this.printQueue}setupEventHandlers(){this.terminalInput.addEventListener("keydown",f=>{if(f.key==="Enter"){f.preventDefault();const p=this.terminalInput.value.trim();if(!p)return;this.history.push(p),this.historyIndex=this.history.length,this.terminalInput.value="",this.executeCommand(p)}else if(f.key==="ArrowUp"&&this.historyIndex>0)f.preventDefault(),this.terminalInput.value=this.history[--this.historyIndex];else if(f.key==="ArrowDown")f.preventDefault(),this.historyIndex=Math.min(this.historyIndex+1,this.history.length),this.terminalInput.value=this.historyIndex<this.history.length?this.history[this.historyIndex]:"";else if(f.key==="Tab")f.preventDefault(),this.handleTabCompletion();else if(f.ctrlKey&&f.key==="l")f.preventDefault(),this.cmdClear();else if(f.ctrlKey&&f.key==="c"){const p=window.getSelection();if(p&&p.toString().length>0)return;f.preventDefault(),this.enqueuePrint("^C","white",!0,this.terminalPrompt.textContent),this.terminalInput.value=""}else if(f.ctrlKey&&f.key==="d"){const p=window.getSelection();if(p&&p.toString().length>0||this.terminalInput.value.length>0)return;f.preventDefault();const y=document.getElementById("terminal-win");this.wm.removeFromTaskbar(y.id),y&&y.remove();return}});const c=document.getElementById("terminal-win");c.addEventListener("mousedown",()=>{const f=window.getSelection();f&&f.removeAllRanges()}),c.addEventListener("mouseup",()=>{window.getSelection().toString().length>0||this.terminalInput.focus()})}expandGlob(c,f){const p=Object.keys(this.fs.getFolder(f)),y=new RegExp("^"+c.replace(/\*/g,".*").replace(/\?/g,".")+"$");return p.filter(g=>y.test(g))}expandGlobsInArgs(c,f){const p=[];for(const y of c)if(y.includes("*")||y.includes("?")){const g=this.expandGlob(y,f);g.length>0?p.push(...g):p.push(y)}else p.push(y);return p}parseCommand(c){return c.split("|").map(p=>p.trim()).map(p=>{const g=(p.match(/(?:[^\s"]+|"[^"]*")+/g)||[]).map(w=>w.replace(/^"(.*)"$/,"$1")),I=g[0],S=[],k=[];for(let w=1;w<g.length;w++)g[w].startsWith("-")?k.push(g[w]):S.push(g[w]);return{command:I,args:S,flags:k}})}async executePipeline(c){let f=null;for(let p=0;p<c.length;p++){const{command:y,args:g,flags:I}=c[p],S=this.expandGlobsInArgs(g,this.currentPath);f!==null&&S.unshift(f);const k=this.commands[y];if(!k){y&&await this.enqueuePrint(`bash: ${y}: command not found`);return}p<c.length-1?f=await this.captureOutput(()=>k(S,I)):await k(S,I)}}async captureOutput(c){const f=this.print.bind(this),p=[];return this.print=async y=>{p.push(y)},await c(),await this.printQueue,this.print=f,p.join(`
`)}async executeCommand(c){await this.enqueuePrint(c,null,!0,this.terminalPrompt.textContent);const f=this.parseCommand(c);await this.executePipeline(f),this.updatePrompt()}handleTabCompletion(){const c=this.terminalInput.value,f=this.terminalInput.selectionStart,p=c.slice(0,f),y=p.match(/(\S+)$/);if(!y)return;const g=y[1],I=p.slice(0,p.length-g.length);let S,k;if(g.includes("/")){const a=g.split("/");k=a.pop(),S=this.fs.resolvePath(a.join("/"),this.currentPath)}else S=[...this.currentPath],k=g;let w;try{w=Object.keys(this.fs.getFolder(S))}catch{return}const v=w.filter(a=>a.startsWith(k));if(v.length)if(v.length===1){const a=v[0]+(this.fs.isFile(S,v[0])?"":"/");this.terminalInput.value=I+a+c.slice(f),this.terminalInput.selectionStart=this.terminalInput.selectionEnd=I.length+a.length}else{const a=v.reduce((b,u)=>{let N=0;for(;N<b.length&&N<u.length&&b[N]===u[N];)N++;return b.slice(0,N)},v[0]);a.length>k.length?(this.terminalInput.value=I+a+c.slice(f),this.terminalInput.selectionStart=this.terminalInput.selectionEnd=I.length+a.length):this.print(v.join("  "))}}open(){const c=document.getElementById("terminal-win");if(c)return this.wm.bringToFront(c);const f=this.wm.createWindow("terminal-win","Terminal","700px","500px");Object.assign(f.style,{left:"200px",top:"100px"}),f.innerHTML=`
    <div class="window-header">
      <span>Terminal</span>
      <div class="window-controls">
        <button class="minimize-btn">−</button>
        <button class="maximize-btn">□</button>
        <button class="close-btn">X</button>
      </div>
    </div>
    <div class="window-content" style="background:#000;color:white;font-family:monospace;padding:10px;overflow-y:auto;height:calc(100% - 40px);">
      <div id="terminal-output" style="white-space:pre;"></div>
      <div id="terminal-input-line" style="display:flex;">
        <span id="terminal-prompt"></span>
        <input id="terminal-input" style="flex:1;background:transparent;border:none;color:white;font-family:monospace;outline:none;margin-left:5px;">
      </div>
    </div>
  `,Oe.appendChild(f),this.wm.makeDraggable(f),this.wm.makeResizable(f),this.wm.setupWindowControls(f),this.wm.addToTaskbar(f.id,"Terminal","/static/icons/terminal.png"),this.terminalOutput=f.querySelector("#terminal-output"),this.terminalInput=f.querySelector("#terminal-input"),this.terminalPrompt=f.querySelector("#terminal-prompt"),this.terminalInputLine=f.querySelector("#terminal-input-line"),this.terminalOutput.addEventListener("contextmenu",p=>{p.stopPropagation()}),this.terminalOutput.style.userSelect="text",this.terminalInput.style.userSelect="text",this.updatePrompt(),this.print("Welcome to Reeyuki's terminal"),this.print(`Type 'help' for available commands
`),this.setupEventHandlers(),this.terminalInput.focus()}updatePrompt(){const c=this.currentPath.length?"/"+this.currentPath.join("/"):"/";this.terminalPrompt.textContent=`${this.username}@${this.hostname}:${c}$ `}registerCommand(c,f){this.commands[c]=f}registerDefaultCommands(){this.registerCommand("help",()=>this.cmdHelp()),this.registerCommand("clear",()=>this.cmdClear()),this.registerCommand("pwd",()=>this.print(this.currentPath.length?"/"+this.currentPath.join("/"):"/")),this.registerCommand("ls",(c,f)=>this.cmdLs(c,f)),this.registerCommand("cd",c=>this.cmdCd(c)),this.registerCommand("mkdir",c=>this.cmdMkdir(c)),this.registerCommand("touch",c=>this.cmdTouch(c)),this.registerCommand("rm",(c,f)=>this.cmdRm(c,f)),this.registerCommand("cat",c=>this.cmdCat(c)),this.registerCommand("echo",c=>this.print(c.join(" "))),this.registerCommand("whoami",()=>this.print(this.username)),this.registerCommand("hostname",()=>this.print(this.hostname)),this.registerCommand("date",()=>this.print(new Date().toString())),this.registerCommand("history",()=>this.history.forEach((c,f)=>this.print(`  ${f+1}  ${c}`))),this.registerCommand("tree",()=>this.cmdTree()),this.registerCommand("uname",()=>this.print("Linux reeyuki-desktop 6.1.23-arch1-1 #1 SMP PREEMPT x86_64 GNU/Linux")),this.registerCommand("ping",c=>this.cmdPing(c)),this.registerCommand("curl",c=>this.cmdCurl(c)),this.registerCommand("neofetch",()=>this.cmdNeofetch()),this.registerCommand("ps",()=>this.cmdPs()),this.registerCommand("grep",c=>this.cmdGrep(c)),this.registerCommand("wc",c=>this.cmdWc(c))}cmdClear(){this.terminalOutput.innerHTML=""}cmdLs(c=[],f=[]){const p=f.some(a=>a.includes("a")),y=f.some(a=>a.includes("l")),g=f.some(a=>a.includes("h")),I=f.some(a=>a.includes("R")),S=f.some(a=>a.includes("r")),k=a=>{if(!g)return a;const b=["B","K","M","G"];let u=0,N=a;for(;N>=1024&&u<b.length-1;)N/=1024,u++;return`${Math.round(N)}${b[u]}`},w=(a,b="")=>{try{const u=this.fs.getFolder(a);let N=Object.keys(u);p||(N=N.filter(x=>!x.startsWith("."))),S&&(N=N.reverse()),N.forEach(x=>{const O=this.fs.isFile(a,x),C=y?`${O?"-":"d"} ${x}${O?"":"/"}${O&&u[x].size!=null?` ${k(u[x].size)}`:""}`:x+(O?"":"/");this.print(b+C,O?null:"blue"),I&&!O&&w(this.fs.resolvePath(x,a),b+"  ")})}catch{this.print(`ls: cannot access '${a}': No such file or directory`)}},v=c.length?this.fs.resolvePath(c[0],this.currentPath):this.currentPath;w(v)}cmdCd(c){if(!c.length||c[0]==="~"){this.currentPath=["home",this.username];return}try{const f=this.fs.resolvePath(c[0],this.currentPath);this.fs.getFolder(f),this.currentPath=f}catch{this.print(`cd: ${c[0]}: No such file or directory`)}}cmdMkdir(c){if(!c.length)return this.print("mkdir: missing operand");c.forEach(f=>{this.fs.createFolder(this.currentPath,f),this.print(`Created directory: ${f}`)})}cmdTouch(c){if(!c.length)return this.print("touch: missing file operand");c.forEach(f=>{this.fs.createFile(this.currentPath,f,""),this.print(`Created file: ${f}`)})}cmdRm(c=[],f=[]){if(!c.length)return this.print("rm: missing operand");const p=f.some(I=>I.includes("r")),y=f.some(I=>I.includes("f")),g=I=>{try{const S=I.slice(0,-1),k=I[I.length-1];if(this.fs.isFile(S,k))this.fs.deleteItem(S,k);else{if(!p)throw new Error("is a directory");Object.keys(this.fs.getFolder(I)).forEach(v=>g([...I,v])),this.fs.deleteItem(S,k)}}catch(S){y||this.print(`rm: cannot remove '${I.join("/")}': ${S.message}`)}};c.forEach(I=>{let S=I.startsWith("/")?this.fs.resolvePath(I,[]):this.fs.resolvePath(I,this.currentPath);g(S)})}cmdCat(c){if(!c.length)return this.print("cat: missing file operand");c.forEach(f=>{f.includes(`
`)?this.print(f):this.fs.isFile(this.currentPath,f)?this.print(this.fs.getFileContent(this.currentPath,f)||"(empty file)"):this.print(`cat: ${f}: Is a directory`)})}cmdGrep(c){if(c.length<1)return this.print("grep: missing pattern");const f=c[0],y=c.slice(1).join(" ").split(`
`),g=new RegExp(f,"i");y.forEach(I=>{g.test(I)&&this.print(I)})}cmdWc(c){const f=c.join(" "),p=f.split(`
`).filter(I=>I.length>0),y=f.split(/\s+/).filter(I=>I.length>0),g=f.length;this.print(`  ${p.length}  ${y.length}  ${g}`)}cmdTree(c=this.currentPath,f=""){f||this.print(c.length?"/"+c.join("/"):"/");const p=Object.keys(this.fs.getFolder(c));p.forEach((y,g)=>{const I=this.fs.isFile(c,y),S=g===p.length-1;this.print(f+(S?"└── ":"├── ")+y+(I?"":"/")),I||this.cmdTree([...c,y],f+(S?"    ":"│   "))})}async cmdPing(c){if(!c.length)return this.print("Usage: ping <host>");await this.print(`PING ${c[0]} ...`);const f=performance.now();try{await fetch("https://"+c[0],{method:"HEAD",mode:"no-cors"})}catch(p){console.error(p)}await this.print(`Reply from ${c[0]}: time=${(performance.now()-f).toFixed(2)}ms`)}async cmdCurl(c){if(!c.length)return this.print("Usage: curl <url>");try{const f=await(await fetch(c[0])).text();this.print(f.slice(0,1e3))}catch{this.print(`curl: (6) Could not resolve host: ${c[0]}`)}}async cmdNeofetch(){const c=navigator.userAgent,f=navigator.userAgentData?.platform||navigator.platform||c||"Unknown";let p="Unknown";/Windows/i.test(f)?p="Windows":/Mac/i.test(f)?p="macOS":/Android/i.test(f)?p="Android":/iPhone|iPad|iOS/i.test(f)?p="iOS":/Linux/i.test(f)&&(p="Linux");const y=p==="Windows"?"Eww a windows!":p;let g="Unknown";/Firefox\/\d+/i.test(c)?g="Firefox":/Edg\/\d+/i.test(c)?g="Edge":/Chrome\/\d+/i.test(c)?g="Chrome":/Safari\/\d+/i.test(c)&&(g="Safari");const I=g==="Chrome"||g==="Edge"?"eww a chromium?!":g,S=navigator.hardwareConcurrency??"Unknown",k=typeof S=="number"&&S>10?`${S} (WOW ITS SO BIG!)`:S;let w="Unknown",v=0;try{const C=document.createElement("canvas"),A=C.getContext("webgl2")||C.getContext("webgl");if(A){w=A.getParameter(A.RENDERER);const J=A.getParameter(A.MAX_TEXTURE_SIZE),B=A.getParameter(A.MAX_VARYING_VECTORS),H=A.getParameter(A.MAX_VERTEX_UNIFORM_VECTORS);v=Math.min(8,Math.floor((J/2048+B/16+H/128)*1.2))}}catch(C){console.error(C)}let a="Unknown";typeof InstallTrigger<"u"?a="SpiderMonkey":typeof window.chrome<"u"?a="V8":/Apple/.test(navigator.vendor)&&(a="JavaScriptCore");const b=navigator.deviceMemory?`${navigator.deviceMemory} GB`:"Unknown",u=navigator.doNotTrack==="1"||window.doNotTrack==="1"?"Enabled":"Disabled",N=Date.now()-this.pageLoadTime,x=`${Math.floor(N/36e5)}h, ${Math.floor(N%36e5/6e4)}m`,O=["","","                     "+this.username+"@"+this.hostname,`        /\\           OWOS     ${y}`,`       /  \\          KEWNEL   ${a}wu`,`      /\\   \\         CPUWU    Cwpu Cowes: ${k}`,`     / > ω <\\        BROWSEWU  ${I}`,`    /   __   \\       GWAPHU    ${w}`,`   / __|  |__-\\      WENDAWU   ${v}`,`  /_-''    ''-_\\     MEMOWY    ${b}`,`                     DoNawtTWACKWU  ${u}`,`                     RESOWUW   ${window.innerWidth}x${window.innerHeight}`,`                     UWUPTIME  ${x}`];for(const C of O)await this.enqueuePrint(C)}cmdPs(){const c=Array.from(document.querySelectorAll(".window"));this.print("  PID   TTY      TIME CMD"),c.forEach((f,p)=>{const y=f.querySelector(".window-header span")?.textContent||"unknown";this.print(`  ${1e3+p}  pts/0  0:00 ${y}`)})}cmdHelp(){const c=[["help","Show this help message"],["neofetch","Display system/browser summary"],["clear","Clear the terminal screen"],["ls","List directory contents"],["pwd","Print working directory"],["cd [dir]","Change directory"],["mkdir","Create a new directory"],["touch","Create a new file"],["rm","Remove file or directory"],["cat","Display file contents"],["echo","Display a line of text"],["grep","Search for pattern in input"],["wc","Count lines, words, and characters"],["whoami","Display current user"],["hostname","Display hostname"],["date","Display current date and time"],["history","Show command history"],["tree","Display directory tree"]];this.print("Available commands:"),c.forEach(([f,p])=>this.print(`  ${f.padEnd(10)} - ${p}`)),this.print(""),this.print("Glob patterns: * (match any), ? (match one)"),this.print("Pipes: command1 | command2")}}function Ps(it){return it&&it.__esModule&&Object.prototype.hasOwnProperty.call(it,"default")?it.default:it}var Hn={exports:{}},Bs=Hn.exports,Ii;function Us(){return Ii||(Ii=1,(function(it,c){(function(p,y){it.exports=y()})(Bs,function(){return(function(f){var p={};function y(g){if(p[g])return p[g].exports;var I=p[g]={exports:{},id:g,loaded:!1};return f[g].call(I.exports,I,I.exports,y),I.loaded=!0,I.exports}return y.m=f,y.c=p,y.p="",y(0)})([function(f,p,y){(function(g,I,S,k){Object.defineProperty(p,"__esModule",{value:!0});var w=y(2),v=y(9),a;(function(r){r[r.EPERM=1]="EPERM",r[r.ENOENT=2]="ENOENT",r[r.EIO=5]="EIO",r[r.EBADF=9]="EBADF",r[r.EACCES=13]="EACCES",r[r.EBUSY=16]="EBUSY",r[r.EEXIST=17]="EEXIST",r[r.ENOTDIR=20]="ENOTDIR",r[r.EISDIR=21]="EISDIR",r[r.EINVAL=22]="EINVAL",r[r.EFBIG=27]="EFBIG",r[r.ENOSPC=28]="ENOSPC",r[r.EROFS=30]="EROFS",r[r.ENOTEMPTY=39]="ENOTEMPTY",r[r.ENOTSUP=95]="ENOTSUP"})(a||(a={}));var b={};b[a.EPERM]="Operation not permitted.",b[a.ENOENT]="No such file or directory.",b[a.EIO]="Input/output error.",b[a.EBADF]="Bad file descriptor.",b[a.EACCES]="Permission denied.",b[a.EBUSY]="Resource busy or locked.",b[a.EEXIST]="File exists.",b[a.ENOTDIR]="File is not a directory.",b[a.EISDIR]="File is a directory.",b[a.EINVAL]="Invalid argument.",b[a.EFBIG]="File is too big.",b[a.ENOSPC]="No space left on disk.",b[a.EROFS]="Cannot modify a read-only file system.",b[a.ENOTEMPTY]="Directory is not empty.",b[a.ENOTSUP]="Operation is not supported.";var u=(function(r){function t(n,e,i){e===void 0&&(e=b[n]),r.call(this,e),this.syscall="",this.errno=n,this.code=a[n],this.path=i,this.stack=new r().stack,this.message="Error: "+this.code+": "+e+(this.path?", '"+this.path+"'":"")}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.fromJSON=function(e){var i=new t(0);return i.errno=e.errno,i.code=e.code,i.path=e.path,i.stack=e.stack,i.message=e.message,i},t.fromBuffer=function(e,i){return i===void 0&&(i=0),t.fromJSON(JSON.parse(e.toString("utf8",i+4,i+4+e.readUInt32LE(i))))},t.FileError=function(e,i){return new t(e,b[e],i)},t.ENOENT=function(e){return this.FileError(a.ENOENT,e)},t.EEXIST=function(e){return this.FileError(a.EEXIST,e)},t.EISDIR=function(e){return this.FileError(a.EISDIR,e)},t.ENOTDIR=function(e){return this.FileError(a.ENOTDIR,e)},t.EPERM=function(e){return this.FileError(a.EPERM,e)},t.ENOTEMPTY=function(e){return this.FileError(a.ENOTEMPTY,e)},t.prototype.toString=function(){return this.message},t.prototype.toJSON=function(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message}},t.prototype.writeToBuffer=function(e,i){e===void 0&&(e=g.alloc(this.bufferSize())),i===void 0&&(i=0);var o=e.write(JSON.stringify(this.toJSON()),i+4);return e.writeUInt32LE(o,i),e},t.prototype.bufferSize=function(){return 4+g.byteLength(JSON.stringify(this.toJSON()))},t})(Error),N=Object.freeze({get ErrorCode(){return a},ErrorStrings:b,ApiError:u}),x;(function(r){r[r.NOP=0]="NOP",r[r.THROW_EXCEPTION=1]="THROW_EXCEPTION",r[r.TRUNCATE_FILE=2]="TRUNCATE_FILE",r[r.CREATE_FILE=3]="CREATE_FILE"})(x||(x={}));var O=function r(t){if(this.flagStr=t,r.validFlagStrs.indexOf(t)<0)throw new u(a.EINVAL,"Invalid flag: "+t)};O.getFileFlag=function(t){return O.flagCache.hasOwnProperty(t)?O.flagCache[t]:O.flagCache[t]=new O(t)},O.prototype.getFlagString=function(){return this.flagStr},O.prototype.isReadable=function(){return this.flagStr.indexOf("r")!==-1||this.flagStr.indexOf("+")!==-1},O.prototype.isWriteable=function(){return this.flagStr.indexOf("w")!==-1||this.flagStr.indexOf("a")!==-1||this.flagStr.indexOf("+")!==-1},O.prototype.isTruncating=function(){return this.flagStr.indexOf("w")!==-1},O.prototype.isAppendable=function(){return this.flagStr.indexOf("a")!==-1},O.prototype.isSynchronous=function(){return this.flagStr.indexOf("s")!==-1},O.prototype.isExclusive=function(){return this.flagStr.indexOf("x")!==-1},O.prototype.pathExistsAction=function(){return this.isExclusive()?x.THROW_EXCEPTION:this.isTruncating()?x.TRUNCATE_FILE:x.NOP},O.prototype.pathNotExistsAction=function(){return(this.isWriteable()||this.isAppendable())&&this.flagStr!=="r+"?x.CREATE_FILE:x.THROW_EXCEPTION},O.flagCache={},O.validFlagStrs=["r","r+","rs","rs+","w","wx","w+","wx+","a","ax","a+","ax+"];var C;(function(r){r[r.FILE=32768]="FILE",r[r.DIRECTORY=16384]="DIRECTORY",r[r.SYMLINK=40960]="SYMLINK"})(C||(C={}));var A=function(t,n,e,i,o,s){if(i===void 0&&(i=new Date),o===void 0&&(o=new Date),s===void 0&&(s=new Date),this.size=n,this.atime=i,this.mtime=o,this.ctime=s,this.dev=0,this.ino=0,this.rdev=0,this.nlink=1,this.blksize=4096,this.uid=0,this.gid=0,this.birthtime=new Date(0),this.fileData=null,e)this.mode=e;else switch(t){case C.FILE:this.mode=420;break;case C.DIRECTORY:default:this.mode=511}this.blocks=Math.ceil(n/512),this.mode<4096&&(this.mode|=t)};A.fromBuffer=function(t){var n=t.readUInt32LE(0),e=t.readUInt32LE(4),i=t.readDoubleLE(8),o=t.readDoubleLE(16),s=t.readDoubleLE(24);return new A(e&61440,n,e&4095,new Date(i),new Date(o),new Date(s))},A.prototype.toBuffer=function(){var t=g.alloc(32);return t.writeUInt32LE(this.size,0),t.writeUInt32LE(this.mode,4),t.writeDoubleLE(this.atime.getTime(),8),t.writeDoubleLE(this.mtime.getTime(),16),t.writeDoubleLE(this.ctime.getTime(),24),t},A.prototype.clone=function(){return new A(this.mode&61440,this.size,this.mode&4095,this.atime,this.mtime,this.ctime)},A.prototype.isFile=function(){return(this.mode&61440)===C.FILE},A.prototype.isDirectory=function(){return(this.mode&61440)===C.DIRECTORY},A.prototype.isSymbolicLink=function(){return(this.mode&61440)===C.SYMLINK},A.prototype.chmod=function(t){this.mode=this.mode&61440|t},A.prototype.isSocket=function(){return!1},A.prototype.isBlockDevice=function(){return!1},A.prototype.isCharacterDevice=function(){return!1},A.prototype.isFIFO=function(){return!1};var J=function(r,t){return r};function B(r){if(r)return r;throw new u(a.EIO,"Initialize BrowserFS with a file system using BrowserFS.initialize(filesystem)")}function H(r,t){switch(typeof r){case"number":return r;case"string":var n=parseInt(r,8);return isNaN(n)?t:n;default:return t}}function St(r){if(r instanceof Date)return r;if(typeof r=="number")return new Date(r*1e3);throw new u(a.EINVAL,"Invalid time.")}function tt(r){if(r.indexOf("\0")>=0)throw new u(a.EINVAL,"Path must be a string without null bytes.");if(r==="")throw new u(a.EINVAL,"Path must not be empty.");return v.resolve(r)}function kt(r,t,n,e){switch(typeof r){case"object":return{encoding:typeof r.encoding<"u"?r.encoding:t,flag:typeof r.flag<"u"?r.flag:n,mode:H(r.mode,e)};case"string":return{encoding:r,flag:n,mode:e};default:return{encoding:t,flag:n,mode:e}}}function dt(){}var z=function(){this.F_OK=0,this.R_OK=4,this.W_OK=2,this.X_OK=1,this.root=null,this.fdMap={},this.nextFd=100};z.prototype.initialize=function(t){if(!t.constructor.isAvailable())throw new u(a.EINVAL,"Tried to instantiate BrowserFS with an unavailable file system.");return this.root=t},z.prototype._toUnixTimestamp=function(t){if(typeof t=="number")return t;if(t instanceof Date)return t.getTime()/1e3;throw new Error("Cannot parse time: "+t)},z.prototype.getRootFS=function(){return this.root?this.root:null},z.prototype.rename=function(t,n,e){e===void 0&&(e=dt);var i=J(e,1);try{B(this.root).rename(tt(t),tt(n),i)}catch(o){i(o)}},z.prototype.renameSync=function(t,n){B(this.root).renameSync(tt(t),tt(n))},z.prototype.exists=function(t,n){n===void 0&&(n=dt);var e=J(n,1);try{return B(this.root).exists(tt(t),e)}catch{return e(!1)}},z.prototype.existsSync=function(t){try{return B(this.root).existsSync(tt(t))}catch{return!1}},z.prototype.stat=function(t,n){n===void 0&&(n=dt);var e=J(n,2);try{return B(this.root).stat(tt(t),!1,e)}catch(i){return e(i)}},z.prototype.statSync=function(t){return B(this.root).statSync(tt(t),!1)},z.prototype.lstat=function(t,n){n===void 0&&(n=dt);var e=J(n,2);try{return B(this.root).stat(tt(t),!0,e)}catch(i){return e(i)}},z.prototype.lstatSync=function(t){return B(this.root).statSync(tt(t),!0)},z.prototype.truncate=function(t,n,e){n===void 0&&(n=0),e===void 0&&(e=dt);var i=0;typeof n=="function"?e=n:typeof n=="number"&&(i=n);var o=J(e,1);try{if(i<0)throw new u(a.EINVAL);return B(this.root).truncate(tt(t),i,o)}catch(s){return o(s)}},z.prototype.truncateSync=function(t,n){if(n===void 0&&(n=0),n<0)throw new u(a.EINVAL);return B(this.root).truncateSync(tt(t),n)},z.prototype.unlink=function(t,n){n===void 0&&(n=dt);var e=J(n,1);try{return B(this.root).unlink(tt(t),e)}catch(i){return e(i)}},z.prototype.unlinkSync=function(t){return B(this.root).unlinkSync(tt(t))},z.prototype.open=function(t,n,e,i){var o=this;i===void 0&&(i=dt);var s=H(e,420);i=typeof e=="function"?e:i;var l=J(i,2);try{B(this.root).open(tt(t),O.getFileFlag(n),s,function(m,E){E?l(m,o.getFdForFile(E)):l(m)})}catch(m){l(m)}},z.prototype.openSync=function(t,n,e){return e===void 0&&(e=420),this.getFdForFile(B(this.root).openSync(tt(t),O.getFileFlag(n),H(e,420)))},z.prototype.readFile=function(t,n,e){n===void 0&&(n={}),e===void 0&&(e=dt);var i=kt(n,null,"r",null);e=typeof n=="function"?n:e;var o=J(e,2);try{var s=O.getFileFlag(i.flag);return s.isReadable()?B(this.root).readFile(tt(t),i.encoding,s,o):o(new u(a.EINVAL,"Flag passed to readFile must allow for reading."))}catch(l){return o(l)}},z.prototype.readFileSync=function(t,n){n===void 0&&(n={});var e=kt(n,null,"r",null),i=O.getFileFlag(e.flag);if(!i.isReadable())throw new u(a.EINVAL,"Flag passed to readFile must allow for reading.");return B(this.root).readFileSync(tt(t),e.encoding,i)},z.prototype.writeFile=function(t,n,e,i){e===void 0&&(e={}),i===void 0&&(i=dt);var o=kt(e,"utf8","w",420);i=typeof e=="function"?e:i;var s=J(i,1);try{var l=O.getFileFlag(o.flag);return l.isWriteable()?B(this.root).writeFile(tt(t),n,o.encoding,l,o.mode,s):s(new u(a.EINVAL,"Flag passed to writeFile must allow for writing."))}catch(m){return s(m)}},z.prototype.writeFileSync=function(t,n,e){var i=kt(e,"utf8","w",420),o=O.getFileFlag(i.flag);if(!o.isWriteable())throw new u(a.EINVAL,"Flag passed to writeFile must allow for writing.");return B(this.root).writeFileSync(tt(t),n,i.encoding,o,i.mode)},z.prototype.appendFile=function(t,n,e,i){i===void 0&&(i=dt);var o=kt(e,"utf8","a",420);i=typeof e=="function"?e:i;var s=J(i,1);try{var l=O.getFileFlag(o.flag);if(!l.isAppendable())return s(new u(a.EINVAL,"Flag passed to appendFile must allow for appending."));B(this.root).appendFile(tt(t),n,o.encoding,l,o.mode,s)}catch(m){s(m)}},z.prototype.appendFileSync=function(t,n,e){var i=kt(e,"utf8","a",420),o=O.getFileFlag(i.flag);if(!o.isAppendable())throw new u(a.EINVAL,"Flag passed to appendFile must allow for appending.");return B(this.root).appendFileSync(tt(t),n,i.encoding,o,i.mode)},z.prototype.fstat=function(t,n){n===void 0&&(n=dt);var e=J(n,2);try{var i=this.fd2file(t);i.stat(e)}catch(o){e(o)}},z.prototype.fstatSync=function(t){return this.fd2file(t).statSync()},z.prototype.close=function(t,n){var e=this;n===void 0&&(n=dt);var i=J(n,1);try{this.fd2file(t).close(function(o){o||e.closeFd(t),i(o)})}catch(o){i(o)}},z.prototype.closeSync=function(t){this.fd2file(t).closeSync(),this.closeFd(t)},z.prototype.ftruncate=function(t,n,e){e===void 0&&(e=dt);var i=typeof n=="number"?n:0;e=typeof n=="function"?n:e;var o=J(e,1);try{var s=this.fd2file(t);if(i<0)throw new u(a.EINVAL);s.truncate(i,o)}catch(l){o(l)}},z.prototype.ftruncateSync=function(t,n){n===void 0&&(n=0);var e=this.fd2file(t);if(n<0)throw new u(a.EINVAL);e.truncateSync(n)},z.prototype.fsync=function(t,n){n===void 0&&(n=dt);var e=J(n,1);try{this.fd2file(t).sync(e)}catch(i){e(i)}},z.prototype.fsyncSync=function(t){this.fd2file(t).syncSync()},z.prototype.fdatasync=function(t,n){n===void 0&&(n=dt);var e=J(n,1);try{this.fd2file(t).datasync(e)}catch(i){e(i)}},z.prototype.fdatasyncSync=function(t){this.fd2file(t).datasyncSync()},z.prototype.write=function(t,n,e,i,o,s){s===void 0&&(s=dt);var l,m,E,D=null;if(typeof n=="string"){var M="utf8";switch(typeof e){case"function":s=e;break;case"number":D=e,M=typeof i=="string"?i:"utf8",s=typeof o=="function"?o:s;break;default:return s=typeof i=="function"?i:typeof o=="function"?o:s,s(new u(a.EINVAL,"Invalid arguments."))}l=g.from(n,M),m=0,E=l.length}else l=n,m=e,E=i,D=typeof o=="number"?o:null,s=typeof o=="function"?o:s;var q=J(s,3);try{var $=this.fd2file(t);D==null&&(D=$.getPos()),$.write(l,m,E,D,q)}catch(nt){q(nt)}},z.prototype.writeSync=function(t,n,e,i,o){var s,l=0,m,E;if(typeof n=="string"){E=typeof e=="number"?e:null;var D=typeof i=="string"?i:"utf8";l=0,s=g.from(n,D),m=s.length}else s=n,l=e,m=i,E=typeof o=="number"?o:null;var M=this.fd2file(t);return E==null&&(E=M.getPos()),M.writeSync(s,l,m,E)},z.prototype.read=function(t,n,e,i,o,s){s===void 0&&(s=dt);var l,m,E,D,M;if(typeof n=="number"){E=n,l=e;var q=i;s=typeof o=="function"?o:s,m=0,D=g.alloc(E),M=J(function(nt,ut,yt){if(nt)return s(nt);s(nt,yt.toString(q),ut)},3)}else D=n,m=e,E=i,l=o,M=J(s,3);try{var $=this.fd2file(t);l==null&&(l=$.getPos()),$.read(D,m,E,l,M)}catch(nt){M(nt)}},z.prototype.readSync=function(t,n,e,i,o){var s=!1,l,m,E,D,M="utf8";typeof n=="number"?(E=n,D=e,M=i,m=0,l=g.alloc(E),s=!0):(l=n,m=e,E=i,D=o);var q=this.fd2file(t);D==null&&(D=q.getPos());var $=q.readSync(l,m,E,D);return s?[l.toString(M),$]:$},z.prototype.fchown=function(t,n,e,i){i===void 0&&(i=dt);var o=J(i,1);try{this.fd2file(t).chown(n,e,o)}catch(s){o(s)}},z.prototype.fchownSync=function(t,n,e){this.fd2file(t).chownSync(n,e)},z.prototype.fchmod=function(t,n,e){var i=J(e,1);try{var o=typeof n=="string"?parseInt(n,8):n;this.fd2file(t).chmod(o,i)}catch(s){i(s)}},z.prototype.fchmodSync=function(t,n){var e=typeof n=="string"?parseInt(n,8):n;this.fd2file(t).chmodSync(e)},z.prototype.futimes=function(t,n,e,i){i===void 0&&(i=dt);var o=J(i,1);try{var s=this.fd2file(t);typeof n=="number"&&(n=new Date(n*1e3)),typeof e=="number"&&(e=new Date(e*1e3)),s.utimes(n,e,o)}catch(l){o(l)}},z.prototype.futimesSync=function(t,n,e){this.fd2file(t).utimesSync(St(n),St(e))},z.prototype.rmdir=function(t,n){n===void 0&&(n=dt);var e=J(n,1);try{t=tt(t),B(this.root).rmdir(t,e)}catch(i){e(i)}},z.prototype.rmdirSync=function(t){return t=tt(t),B(this.root).rmdirSync(t)},z.prototype.mkdir=function(t,n,e){e===void 0&&(e=dt),typeof n=="function"&&(e=n,n=511);var i=J(e,1);try{t=tt(t),B(this.root).mkdir(t,n,i)}catch(o){i(o)}},z.prototype.mkdirSync=function(t,n){B(this.root).mkdirSync(tt(t),H(n,511))},z.prototype.readdir=function(t,n){n===void 0&&(n=dt);var e=J(n,2);try{t=tt(t),B(this.root).readdir(t,e)}catch(i){e(i)}},z.prototype.readdirSync=function(t){return t=tt(t),B(this.root).readdirSync(t)},z.prototype.link=function(t,n,e){e===void 0&&(e=dt);var i=J(e,1);try{t=tt(t),n=tt(n),B(this.root).link(t,n,i)}catch(o){i(o)}},z.prototype.linkSync=function(t,n){return t=tt(t),n=tt(n),B(this.root).linkSync(t,n)},z.prototype.symlink=function(t,n,e,i){i===void 0&&(i=dt);var o=typeof e=="string"?e:"file";i=typeof e=="function"?e:i;var s=J(i,1);try{if(o!=="file"&&o!=="dir")return s(new u(a.EINVAL,"Invalid type: "+o));t=tt(t),n=tt(n),B(this.root).symlink(t,n,o,s)}catch(l){s(l)}},z.prototype.symlinkSync=function(t,n,e){if(!e)e="file";else if(e!=="file"&&e!=="dir")throw new u(a.EINVAL,"Invalid type: "+e);return t=tt(t),n=tt(n),B(this.root).symlinkSync(t,n,e)},z.prototype.readlink=function(t,n){n===void 0&&(n=dt);var e=J(n,2);try{t=tt(t),B(this.root).readlink(t,e)}catch(i){e(i)}},z.prototype.readlinkSync=function(t){return t=tt(t),B(this.root).readlinkSync(t)},z.prototype.chown=function(t,n,e,i){i===void 0&&(i=dt);var o=J(i,1);try{t=tt(t),B(this.root).chown(t,!1,n,e,o)}catch(s){o(s)}},z.prototype.chownSync=function(t,n,e){t=tt(t),B(this.root).chownSync(t,!1,n,e)},z.prototype.lchown=function(t,n,e,i){i===void 0&&(i=dt);var o=J(i,1);try{t=tt(t),B(this.root).chown(t,!0,n,e,o)}catch(s){o(s)}},z.prototype.lchownSync=function(t,n,e){t=tt(t),B(this.root).chownSync(t,!0,n,e)},z.prototype.chmod=function(t,n,e){e===void 0&&(e=dt);var i=J(e,1);try{var o=H(n,-1);if(o<0)throw new u(a.EINVAL,"Invalid mode.");B(this.root).chmod(tt(t),!1,o,i)}catch(s){i(s)}},z.prototype.chmodSync=function(t,n){var e=H(n,-1);if(e<0)throw new u(a.EINVAL,"Invalid mode.");t=tt(t),B(this.root).chmodSync(t,!1,e)},z.prototype.lchmod=function(t,n,e){e===void 0&&(e=dt);var i=J(e,1);try{var o=H(n,-1);if(o<0)throw new u(a.EINVAL,"Invalid mode.");B(this.root).chmod(tt(t),!0,o,i)}catch(s){i(s)}},z.prototype.lchmodSync=function(t,n){var e=H(n,-1);if(e<1)throw new u(a.EINVAL,"Invalid mode.");B(this.root).chmodSync(tt(t),!0,e)},z.prototype.utimes=function(t,n,e,i){i===void 0&&(i=dt);var o=J(i,1);try{B(this.root).utimes(tt(t),St(n),St(e),o)}catch(s){o(s)}},z.prototype.utimesSync=function(t,n,e){B(this.root).utimesSync(tt(t),St(n),St(e))},z.prototype.realpath=function(t,n,e){e===void 0&&(e=dt);var i=typeof n=="object"?n:{};e=typeof n=="function"?n:dt;var o=J(e,2);try{t=tt(t),B(this.root).realpath(t,i,o)}catch(s){o(s)}},z.prototype.realpathSync=function(t,n){return n===void 0&&(n={}),t=tt(t),B(this.root).realpathSync(t,n)},z.prototype.watchFile=function(t,n,e){throw new u(a.ENOTSUP)},z.prototype.unwatchFile=function(t,n){throw new u(a.ENOTSUP)},z.prototype.watch=function(t,n,e){throw new u(a.ENOTSUP)},z.prototype.access=function(t,n,e){throw new u(a.ENOTSUP)},z.prototype.accessSync=function(t,n){throw new u(a.ENOTSUP)},z.prototype.createReadStream=function(t,n){throw new u(a.ENOTSUP)},z.prototype.createWriteStream=function(t,n){throw new u(a.ENOTSUP)},z.prototype.wrapCallbacks=function(t){J=t},z.prototype.getFdForFile=function(t){var n=this.nextFd++;return this.fdMap[n]=t,n},z.prototype.fd2file=function(t){var n=this.fdMap[t];if(n)return n;throw new u(a.EBADF,"Invalid file descriptor.")},z.prototype.closeFd=function(t){delete this.fdMap[t]},z.Stats=A;var et=new z,lt={},Tt=z.prototype;Object.keys(Tt).forEach(function(r){typeof et[r]=="function"?lt[r]=function(){return et[r].apply(et,arguments)}:lt[r]=et[r]}),lt.changeFSModule=function(r){et=r},lt.getFSModule=function(){return et},lt.FS=z;function mt(r,t,n,e,i){return r<t||n<t?r>n?n+1:r+1:e===i?t:t+1}function Ct(r,t){if(r===t)return 0;if(r.length>t.length){var n=r;r=t,t=n}for(var e=r.length,i=t.length;e>0&&r.charCodeAt(e-1)===t.charCodeAt(i-1);)e--,i--;for(var o=0;o<e&&r.charCodeAt(o)===t.charCodeAt(o);)o++;if(e-=o,i-=o,e===0||i===1)return i;for(var s=new Array(e<<1),l=0;l<e;)s[e+l]=r.charCodeAt(o+l),s[l]=++l;var m,E,D,M,q;for(m=0;m+3<i;)for(var $=t.charCodeAt(o+(E=m)),nt=t.charCodeAt(o+(D=m+1)),ut=t.charCodeAt(o+(M=m+2)),yt=t.charCodeAt(o+(q=m+3)),It=m+=4,Gt=0;Gt<e;){var ae=s[e+Gt],Te=s[Gt];E=mt(Te,E,D,$,ae),D=mt(E,D,M,nt,ae),M=mt(D,M,q,ut,ae),It=mt(M,q,It,yt,ae),s[Gt++]=It,q=M,M=D,D=E,E=Te}for(var Fe=0;m<i;){var ln=t.charCodeAt(o+(E=m));Fe=++m;for(var Me=0;Me<e;Me++){var Pe=s[Me];s[Me]=Fe=Pe<E||Fe<E?Pe>Fe?Fe+1:Pe+1:ln===s[e+Me]?E:E+1,E=Pe}}return Fe}function Lt(r,t,n){r&&console.warn("["+t+"] Direct file system constructor usage is deprecated for this file system, and will be removed in the next major version. Please use the '"+t+".Create("+JSON.stringify(n)+", callback)' method instead. See https://github.com/jvilk/BrowserFS/issues/176 for more details.")}var Et=typeof navigator<"u"&&!!(/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||navigator.userAgent.indexOf("Trident")!==-1),Zt=typeof window>"u";function j(){throw new Error("BFS has reached an impossible code path; please file a bug.")}function U(r,t,n){n.existsSync(r)||(U(v.dirname(r),t,n),n.mkdirSync(r,t))}function K(r){var t=ft(r),n=t.byteOffset,e=t.byteLength;return n===0&&e===t.buffer.byteLength?t.buffer:t.buffer.slice(n,n+e)}function ft(r){return r instanceof Uint8Array?r:new Uint8Array(r)}function Rt(r){return r instanceof g?r:r instanceof Uint8Array?gt(r):g.from(r)}function gt(r){return r instanceof g?r:r.byteOffset===0&&r.byteLength===r.buffer.byteLength?_t(r.buffer):g.from(r.buffer,r.byteOffset,r.byteLength)}function _t(r){return g.from(r)}function Ft(r,t,n){if(t===void 0&&(t=0),n===void 0&&(n=r.length),t<0||n<0||n>r.length||t>n)throw new TypeError("Invalid slice bounds on buffer of length "+r.length+": ["+t+", "+n+"]");if(r.length===0)return Mt();var e=ft(r),i=r[0],o=(i+1)%255;return r[0]=o,e[0]===o?(e[0]=i,gt(e.slice(t,n))):(r[0]=i,gt(e.subarray(t,n)))}var Wt=null;function Mt(){return Wt||(Wt=g.alloc(0))}function T(r,t){g.isBuffer(r)?t():t(new u(a.EINVAL,"option must be a Buffer."))}function F(r,t,n){var e=r.Options,i=r.Name,o=0,s=!1,l=!1;function m(q){s||(q&&(s=!0,n(q)),o--,o===0&&l&&n())}var E=function(q){if(e.hasOwnProperty(q)){var $=e[q],nt=t[q];if(nt==null){if(!$.optional){var ut=Object.keys(t).filter(function(It){return!(It in e)}).map(function(It){return{str:It,distance:Ct(q,It)}}).filter(function(It){return It.distance<5}).sort(function(It,Gt){return It.distance-Gt.distance});return s?{}:(s=!0,{v:n(new u(a.EINVAL,"["+i+"] Required option '"+q+"' not provided."+(ut.length>0?" You provided unrecognized option '"+ut[0].str+"'; perhaps you meant to type '"+q+"'.":"")+`
Option description: `+$.description))})}}else{var yt=!1;if(Array.isArray($.type)?yt=$.type.indexOf(typeof nt)!==-1:yt=typeof nt===$.type,yt)$.validator&&(o++,$.validator(nt,m));else return s?{}:(s=!0,{v:n(new u(a.EINVAL,"["+i+"] Value provided for option "+q+" is not the proper type. Expected "+(Array.isArray($.type)?"one of {"+$.type.join(", ")+"}":$.type)+", but received "+typeof nt+`
Option description: `+$.description))})}}};for(var D in e){var M=E(D);if(M)return M.v}l=!0,o===0&&!s&&n()}var Z=Object.freeze({deprecationMessage:Lt,isIE:Et,isWebWorker:Zt,fail:j,mkdirpSync:U,buffer2ArrayBuffer:K,buffer2Uint8array:ft,arrayish2Buffer:Rt,uint8Array2Buffer:gt,arrayBuffer2Buffer:_t,copyingSlice:Ft,emptyBuffer:Mt,bufferValidator:T,checkOptions:F}),rt=function(t){this.fs=t,this.nodefs=t.getNodeFS(),this.FS=t.getFS(),this.PATH=t.getPATH(),this.ERRNO_CODES=t.getERRNO_CODES()};rt.prototype.open=function(t){var n=this.fs.realPath(t.node),e=this.FS;try{e.isFile(t.node.mode)&&(t.nfd=this.nodefs.openSync(n,this.fs.flagsToPermissionString(t.flags)))}catch(i){throw i.code?new e.ErrnoError(this.ERRNO_CODES[i.code]):i}},rt.prototype.close=function(t){var n=this.FS;try{n.isFile(t.node.mode)&&t.nfd&&this.nodefs.closeSync(t.nfd)}catch(e){throw e.code?new n.ErrnoError(this.ERRNO_CODES[e.code]):e}},rt.prototype.read=function(t,n,e,i,o){try{return this.nodefs.readSync(t.nfd,gt(n),e,i,o)}catch(s){throw new this.FS.ErrnoError(this.ERRNO_CODES[s.code])}},rt.prototype.write=function(t,n,e,i,o){try{return this.nodefs.writeSync(t.nfd,gt(n),e,i,o)}catch(s){throw new this.FS.ErrnoError(this.ERRNO_CODES[s.code])}},rt.prototype.llseek=function(t,n,e){var i=n;if(e===1)i+=t.position;else if(e===2&&this.FS.isFile(t.node.mode))try{var o=this.nodefs.fstatSync(t.nfd);i+=o.size}catch(s){throw new this.FS.ErrnoError(this.ERRNO_CODES[s.code])}if(i<0)throw new this.FS.ErrnoError(this.ERRNO_CODES.EINVAL);return t.position=i,i};var pt=function(t){this.fs=t,this.nodefs=t.getNodeFS(),this.FS=t.getFS(),this.PATH=t.getPATH(),this.ERRNO_CODES=t.getERRNO_CODES()};pt.prototype.getattr=function(t){var n=this.fs.realPath(t),e;try{e=this.nodefs.lstatSync(n)}catch(i){throw i.code?new this.FS.ErrnoError(this.ERRNO_CODES[i.code]):i}return{dev:e.dev,ino:e.ino,mode:e.mode,nlink:e.nlink,uid:e.uid,gid:e.gid,rdev:e.rdev,size:e.size,atime:e.atime,mtime:e.mtime,ctime:e.ctime,blksize:e.blksize,blocks:e.blocks}},pt.prototype.setattr=function(t,n){var e=this.fs.realPath(t);try{if(n.mode!==void 0&&(this.nodefs.chmodSync(e,n.mode),t.mode=n.mode),n.timestamp!==void 0){var i=new Date(n.timestamp);this.nodefs.utimesSync(e,i,i)}}catch(o){if(!o.code)throw o;if(o.code!=="ENOTSUP")throw new this.FS.ErrnoError(this.ERRNO_CODES[o.code])}if(n.size!==void 0)try{this.nodefs.truncateSync(e,n.size)}catch(o){throw o.code?new this.FS.ErrnoError(this.ERRNO_CODES[o.code]):o}},pt.prototype.lookup=function(t,n){var e=this.PATH.join2(this.fs.realPath(t),n),i=this.fs.getMode(e);return this.fs.createNode(t,n,i)},pt.prototype.mknod=function(t,n,e,i){var o=this.fs.createNode(t,n,e,i),s=this.fs.realPath(o);try{this.FS.isDir(o.mode)?this.nodefs.mkdirSync(s,o.mode):this.nodefs.writeFileSync(s,"",{mode:o.mode})}catch(l){throw l.code?new this.FS.ErrnoError(this.ERRNO_CODES[l.code]):l}return o},pt.prototype.rename=function(t,n,e){var i=this.fs.realPath(t),o=this.PATH.join2(this.fs.realPath(n),e);try{this.nodefs.renameSync(i,o),t.name=e,t.parent=n}catch(s){throw s.code?new this.FS.ErrnoError(this.ERRNO_CODES[s.code]):s}},pt.prototype.unlink=function(t,n){var e=this.PATH.join2(this.fs.realPath(t),n);try{this.nodefs.unlinkSync(e)}catch(i){throw i.code?new this.FS.ErrnoError(this.ERRNO_CODES[i.code]):i}},pt.prototype.rmdir=function(t,n){var e=this.PATH.join2(this.fs.realPath(t),n);try{this.nodefs.rmdirSync(e)}catch(i){throw i.code?new this.FS.ErrnoError(this.ERRNO_CODES[i.code]):i}},pt.prototype.readdir=function(t){var n=this.fs.realPath(t);try{var e=this.nodefs.readdirSync(n);return e.push(".",".."),e}catch(i){throw i.code?new this.FS.ErrnoError(this.ERRNO_CODES[i.code]):i}},pt.prototype.symlink=function(t,n,e){var i=this.PATH.join2(this.fs.realPath(t),n);try{this.nodefs.symlinkSync(e,i)}catch(o){throw o.code?new this.FS.ErrnoError(this.ERRNO_CODES[o.code]):o}},pt.prototype.readlink=function(t){var n=this.fs.realPath(t);try{return this.nodefs.readlinkSync(n)}catch(e){throw e.code?new this.FS.ErrnoError(this.ERRNO_CODES[e.code]):e}};var bt=function(t,n,e,i){t===void 0&&(t=self.FS),n===void 0&&(n=self.PATH),e===void 0&&(e=self.ERRNO_CODES),i===void 0&&(i=lt),this.flagsToPermissionStringMap={0:"r",1:"r+",2:"r+",64:"r",65:"r+",66:"r+",129:"rx+",193:"rx+",514:"w+",577:"w",578:"w+",705:"wx",706:"wx+",1024:"a",1025:"a",1026:"a+",1089:"a",1090:"a+",1153:"ax",1154:"ax+",1217:"ax",1218:"ax+",4096:"rs",4098:"rs+"},this.nodefs=i,this.FS=t,this.PATH=n,this.ERRNO_CODES=e,this.node_ops=new pt(this),this.stream_ops=new rt(this)};bt.prototype.mount=function(t){return this.createNode(null,"/",this.getMode(t.opts.root),0)},bt.prototype.createNode=function(t,n,e,i){var o=this.FS;if(!o.isDir(e)&&!o.isFile(e)&&!o.isLink(e))throw new o.ErrnoError(this.ERRNO_CODES.EINVAL);var s=o.createNode(t,n,e);return s.node_ops=this.node_ops,s.stream_ops=this.stream_ops,s},bt.prototype.getMode=function(t){var n;try{n=this.nodefs.lstatSync(t)}catch(e){throw e.code?new this.FS.ErrnoError(this.ERRNO_CODES[e.code]):e}return n.mode},bt.prototype.realPath=function(t){for(var n=[];t.parent!==t;)n.push(t.name),t=t.parent;return n.push(t.mount.opts.root),n.reverse(),this.PATH.join.apply(null,n)},bt.prototype.flagsToPermissionString=function(t){var n=typeof t=="string"?parseInt(t,10):t;return n&=8191,n in this.flagsToPermissionStringMap?this.flagsToPermissionStringMap[n]:t},bt.prototype.getNodeFS=function(){return this.nodefs},bt.prototype.getFS=function(){return this.FS},bt.prototype.getPATH=function(){return this.PATH},bt.prototype.getERRNO_CODES=function(){return this.ERRNO_CODES};var Q=function(){};Q.prototype.supportsLinks=function(){return!1},Q.prototype.diskSpace=function(t,n){n(0,0)},Q.prototype.openFile=function(t,n,e){throw new u(a.ENOTSUP)},Q.prototype.createFile=function(t,n,e,i){throw new u(a.ENOTSUP)},Q.prototype.open=function(t,n,e,i){var o=this,s=function(l,m){if(l)switch(n.pathNotExistsAction()){case x.CREATE_FILE:return o.stat(v.dirname(t),!1,function(E,D){E?i(E):D&&!D.isDirectory()?i(u.ENOTDIR(v.dirname(t))):o.createFile(t,n,e,i)});case x.THROW_EXCEPTION:return i(u.ENOENT(t));default:return i(new u(a.EINVAL,"Invalid FileFlag object."))}else{if(m&&m.isDirectory())return i(u.EISDIR(t));switch(n.pathExistsAction()){case x.THROW_EXCEPTION:return i(u.EEXIST(t));case x.TRUNCATE_FILE:return o.openFile(t,n,function(E,D){E?i(E):D?D.truncate(0,function(){D.sync(function(){i(null,D)})}):j()});case x.NOP:return o.openFile(t,n,i);default:return i(new u(a.EINVAL,"Invalid FileFlag object."))}}};this.stat(t,!1,s)},Q.prototype.rename=function(t,n,e){e(new u(a.ENOTSUP))},Q.prototype.renameSync=function(t,n){throw new u(a.ENOTSUP)},Q.prototype.stat=function(t,n,e){e(new u(a.ENOTSUP))},Q.prototype.statSync=function(t,n){throw new u(a.ENOTSUP)},Q.prototype.openFileSync=function(t,n,e){throw new u(a.ENOTSUP)},Q.prototype.createFileSync=function(t,n,e){throw new u(a.ENOTSUP)},Q.prototype.openSync=function(t,n,e){var i;try{i=this.statSync(t,!1)}catch{switch(n.pathNotExistsAction()){case x.CREATE_FILE:var o=this.statSync(v.dirname(t),!1);if(!o.isDirectory())throw u.ENOTDIR(v.dirname(t));return this.createFileSync(t,n,e);case x.THROW_EXCEPTION:throw u.ENOENT(t);default:throw new u(a.EINVAL,"Invalid FileFlag object.")}}if(i.isDirectory())throw u.EISDIR(t);switch(n.pathExistsAction()){case x.THROW_EXCEPTION:throw u.EEXIST(t);case x.TRUNCATE_FILE:return this.unlinkSync(t),this.createFileSync(t,n,i.mode);case x.NOP:return this.openFileSync(t,n,e);default:throw new u(a.EINVAL,"Invalid FileFlag object.")}},Q.prototype.unlink=function(t,n){n(new u(a.ENOTSUP))},Q.prototype.unlinkSync=function(t){throw new u(a.ENOTSUP)},Q.prototype.rmdir=function(t,n){n(new u(a.ENOTSUP))},Q.prototype.rmdirSync=function(t){throw new u(a.ENOTSUP)},Q.prototype.mkdir=function(t,n,e){e(new u(a.ENOTSUP))},Q.prototype.mkdirSync=function(t,n){throw new u(a.ENOTSUP)},Q.prototype.readdir=function(t,n){n(new u(a.ENOTSUP))},Q.prototype.readdirSync=function(t){throw new u(a.ENOTSUP)},Q.prototype.exists=function(t,n){this.stat(t,null,function(e){n(!e)})},Q.prototype.existsSync=function(t){try{return this.statSync(t,!0),!0}catch{return!1}},Q.prototype.realpath=function(t,n,e){if(this.supportsLinks())for(var i=t.split(v.sep),o=0;o<i.length;o++){var s=i.slice(0,o+1);i[o]=v.join.apply(null,s)}else this.exists(t,function(l){l?e(null,t):e(u.ENOENT(t))})},Q.prototype.realpathSync=function(t,n){if(this.supportsLinks()){for(var e=t.split(v.sep),i=0;i<e.length;i++){var o=e.slice(0,i+1);e[i]=v.join.apply(v,o)}return e.join(v.sep)}else{if(this.existsSync(t))return t;throw u.ENOENT(t)}},Q.prototype.truncate=function(t,n,e){this.open(t,O.getFileFlag("r+"),420,(function(i,o){if(i)return e(i);o.truncate(n,(function(s){o.close((function(l){e(s||l)}))}))}))},Q.prototype.truncateSync=function(t,n){var e=this.openSync(t,O.getFileFlag("r+"),420);try{e.truncateSync(n)}catch(i){throw i}finally{e.closeSync()}},Q.prototype.readFile=function(t,n,e,i){var o=i;this.open(t,e,420,function(s,l){if(s)return i(s);i=function(m,E){l.close(function(D){return m||(m=D),o(m,E)})},l.stat(function(m,E){if(m)return i(m);var D=g.alloc(E.size);l.read(D,0,E.size,0,function(M){if(M)return i(M);if(n===null)return i(M,D);try{i(null,D.toString(n))}catch(q){i(q)}})})})},Q.prototype.readFileSync=function(t,n,e){var i=this.openSync(t,e,420);try{var o=i.statSync(),s=g.alloc(o.size);return i.readSync(s,0,o.size,0),i.closeSync(),n===null?s:s.toString(n)}finally{i.closeSync()}},Q.prototype.writeFile=function(t,n,e,i,o,s){var l=s;this.open(t,i,420,function(m,E){if(m)return s(m);s=function(D){E.close(function(M){l(D||M)})};try{typeof n=="string"&&(n=g.from(n,e))}catch(D){return s(D)}E.write(n,0,n.length,0,s)})},Q.prototype.writeFileSync=function(t,n,e,i,o){var s=this.openSync(t,i,o);try{typeof n=="string"&&(n=g.from(n,e)),s.writeSync(n,0,n.length,0)}finally{s.closeSync()}},Q.prototype.appendFile=function(t,n,e,i,o,s){var l=s;this.open(t,i,o,function(m,E){if(m)return s(m);s=function(D){E.close(function(M){l(D||M)})},typeof n=="string"&&(n=g.from(n,e)),E.write(n,0,n.length,null,s)})},Q.prototype.appendFileSync=function(t,n,e,i,o){var s=this.openSync(t,i,o);try{typeof n=="string"&&(n=g.from(n,e)),s.writeSync(n,0,n.length,null)}finally{s.closeSync()}},Q.prototype.chmod=function(t,n,e,i){i(new u(a.ENOTSUP))},Q.prototype.chmodSync=function(t,n,e){throw new u(a.ENOTSUP)},Q.prototype.chown=function(t,n,e,i,o){o(new u(a.ENOTSUP))},Q.prototype.chownSync=function(t,n,e,i){throw new u(a.ENOTSUP)},Q.prototype.utimes=function(t,n,e,i){i(new u(a.ENOTSUP))},Q.prototype.utimesSync=function(t,n,e){throw new u(a.ENOTSUP)},Q.prototype.link=function(t,n,e){e(new u(a.ENOTSUP))},Q.prototype.linkSync=function(t,n){throw new u(a.ENOTSUP)},Q.prototype.symlink=function(t,n,e,i){i(new u(a.ENOTSUP))},Q.prototype.symlinkSync=function(t,n,e){throw new u(a.ENOTSUP)},Q.prototype.readlink=function(t,n){n(new u(a.ENOTSUP))},Q.prototype.readlinkSync=function(t){throw new u(a.ENOTSUP)};var ne=(function(r){function t(){r.apply(this,arguments)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.supportsSynch=function(){return!0},t.prototype.rename=function(e,i,o){try{this.renameSync(e,i),o()}catch(s){o(s)}},t.prototype.stat=function(e,i,o){try{o(null,this.statSync(e,i))}catch(s){o(s)}},t.prototype.open=function(e,i,o,s){try{s(null,this.openSync(e,i,o))}catch(l){s(l)}},t.prototype.unlink=function(e,i){try{this.unlinkSync(e),i()}catch(o){i(o)}},t.prototype.rmdir=function(e,i){try{this.rmdirSync(e),i()}catch(o){i(o)}},t.prototype.mkdir=function(e,i,o){try{this.mkdirSync(e,i),o()}catch(s){o(s)}},t.prototype.readdir=function(e,i){try{i(null,this.readdirSync(e))}catch(o){i(o)}},t.prototype.chmod=function(e,i,o,s){try{this.chmodSync(e,i,o),s()}catch(l){s(l)}},t.prototype.chown=function(e,i,o,s,l){try{this.chownSync(e,i,o,s),l()}catch(m){l(m)}},t.prototype.utimes=function(e,i,o,s){try{this.utimesSync(e,i,o),s()}catch(l){s(l)}},t.prototype.link=function(e,i,o){try{this.linkSync(e,i),o()}catch(s){o(s)}},t.prototype.symlink=function(e,i,o,s){try{this.symlinkSync(e,i,o),s()}catch(l){s(l)}},t.prototype.readlink=function(e,i){try{i(null,this.readlinkSync(e))}catch(o){i(o)}},t})(Q),vt=function(){};vt.prototype.sync=function(t){t(new u(a.ENOTSUP))},vt.prototype.syncSync=function(){throw new u(a.ENOTSUP)},vt.prototype.datasync=function(t){this.sync(t)},vt.prototype.datasyncSync=function(){return this.syncSync()},vt.prototype.chown=function(t,n,e){e(new u(a.ENOTSUP))},vt.prototype.chownSync=function(t,n){throw new u(a.ENOTSUP)},vt.prototype.chmod=function(t,n){n(new u(a.ENOTSUP))},vt.prototype.chmodSync=function(t){throw new u(a.ENOTSUP)},vt.prototype.utimes=function(t,n,e){e(new u(a.ENOTSUP))},vt.prototype.utimesSync=function(t,n){throw new u(a.ENOTSUP)};var oe=(function(r){function t(n,e,i,o,s){if(r.call(this),this._pos=0,this._dirty=!1,this._fs=n,this._path=e,this._flag=i,this._stat=o,s?this._buffer=s:this._buffer=Mt(),this._stat.size!==this._buffer.length&&this._flag.isReadable())throw new Error("Invalid buffer: Buffer is "+this._buffer.length+" long, yet Stats object specifies that file is "+this._stat.size+" long.")}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.getBuffer=function(){return this._buffer},t.prototype.getStats=function(){return this._stat},t.prototype.getFlag=function(){return this._flag},t.prototype.getPath=function(){return this._path},t.prototype.getPos=function(){return this._flag.isAppendable()?this._stat.size:this._pos},t.prototype.advancePos=function(e){return this._pos+=e},t.prototype.setPos=function(e){return this._pos=e},t.prototype.sync=function(e){try{this.syncSync(),e()}catch(i){e(i)}},t.prototype.syncSync=function(){throw new u(a.ENOTSUP)},t.prototype.close=function(e){try{this.closeSync(),e()}catch(i){e(i)}},t.prototype.closeSync=function(){throw new u(a.ENOTSUP)},t.prototype.stat=function(e){try{e(null,this._stat.clone())}catch(i){e(i)}},t.prototype.statSync=function(){return this._stat.clone()},t.prototype.truncate=function(e,i){try{this.truncateSync(e),this._flag.isSynchronous()&&!lt.getRootFS().supportsSynch()&&this.sync(i),i()}catch(o){return i(o)}},t.prototype.truncateSync=function(e){if(this._dirty=!0,!this._flag.isWriteable())throw new u(a.EPERM,"File not opened with a writeable mode.");if(this._stat.mtime=new Date,e>this._buffer.length){var i=g.alloc(e-this._buffer.length,0);this.writeSync(i,0,i.length,this._buffer.length),this._flag.isSynchronous()&&lt.getRootFS().supportsSynch()&&this.syncSync();return}this._stat.size=e;var o=g.alloc(e);this._buffer.copy(o,0,0,e),this._buffer=o,this._flag.isSynchronous()&&lt.getRootFS().supportsSynch()&&this.syncSync()},t.prototype.write=function(e,i,o,s,l){try{l(null,this.writeSync(e,i,o,s),e)}catch(m){l(m)}},t.prototype.writeSync=function(e,i,o,s){if(this._dirty=!0,s==null&&(s=this.getPos()),!this._flag.isWriteable())throw new u(a.EPERM,"File not opened with a writeable mode.");var l=s+o;if(l>this._stat.size&&(this._stat.size=l,l>this._buffer.length)){var m=g.alloc(l);this._buffer.copy(m),this._buffer=m}var E=e.copy(this._buffer,s,i,i+o);return this._stat.mtime=new Date,this._flag.isSynchronous()?(this.syncSync(),E):(this.setPos(s+E),E)},t.prototype.read=function(e,i,o,s,l){try{l(null,this.readSync(e,i,o,s),e)}catch(m){l(m)}},t.prototype.readSync=function(e,i,o,s){if(!this._flag.isReadable())throw new u(a.EPERM,"File not opened with a readable mode.");s==null&&(s=this.getPos());var l=s+o;l>this._stat.size&&(o=this._stat.size-s);var m=this._buffer.copy(e,i,s,s+o);return this._stat.atime=new Date,this._pos=s+o,m},t.prototype.chmod=function(e,i){try{this.chmodSync(e),i()}catch(o){i(o)}},t.prototype.chmodSync=function(e){if(!this._fs.supportsProps())throw new u(a.ENOTSUP);this._dirty=!0,this._stat.chmod(e),this.syncSync()},t.prototype.isDirty=function(){return this._dirty},t.prototype.resetDirty=function(){this._dirty=!1},t})(vt),le=(function(r){function t(n,e,i,o,s){r.call(this,n,e,i,o,s)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){e()},t.prototype.syncSync=function(){},t.prototype.close=function(e){e()},t.prototype.closeSync=function(){},t})(oe),be=(function(r){function t(n,e,i,o,s){r.call(this,n,e,i,o,s)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty())},t.prototype.closeSync=function(){this.syncSync()},t})(oe),R=(function(r){function t(n,e,i){if(i===void 0&&(i=!0),r.call(this),this._queue=[],this._queueRunning=!1,this._isInitialized=!1,this._initializeCallbacks=[],this._sync=n,this._async=e,!n.supportsSynch())throw new Error("The first argument to AsyncMirror needs to be a synchronous file system.");Lt(i,t.Name,{sync:"sync file system instance",async:"async file system instance"})}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.Create=function(e,i){try{var o=new t(e.sync,e.async,!1);o.initialize(function(s){s?i(s):i(null,o)},!1)}catch(s){i(s)}},t.isAvailable=function(){return!0},t.prototype.getName=function(){return t.Name},t.prototype._syncSync=function(e){this._sync.writeFileSync(e.getPath(),e.getBuffer(),null,O.getFileFlag("w"),e.getStats().mode),this.enqueueOp({apiMethod:"writeFile",arguments:[e.getPath(),e.getBuffer(),null,e.getFlag(),e.getStats().mode]})},t.prototype.initialize=function(e,i){var o=this;i===void 0&&(i=!0),i&&console.warn("[AsyncMirror] AsyncMirror.initialize() is deprecated and will be removed in the next major version. Please use 'AsyncMirror.Create({ sync: (sync file system instance), async: (async file system instance)}, cb)' to create and initialize AsyncMirror instances.");var s=this._initializeCallbacks,l=function(M){o._isInitialized=!M,o._initializeCallbacks=[],s.forEach(function(q){return q(M)})};if(this._isInitialized)e();else if(s.push(e)===1){var m=function(M,q,$){M!=="/"&&o._sync.mkdirSync(M,q),o._async.readdir(M,function(nt,ut){var yt=0;function It(Gt){Gt?$(Gt):yt<ut.length?(D(v.join(M,ut[yt]),It),yt++):$()}nt?$(nt):It()})},E=function(M,q,$){o._async.readFile(M,null,O.getFileFlag("r"),function(nt,ut){if(nt)$(nt);else try{o._sync.writeFileSync(M,ut,null,O.getFileFlag("w"),q)}catch(yt){nt=yt}finally{$(nt)}})},D=function(M,q){o._async.stat(M,!1,function($,nt){$?q($):nt.isDirectory()?m(M,nt.mode,q):E(M,nt.mode,q)})};m("/",0,l)}},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return this._sync.supportsProps()&&this._async.supportsProps()},t.prototype.renameSync=function(e,i){this.checkInitialized(),this._sync.renameSync(e,i),this.enqueueOp({apiMethod:"rename",arguments:[e,i]})},t.prototype.statSync=function(e,i){return this.checkInitialized(),this._sync.statSync(e,i)},t.prototype.openSync=function(e,i,o){this.checkInitialized();var s=this._sync.openSync(e,i,o);return s.closeSync(),new be(this,e,i,this._sync.statSync(e,!1),this._sync.readFileSync(e,null,O.getFileFlag("r")))},t.prototype.unlinkSync=function(e){this.checkInitialized(),this._sync.unlinkSync(e),this.enqueueOp({apiMethod:"unlink",arguments:[e]})},t.prototype.rmdirSync=function(e){this.checkInitialized(),this._sync.rmdirSync(e),this.enqueueOp({apiMethod:"rmdir",arguments:[e]})},t.prototype.mkdirSync=function(e,i){this.checkInitialized(),this._sync.mkdirSync(e,i),this.enqueueOp({apiMethod:"mkdir",arguments:[e,i]})},t.prototype.readdirSync=function(e){return this.checkInitialized(),this._sync.readdirSync(e)},t.prototype.existsSync=function(e){return this.checkInitialized(),this._sync.existsSync(e)},t.prototype.chmodSync=function(e,i,o){this.checkInitialized(),this._sync.chmodSync(e,i,o),this.enqueueOp({apiMethod:"chmod",arguments:[e,i,o]})},t.prototype.chownSync=function(e,i,o,s){this.checkInitialized(),this._sync.chownSync(e,i,o,s),this.enqueueOp({apiMethod:"chown",arguments:[e,i,o,s]})},t.prototype.utimesSync=function(e,i,o){this.checkInitialized(),this._sync.utimesSync(e,i,o),this.enqueueOp({apiMethod:"utimes",arguments:[e,i,o]})},t.prototype.checkInitialized=function(){if(!this._isInitialized)throw new u(a.EPERM,"AsyncMirrorFS is not initialized. Please initialize AsyncMirrorFS using its initialize() method before using it.")},t.prototype.enqueueOp=function(e){var i=this;if(this._queue.push(e),!this._queueRunning){this._queueRunning=!0;var o=function(s){if(s&&console.error("WARNING: File system has desynchronized. Received following error: "+s+`
$`),i._queue.length>0){var l=i._queue.shift(),m=l.arguments;m.push(o),i._async[l.apiMethod].apply(i._async,m)}else i._queueRunning=!1};o()}},t})(ne);R.Name="AsyncMirror",R.Options={sync:{type:"object",description:"The synchronous file system to mirror the asynchronous file system to."},async:{type:"object",description:"The asynchronous file system to mirror."}};function h(r,t,n){switch(n.length){case 0:return r.call(t);case 1:return r.call(t,n[0]);case 2:return r.call(t,n[0],n[1]);case 3:return r.call(t,n[0],n[1],n[2])}return r.apply(t,n)}var d=Math.max;function L(r,t,n){return t=d(t===void 0?r.length-1:t,0),function(){for(var e=arguments,i=-1,o=d(e.length-t,0),s=Array(o);++i<o;)s[i]=e[t+i];i=-1;for(var l=Array(t+1);++i<t;)l[i]=e[i];return l[t]=n(s),h(r,this,l)}}function P(r){return r}function G(r,t){return L(r,t,P)}var V=function(r){return G(function(t){var n=t.pop();r.call(this,t,n)})};function xt(r){return G(function(t,n){var e=V(function(i,o){var s=this;return r(t,function(l,m){l.apply(s,i.concat(m))},o)});return n.length?e.apply(this,n):e})}var Dt=typeof I=="object"&&I&&I.Object===Object&&I,Pt=typeof self=="object"&&self&&self.Object===Object&&self,Vt=Dt||Pt||Function("return this")(),At=Vt.Symbol,ke=Object.prototype,Qe=ke.hasOwnProperty,je=ke.toString,We=At?At.toStringTag:void 0;function Yn(r){var t=Qe.call(r,We),n=r[We];try{r[We]=void 0;var e=!0}catch{}var i=je.call(r);return e&&(t?r[We]=n:delete r[We]),i}var Zn=Object.prototype,Vn=Zn.toString;function W(r){return Vn.call(r)}var st="[object Null]",_="[object Undefined]",ct=At?At.toStringTag:void 0;function Bt(r){return r==null?r===void 0?_:st:ct&&ct in Object(r)?Yn(r):W(r)}function ot(r){var t=typeof r;return r!=null&&(t=="object"||t=="function")}var fe="[object AsyncFunction]",at="[object Function]",Kt="[object GeneratorFunction]",Y="[object Proxy]";function X(r){if(!ot(r))return!1;var t=Bt(r);return t==at||t==Kt||t==fe||t==Y}var $e=9007199254740991;function Ut(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=$e}function ht(r){return r!=null&&Ut(r.length)&&!X(r)}var He={};function Ne(){}function Ht(r){return function(){if(r!==null){var t=r;r=null,t.apply(this,arguments)}}}var Ot=typeof Symbol=="function"&&Symbol.iterator,re=function(r){return Ot&&r[Ot]&&r[Ot]()};function ue(r,t){for(var n=-1,e=Array(r);++n<r;)e[n]=t(n);return e}function ie(r){return r!=null&&typeof r=="object"}var tn="[object Arguments]";function qe(r){return ie(r)&&Bt(r)==tn}var Xt=Object.prototype,he=Xt.hasOwnProperty,te=Xt.propertyIsEnumerable,Ie=qe((function(){return arguments})())?qe:function(r){return ie(r)&&he.call(r,"callee")&&!te.call(r,"callee")},Se=Array.isArray;function In(){return!1}var pr=typeof p=="object"&&p&&!p.nodeType&&p,dr=pr&&typeof S=="object"&&S&&!S.nodeType&&S,Bi=dr&&dr.exports===pr,yr=Bi?Vt.Buffer:void 0,Ui=yr?yr.isBuffer:void 0,zi=Ui||In,ji=9007199254740991,Wi=/^(?:0|[1-9]\d*)$/;function Hi(r,t){return t=t??ji,!!t&&(typeof r=="number"||Wi.test(r))&&r>-1&&r%1==0&&r<t}var qi="[object Arguments]",Gi="[object Array]",Xi="[object Boolean]",Yi="[object Date]",Zi="[object Error]",Vi="[object Function]",Ki="[object Map]",Ji="[object Number]",Qi="[object Object]",$i="[object RegExp]",to="[object Set]",eo="[object String]",no="[object WeakMap]",ro="[object ArrayBuffer]",io="[object DataView]",oo="[object Float32Array]",so="[object Float64Array]",ao="[object Int8Array]",co="[object Int16Array]",lo="[object Int32Array]",uo="[object Uint8Array]",fo="[object Uint8ClampedArray]",ho="[object Uint16Array]",po="[object Uint32Array]",zt={};zt[oo]=zt[so]=zt[ao]=zt[co]=zt[lo]=zt[uo]=zt[fo]=zt[ho]=zt[po]=!0,zt[qi]=zt[Gi]=zt[ro]=zt[Xi]=zt[io]=zt[Yi]=zt[Zi]=zt[Vi]=zt[Ki]=zt[Ji]=zt[Qi]=zt[$i]=zt[to]=zt[eo]=zt[no]=!1;function yo(r){return ie(r)&&Ut(r.length)&&!!zt[Bt(r)]}function mo(r){return function(t){return r(t)}}var mr=typeof p=="object"&&p&&!p.nodeType&&p,vr=mr&&typeof S=="object"&&S&&!S.nodeType&&S,vo=vr&&vr.exports===mr,Kn=vo&&Dt.process,gr=(function(){try{return Kn&&Kn.binding&&Kn.binding("util")}catch{}})(),wr=gr&&gr.isTypedArray,go=wr?mo(wr):yo,wo=Object.prototype,So=wo.hasOwnProperty;function Eo(r,t){var n=Se(r),e=!n&&Ie(r),i=!n&&!e&&zi(r),o=!n&&!e&&!i&&go(r),s=n||e||i||o,l=s?ue(r.length,String):[],m=l.length;for(var E in r)So.call(r,E)&&!(s&&(E=="length"||i&&(E=="offset"||E=="parent")||o&&(E=="buffer"||E=="byteLength"||E=="byteOffset")||Hi(E,m)))&&l.push(E);return l}var _o=Object.prototype;function bo(r){var t=r&&r.constructor,n=typeof t=="function"&&t.prototype||_o;return r===n}function ko(r,t){return function(n){return r(t(n))}}var Io=ko(Object.keys,Object),Ro=Object.prototype,Lo=Ro.hasOwnProperty;function xo(r){if(!bo(r))return Io(r);var t=[];for(var n in Object(r))Lo.call(r,n)&&n!="constructor"&&t.push(n);return t}function To(r){return ht(r)?Eo(r):xo(r)}function Fo(r){var t=-1,n=r.length;return function(){return++t<n?{value:r[t],key:t}:null}}function Oo(r){var t=-1;return function(){var e=r.next();return e.done?null:(t++,{value:e.value,key:t})}}function No(r){var t=To(r),n=-1,e=t.length;return function(){var o=t[++n];return n<e?{value:r[o],key:o}:null}}function Do(r){if(ht(r))return Fo(r);var t=re(r);return t?Oo(t):No(r)}function Sr(r){return function(){if(r===null)throw new Error("Callback was already called.");var t=r;r=null,t.apply(this,arguments)}}function Er(r){return function(t,n,e){if(e=Ht(e||Ne),r<=0||!t)return e(null);var i=Do(t),o=!1,s=0;function l(E,D){if(s-=1,E)o=!0,e(E);else{if(D===He||o&&s<=0)return o=!0,e(null);m()}}function m(){for(;s<r&&!o;){var E=i();if(E===null){o=!0,s<=0&&e(null);return}s+=1,n(E.value,E.key,Sr(l))}}m()}}function _r(r,t,n,e){Er(t)(r,n,e)}function Jn(r,t){return function(n,e,i){return r(n,t,e,i)}}function Co(r,t,n){n=Ht(n||Ne);var e=0,i=0,o=r.length;o===0&&n(null);function s(l,m){l?n(l):(++i===o||m===He)&&n(null)}for(;e<o;e++)t(r[e],e,Sr(s))}var Ao=Jn(_r,1/0),br=function(r,t,n){var e=ht(r)?Co:Ao;e(r,t,n)};function Mo(r){return function(t,n,e){return r(br,t,n,e)}}function kr(r,t,n,e){e=e||Ne,t=t||[];var i=[],o=0;r(t,function(s,l,m){var E=o++;n(s,function(D,M){i[E]=M,m(D)})},function(s){e(s,i)})}var Po=Mo(kr);xt(Po);function Bo(r){return function(t,n,e,i){return r(Er(n),t,e,i)}}var Uo=Bo(kr),zo=Jn(Uo,1);xt(zo),G(function(r,t){return G(function(n){return r.apply(null,t.concat(n))})});function jo(r,t){for(var n=-1,e=r==null?0:r.length;++n<e&&t(r[n],n,r)!==!1;);return r}var Ir=typeof setImmediate=="function"&&setImmediate,Rr=typeof k=="object"&&typeof k.nextTick=="function";function Lr(r){setTimeout(r,0)}function xr(r){return G(function(t,n){r(function(){t.apply(null,n)})})}var Rn;Ir?Rn=setImmediate:Rr?Rn=k.nextTick:Rn=Lr,xr(Rn);var Wo=Jn(_r,1);function Ho(r,t,n,e){e=Ht(e||Ne),Wo(r,function(i,o,s){n(t,i,function(l,m){t=m,s(l)})},function(i){e(i,t)})}var qo=G(function(t){return G(function(n){var e=this,i=n[n.length-1];typeof i=="function"?n.pop():i=Ne,Ho(t,n,function(o,s,l){s.apply(e,o.concat(G(function(m,E){l(m,E)})))},function(o,s){i.apply(e,[o].concat(s))})})});G(function(r){return qo.apply(null,r.reverse())}),G(function(r){var t=[null].concat(r);return V(function(n,e){return e.apply(this,t)})});function Tr(r){return G(function(t,n){t.apply(null,n.concat(G(function(e,i){typeof console=="object"&&(e?console.error&&console.error(e):console[r]&&jo(i,function(o){console[r](o)}))})))})}Tr("dir");function Go(r){return function(t,n,e){return r(t,e)}}function Fr(r,t,n){br(r,Go(t),n)}Tr("log");var Ln;Rr?Ln=k.nextTick:Ir?Ln=setImmediate:Ln=Lr,xr(Ln);var pe;function Xo(){pe||(pe={},pe[Dropbox.ApiError.NETWORK_ERROR]=a.EIO,pe[Dropbox.ApiError.INVALID_PARAM]=a.EINVAL,pe[Dropbox.ApiError.INVALID_TOKEN]=a.EPERM,pe[Dropbox.ApiError.OAUTH_ERROR]=a.EPERM,pe[Dropbox.ApiError.NOT_FOUND]=a.ENOENT,pe[Dropbox.ApiError.INVALID_METHOD]=a.EINVAL,pe[Dropbox.ApiError.NOT_ACCEPTABLE]=a.EINVAL,pe[Dropbox.ApiError.CONFLICT]=a.EINVAL,pe[Dropbox.ApiError.RATE_LIMITED]=a.EBUSY,pe[Dropbox.ApiError.SERVER_ERROR]=a.EBUSY,pe[Dropbox.ApiError.OVER_QUOTA]=a.ENOSPC)}function Yo(r){return r&&r.stat.isFile}function Zo(r){return r&&r.stat.isFolder}function Vo(r){return r==null||typeof r=="object"&&typeof r.byteLength=="number"}var se=function(t){this._cache={},this._client=t};se.prototype.readdir=function(t,n){var e=this,i=this.getCachedDirInfo(t);this._wrap(function(o){i!==null&&i.contents?e._client.readdir(t,{contentHash:i.stat.contentHash},o):e._client.readdir(t,o)},function(o,s,l,m){o?o.status===Dropbox.ApiError.NO_CONTENT&&i!==null?n(null,i.contents.slice(0)):n(o):(e.updateCachedDirInfo(t,l,s.slice(0)),m.forEach(function(E){e.updateCachedInfo(v.join(t,E.name),E)}),n(null,s))})},se.prototype.remove=function(t,n){var e=this;this._wrap(function(i){e._client.remove(t,i)},function(i,o){i||e.updateCachedInfo(t,o),n(i)})},se.prototype.move=function(t,n,e){var i=this;this._wrap(function(o){i._client.move(t,n,o)},function(o,s){o||(i.deleteCachedInfo(t),i.updateCachedInfo(n,s)),e(o)})},se.prototype.stat=function(t,n){var e=this;this._wrap(function(i){e._client.stat(t,i)},function(i,o){i||e.updateCachedInfo(t,o),n(i,o)})},se.prototype.readFile=function(t,n){var e=this,i=this.getCachedFileInfo(t);i!==null&&i.contents!==null?this.stat(t,function(o,s){o?n(o):s.contentHash===i.stat.contentHash?n(o,i.contents.slice(0),i.stat):e.readFile(t,n)}):this._wrap(function(o){e._client.readFile(t,{arrayBuffer:!0},o)},function(o,s,l){o||e.updateCachedInfo(t,l,s.slice(0)),n(o,s,l)})},se.prototype.writeFile=function(t,n,e){var i=this;this._wrap(function(o){i._client.writeFile(t,n,o)},function(o,s){o||i.updateCachedInfo(t,s,n.slice(0)),e(o,s)})},se.prototype.mkdir=function(t,n){var e=this;this._wrap(function(i){e._client.mkdir(t,i)},function(i,o){i||e.updateCachedInfo(t,o,[]),n(i)})},se.prototype._wrap=function(t,n){var e=0,i=function(o){var s=2;if(o&&3>++e)switch(o.status){case Dropbox.ApiError.SERVER_ERROR:case Dropbox.ApiError.NETWORK_ERROR:case Dropbox.ApiError.RATE_LIMITED:setTimeout(function(){t(i)},s*1e3);break;default:n.apply(null,arguments);break}else n.apply(null,arguments)};t(i)},se.prototype.getCachedInfo=function(t){return this._cache[t.toLowerCase()]},se.prototype.putCachedInfo=function(t,n){this._cache[t.toLowerCase()]=n},se.prototype.deleteCachedInfo=function(t){delete this._cache[t.toLowerCase()]},se.prototype.getCachedDirInfo=function(t){var n=this.getCachedInfo(t);return Zo(n)?n:null},se.prototype.getCachedFileInfo=function(t){var n=this.getCachedInfo(t);return Yo(n)?n:null},se.prototype.updateCachedDirInfo=function(t,n,e){e===void 0&&(e=null);var i=this.getCachedInfo(t);n.contentHash!==null&&(i===void 0||i.stat.contentHash!==n.contentHash)&&this.putCachedInfo(t,{stat:n,contents:e})},se.prototype.updateCachedFileInfo=function(t,n,e){e===void 0&&(e=null);var i=this.getCachedInfo(t);n.versionTag!==null&&(i===void 0||i.stat.versionTag!==n.versionTag)&&this.putCachedInfo(t,{stat:n,contents:e})},se.prototype.updateCachedInfo=function(t,n,e){e===void 0&&(e=null),n.isFile&&Vo(e)?this.updateCachedFileInfo(t,n,e):n.isFolder&&Array.isArray(e)&&this.updateCachedDirInfo(t,n,e)};var Ko=(function(r){function t(n,e,i,o,s){r.call(this,n,e,i,o,s)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var i=this;if(this.isDirty()){var o=this.getBuffer(),s=K(o);this._fs._writeFileStrict(this.getPath(),s,function(l){l||i.resetDirty(),e(l)})}else e()},t.prototype.close=function(e){this.sync(e)},t})(oe),xn=(function(r){function t(n,e){e===void 0&&(e=!0),r.call(this),this._client=new se(n),Lt(e,t.Name,{client:"authenticated dropbox client instance"}),Xo()}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.Create=function(e,i){i(null,new t(e.client,!1))},t.isAvailable=function(){return typeof Dropbox<"u"},t.prototype.getName=function(){return t.Name},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSymlinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!1},t.prototype.empty=function(e){var i=this;this._client.readdir("/",function(o,s){if(o)e(i.convert(o,"/"));else{var l=function(E,D){var M=v.join("/",E);i._client.remove(M,function(q){D(q?i.convert(q,M):null)})},m=function(E){E?e(E):e()};Fr(s,l,m)}})},t.prototype.rename=function(e,i,o){var s=this;this._client.move(e,i,function(l){l?s._client.stat(i,function(m,E){if(m||E.isFolder){var D=l.response.error.indexOf(e)>-1?e:i;o(s.convert(l,D))}else s._client.remove(i,function(M){M?o(s.convert(M,i)):s.rename(e,i,o)})}):o()})},t.prototype.stat=function(e,i,o){var s=this;this._client.stat(e,function(l,m){if(l)o(s.convert(l,e));else if(m&&m.isRemoved)o(u.FileError(a.ENOENT,e));else{var E=new A(s._statType(m),m.size);return o(null,E)}})},t.prototype.open=function(e,i,o,s){var l=this;this._client.readFile(e,function(m,E,D){if(m)if(i.isReadable())s(l.convert(m,e));else if(m.status===Dropbox.ApiError.NOT_FOUND){var M=new ArrayBuffer(0);return l._writeFileStrict(e,M,function(nt,ut){if(nt)s(nt);else{var yt=l._makeFile(e,i,ut,_t(M));s(null,yt)}})}else return s(l.convert(m,e));else{var q;E===null?q=Mt():q=_t(E);var $=l._makeFile(e,i,D,q);return s(null,$)}})},t.prototype._writeFileStrict=function(e,i,o){var s=this,l=v.dirname(e);this.stat(l,!1,function(m,E){m?o(u.FileError(a.ENOENT,l)):s._client.writeFile(e,i,function(D,M){D?o(s.convert(D,e)):o(null,M)})})},t.prototype._statType=function(e){return e.isFile?C.FILE:C.DIRECTORY},t.prototype._makeFile=function(e,i,o,s){var l=this._statType(o),m=new A(l,o.size);return new Ko(this,e,i,m,s)},t.prototype._remove=function(e,i,o){var s=this;this._client.stat(e,function(l,m){l?i(s.convert(l,e)):m.isFile&&!o?i(u.FileError(a.ENOTDIR,e)):!m.isFile&&o?i(u.FileError(a.EISDIR,e)):s._client.remove(e,function(E){i(E?s.convert(E,e):null)})})},t.prototype.unlink=function(e,i){this._remove(e,i,!0)},t.prototype.rmdir=function(e,i){this._remove(e,i,!1)},t.prototype.mkdir=function(e,i,o){var s=this,l=v.dirname(e);this._client.stat(l,function(m,E){m?o(s.convert(m,l)):s._client.mkdir(e,function(D){o(D?u.FileError(a.EEXIST,e):null)})})},t.prototype.readdir=function(e,i){var o=this;this._client.readdir(e,function(s,l){return s?i(o.convert(s)):i(null,l)})},t.prototype.convert=function(e,i){i===void 0&&(i=null);var o=pe[e.status];return o===void 0&&(o=a.EIO),i?u.FileError(o,i):new u(o)},t})(Q);xn.Name="Dropbox",xn.Options={client:{type:"object",description:"An *authenticated* Dropbox client. Must be from the 0.10 JS SDK.",validator:function(r,t){r.isAuthenticated&&r.isAuthenticated()?t():t(new u(a.EINVAL,"'client' option must be an authenticated Dropbox client from the v0.10 JS SDK."))}}};function Yt(r,t){t===void 0&&(t="");for(var n=r.errno,e=r.node,i=[];e&&(i.unshift(e.name),e!==e.parent);)e=e.parent;return new u(n,b[n],i.length>0?"/"+i.join("/"):t)}var Jo=(function(r){function t(n,e,i,o){r.call(this),this._fs=n,this._FS=e,this._path=i,this._stream=o}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.getPos=function(){},t.prototype.close=function(e){var i=null;try{this.closeSync()}catch(o){i=o}finally{e(i)}},t.prototype.closeSync=function(){try{this._FS.close(this._stream)}catch(e){throw Yt(e,this._path)}},t.prototype.stat=function(e){try{e(null,this.statSync())}catch(i){e(i)}},t.prototype.statSync=function(){try{return this._fs.statSync(this._path,!1)}catch(e){throw Yt(e,this._path)}},t.prototype.truncate=function(e,i){var o=null;try{this.truncateSync(e)}catch(s){o=s}finally{i(o)}},t.prototype.truncateSync=function(e){try{this._FS.ftruncate(this._stream.fd,e)}catch(i){throw Yt(i,this._path)}},t.prototype.write=function(e,i,o,s,l){try{l(null,this.writeSync(e,i,o,s),e)}catch(m){l(m)}},t.prototype.writeSync=function(e,i,o,s){try{var l=ft(e),m=s===null?void 0:s;return this._FS.write(this._stream,l,i,o,m)}catch(E){throw Yt(E,this._path)}},t.prototype.read=function(e,i,o,s,l){try{l(null,this.readSync(e,i,o,s),e)}catch(m){l(m)}},t.prototype.readSync=function(e,i,o,s){try{var l=ft(e),m=s===null?void 0:s;return this._FS.read(this._stream,l,i,o,m)}catch(E){throw Yt(E,this._path)}},t.prototype.sync=function(e){e()},t.prototype.syncSync=function(){},t.prototype.chown=function(e,i,o){var s=null;try{this.chownSync(e,i)}catch(l){s=l}finally{o(s)}},t.prototype.chownSync=function(e,i){try{this._FS.fchown(this._stream.fd,e,i)}catch(o){throw Yt(o,this._path)}},t.prototype.chmod=function(e,i){var o=null;try{this.chmodSync(e)}catch(s){o=s}finally{i(o)}},t.prototype.chmodSync=function(e){try{this._FS.fchmod(this._stream.fd,e)}catch(i){throw Yt(i,this._path)}},t.prototype.utimes=function(e,i,o){var s=null;try{this.utimesSync(e,i)}catch(l){s=l}finally{o(s)}},t.prototype.utimesSync=function(e,i){this._fs.utimesSync(this._path,e,i)},t})(vt),Tn=(function(r){function t(n){r.call(this),this._FS=n}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.Create=function(e,i){i(null,new t(e.FS))},t.isAvailable=function(){return!0},t.prototype.getName=function(){return this._FS.DB_NAME()},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsLinks=function(){return!0},t.prototype.supportsProps=function(){return!0},t.prototype.supportsSynch=function(){return!0},t.prototype.renameSync=function(e,i){try{this._FS.rename(e,i)}catch(o){throw o.errno===a.ENOENT?Yt(o,this.existsSync(e)?i:e):Yt(o)}},t.prototype.statSync=function(e,i){try{var o=i?this._FS.lstat(e):this._FS.stat(e),s=this.modeToFileType(o.mode);return new A(s,o.size,o.mode,o.atime,o.mtime,o.ctime)}catch(l){throw Yt(l,e)}},t.prototype.openSync=function(e,i,o){try{var s=this._FS.open(e,i.getFlagString(),o);if(this._FS.isDir(s.node.mode))throw this._FS.close(s),u.EISDIR(e);return new Jo(this,this._FS,e,s)}catch(l){throw Yt(l,e)}},t.prototype.unlinkSync=function(e){try{this._FS.unlink(e)}catch(i){throw Yt(i,e)}},t.prototype.rmdirSync=function(e){try{this._FS.rmdir(e)}catch(i){throw Yt(i,e)}},t.prototype.mkdirSync=function(e,i){try{this._FS.mkdir(e,i)}catch(o){throw Yt(o,e)}},t.prototype.readdirSync=function(e){try{return this._FS.readdir(e).filter(function(i){return i!=="."&&i!==".."})}catch(i){throw Yt(i,e)}},t.prototype.truncateSync=function(e,i){try{this._FS.truncate(e,i)}catch(o){throw Yt(o,e)}},t.prototype.readFileSync=function(e,i,o){try{var s=this._FS.readFile(e,{flags:o.getFlagString()}),l=gt(s);return i?l.toString(i):l}catch(m){throw Yt(m,e)}},t.prototype.writeFileSync=function(e,i,o,s,l){try{o&&(i=g.from(i,o));var m=ft(i);this._FS.writeFile(e,m,{flags:s.getFlagString(),encoding:"binary"}),this._FS.chmod(e,l)}catch(E){throw Yt(E,e)}},t.prototype.chmodSync=function(e,i,o){try{i?this._FS.lchmod(e,o):this._FS.chmod(e,o)}catch(s){throw Yt(s,e)}},t.prototype.chownSync=function(e,i,o,s){try{i?this._FS.lchown(e,o,s):this._FS.chown(e,o,s)}catch(l){throw Yt(l,e)}},t.prototype.symlinkSync=function(e,i,o){try{this._FS.symlink(e,i)}catch(s){throw Yt(s)}},t.prototype.readlinkSync=function(e){try{return this._FS.readlink(e)}catch(i){throw Yt(i,e)}},t.prototype.utimesSync=function(e,i,o){try{this._FS.utime(e,i.getTime(),o.getTime())}catch(s){throw Yt(s,e)}},t.prototype.modeToFileType=function(e){if(this._FS.isDir(e))return C.DIRECTORY;if(this._FS.isFile(e))return C.FILE;if(this._FS.isLink(e))return C.SYMLINK;throw u.EPERM("Invalid mode: "+e)},t})(ne);Tn.Name="EmscriptenFileSystem",Tn.Options={FS:{type:"object",description:"The Emscripten file system to use (the `FS` variable)"}};var en=(function(r){function t(n,e){r.call(this),this._folder=n,this._wrapped=e}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.Create=function(e,i){i(null,new t(e.folder,e.wrapped))},t.isAvailable=function(){return!0},t.prototype.initialize=function(e){var i=this;this._wrapped.exists(this._folder,function(o){o?e():i._wrapped.isReadOnly()?e(u.ENOENT(i._folder)):i._wrapped.mkdir(i._folder,511,e)})},t.prototype.getName=function(){return this._wrapped.getName()},t.prototype.isReadOnly=function(){return this._wrapped.isReadOnly()},t.prototype.supportsProps=function(){return this._wrapped.supportsProps()},t.prototype.supportsSynch=function(){return this._wrapped.supportsSynch()},t.prototype.supportsLinks=function(){return!1},t})(Q);en.Name="FolderAdapter",en.Options={folder:{type:"string",description:"The folder to use as the root directory"},wrapped:{type:"object",description:"The file system to wrap"}};function Or(r,t){if(t!==null&&typeof t=="object"){var n=t,e=n.path;e&&(e="/"+v.relative(r,e),n.message=n.message.replace(n.path,e),n.path=e)}return t}function Qo(r,t){return typeof t=="function"?function(n){arguments.length>0&&(arguments[0]=Or(r,n)),t.apply(null,arguments)}:t}function Nr(r,t,n){return r.slice(r.length-4)!=="Sync"?function(){return arguments.length>0&&(arguments[0]=v.join(this._folder,arguments[0]),n&&(arguments[1]=v.join(this._folder,arguments[1])),arguments[arguments.length-1]=Qo(this._folder,arguments[arguments.length-1])),this._wrapped[r].apply(this._wrapped,arguments)}:function(){try{return t&&(arguments[0]=v.join(this._folder,arguments[0])),n&&(arguments[1]=v.join(this._folder,arguments[1])),this._wrapped[r].apply(this._wrapped,arguments)}catch(e){throw Or(this._folder,e)}}}["diskSpace","stat","statSync","open","openSync","unlink","unlinkSync","rmdir","rmdirSync","mkdir","mkdirSync","readdir","readdirSync","exists","existsSync","realpath","realpathSync","truncate","truncateSync","readFile","readFileSync","writeFile","writeFileSync","appendFile","appendFileSync","chmod","chmodSync","chown","chownSync","utimes","utimesSync","readlink","readlinkSync"].forEach(function(r){en.prototype[r]=Nr(r,!0,!1)}),["rename","renameSync","link","linkSync","symlink","symlinkSync"].forEach(function(r){en.prototype[r]=Nr(r,!0,!0)});var Fn;typeof window<"u"?Fn=window:typeof self<"u"?Fn=self:Fn=I;var Jt=Fn;function $o(r){return r.isDirectory}var Qn=Jt.webkitRequestFileSystem||Jt.requestFileSystem||null;function ts(r,t,n,e){if(typeof navigator.webkitPersistentStorage<"u")switch(r){case Jt.PERSISTENT:navigator.webkitPersistentStorage.requestQuota(t,n,e);break;case Jt.TEMPORARY:navigator.webkitTemporaryStorage.requestQuota(t,n,e);break;default:e(new TypeError("Invalid storage type: "+r));break}else Jt.webkitStorageInfo.requestQuota(r,t,n,e)}function es(r){return Array.prototype.slice.call(r||[],0)}function Re(r,t,n){switch(r.name){case"PathExistsError":return u.EEXIST(t);case"QuotaExceededError":return u.FileError(a.ENOSPC,t);case"NotFoundError":return u.ENOENT(t);case"SecurityError":return u.FileError(a.EACCES,t);case"InvalidModificationError":return u.FileError(a.EPERM,t);case"TypeMismatchError":return u.FileError(n?a.ENOTDIR:a.EISDIR,t);default:return u.FileError(a.EINVAL,t)}}var ns=(function(r){function t(n,e,i,o,s,l){r.call(this,n,i,o,s,l),this._entry=e}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var i=this;if(!this.isDirty())return e();this._entry.createWriter(function(o){var s=i.getBuffer(),l=new Blob([K(s)]),m=l.size;o.onwriteend=function(E){o.onwriteend=null,o.onerror=null,o.truncate(m),i.resetDirty(),e()},o.onerror=function(E){e(Re(E,i.getPath(),!1))},o.write(l)})},t.prototype.close=function(e){this.sync(e)},t})(oe),On=(function(r){function t(n,e,i){n===void 0&&(n=5),e===void 0&&(e=Jt.PERSISTENT),i===void 0&&(i=!0),r.call(this),this.size=1024*1024*n,this.type=e,Lt(i,t.Name,{size:n,type:e})}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.Create=function(e,i){var o=new t(e.size,e.type,!1);o.allocate(function(s){return s?i(s):i(null,o)},!1)},t.isAvailable=function(){return!!Qn},t.prototype.getName=function(){return t.Name},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSymlinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!1},t.prototype.allocate=function(e,i){var o=this;e===void 0&&(e=function(){}),i===void 0&&(i=!0),i&&console.warn("[HTML5FS] HTML5FS.allocate() is deprecated and will be removed in the next major release. Please use 'HTML5FS.Create({type: "+this.type+", size: "+this.size+"}, cb)' to create and allocate HTML5FS instances.");var s=function(m){o.fs=m,e()},l=function(m){e(Re(m,"/",!0))};this.type===Jt.PERSISTENT?ts(this.type,this.size,function(m){Qn(o.type,m,s,l)},l):Qn(this.type,this.size,s,l)},t.prototype.empty=function(e){this._readdir("/",function(i,o){if(i)console.error("Failed to empty FS"),e(i);else{var s=function(m){i?(console.error("Failed to empty FS"),e(i)):e()},l=function(m,E){var D=function(){E()},M=function(q){E(Re(q,m.fullPath,!m.isDirectory))};$o(m)?m.removeRecursively(D,M):m.remove(D,M)};Fr(o,l,s)}})},t.prototype.rename=function(e,i,o){var s=this,l=2,m=0,E=this.fs.root,D=e,M=function($){--l<=0&&o(Re($,D,!1))},q=function($){if(++m===2)return o(new u(a.EINVAL,"Something was identified as both a file and a directory. This should never happen."));if(e===i)return o();D=v.dirname(i),E.getDirectory(D,{},function(nt){D=v.basename(i),$.moveTo(nt,D,function(ut){o()},function(ut){$.isDirectory?(D=i,s.unlink(i,function(yt){yt?M(ut):s.rename(e,i,o)})):M(ut)})},M)};E.getFile(e,{},q,M),E.getDirectory(e,{},q,M)},t.prototype.stat=function(e,i,o){var s=this,l={create:!1},m=function(q){var $=function(nt){var ut=new A(C.FILE,nt.size);o(null,ut)};q.file($,D)},E=function(q){var $=4096,nt=new A(C.DIRECTORY,$);o(null,nt)},D=function(q){o(Re(q,e,!1))},M=function(){s.fs.root.getDirectory(e,l,E,D)};this.fs.root.getFile(e,l,m,M)},t.prototype.open=function(e,i,o,s){var l=this,m=function(E){E.name==="InvalidModificationError"&&i.isExclusive()?s(u.EEXIST(e)):s(Re(E,e,!1))};this.fs.root.getFile(e,{create:i.pathNotExistsAction()===x.CREATE_FILE,exclusive:i.isExclusive()},function(E){E.file(function(D){var M=new FileReader;M.onloadend=function(q){var $=l._makeFile(e,E,i,D,M.result);s(null,$)},M.onerror=function(q){m(M.error)},M.readAsArrayBuffer(D)},m)},m)},t.prototype.unlink=function(e,i){this._remove(e,i,!0)},t.prototype.rmdir=function(e,i){var o=this;this.readdir(e,function(s,l){s?i(s):l.length>0?i(u.ENOTEMPTY(e)):o._remove(e,i,!1)})},t.prototype.mkdir=function(e,i,o){var s={create:!0,exclusive:!0},l=function(E){o()},m=function(E){o(Re(E,e,!0))};this.fs.root.getDirectory(e,s,l,m)},t.prototype.readdir=function(e,i){this._readdir(e,function(o,s){if(s){for(var l=[],m=0,E=s;m<E.length;m+=1){var D=E[m];l.push(D.name)}i(null,l)}else return i(o)})},t.prototype._makeFile=function(e,i,o,s,l){l===void 0&&(l=new ArrayBuffer(0));var m=new A(C.FILE,s.size),E=_t(l);return new ns(this,i,e,o,m,E)},t.prototype._readdir=function(e,i){var o=function(s){i(Re(s,e,!0))};this.fs.root.getDirectory(e,{create:!1},function(s){var l=s.createReader(),m=[],E=function(){l.readEntries((function(D){D.length?(m=m.concat(es(D)),E()):i(null,m)}),o)};E()},o)},t.prototype._remove=function(e,i,o){var s=function(E){var D=function(){i()},M=function(q){i(Re(q,e,!o))};E.remove(D,M)},l=function(E){i(Re(E,e,!o))},m={create:!1};o?this.fs.root.getFile(e,m,s,l):this.fs.root.getDirectory(e,m,s,l)},t})(Q);On.Name="HTML5FS",On.Options={size:{type:"number",optional:!0,description:"Storage quota to request, in megabytes. Allocated value may be less. Defaults to 5."},type:{type:"number",optional:!0,description:"window.PERSISTENT or window.TEMPORARY. Defaults to PERSISTENT."}};var de=function(t,n,e,i,o,s){this.id=t,this.size=n,this.mode=e,this.atime=i,this.mtime=o,this.ctime=s};de.fromBuffer=function(t){if(t===void 0)throw new Error("NO");return new de(t.toString("ascii",30),t.readUInt32LE(0),t.readUInt16LE(4),t.readDoubleLE(6),t.readDoubleLE(14),t.readDoubleLE(22))},de.prototype.toStats=function(){return new A((this.mode&61440)===C.DIRECTORY?C.DIRECTORY:C.FILE,this.size,this.mode,new Date(this.atime),new Date(this.mtime),new Date(this.ctime))},de.prototype.getSize=function(){return 30+this.id.length},de.prototype.toBuffer=function(t){return t===void 0&&(t=g.alloc(this.getSize())),t.writeUInt32LE(this.size,0),t.writeUInt16LE(this.mode,4),t.writeDoubleLE(this.atime,6),t.writeDoubleLE(this.mtime,14),t.writeDoubleLE(this.ctime,22),t.write(this.id,30,this.id.length,"ascii"),t},de.prototype.update=function(t){var n=!1;this.size!==t.size&&(this.size=t.size,n=!0),this.mode!==t.mode&&(this.mode=t.mode,n=!0);var e=t.atime.getTime();this.atime!==e&&(this.atime=e,n=!0);var i=t.mtime.getTime();this.mtime!==i&&(this.mtime=i,n=!0);var o=t.ctime.getTime();return this.ctime!==o&&(this.ctime=o,n=!0),n},de.prototype.isFile=function(){return(this.mode&61440)===C.FILE},de.prototype.isDirectory=function(){return(this.mode&61440)===C.DIRECTORY};var Be="/",$n=null;function Dr(){return $n||($n=g.from("{}"))}function Nn(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){var t=Math.random()*16|0,n=r==="x"?t:t&3|8;return n.toString(16)})}function ve(r,t){return r?(t(r),!1):!0}function $t(r,t,n){return r?(t.abort(function(){n(r)}),!1):!0}var De=function(t){this.store=t,this.originalData={},this.modifiedKeys=[]};De.prototype.get=function(t){var n=this.store.get(t);return this.stashOldValue(t,n),n},De.prototype.put=function(t,n,e){return this.markModified(t),this.store.put(t,n,e)},De.prototype.del=function(t){this.markModified(t),this.store.del(t)},De.prototype.commit=function(){},De.prototype.abort=function(){for(var t=this,n=0,e=t.modifiedKeys;n<e.length;n+=1){var i=e[n],o=t.originalData[i];o?t.store.put(i,o,!0):t.store.del(i)}},De.prototype.stashOldValue=function(t,n){this.originalData.hasOwnProperty(t)||(this.originalData[t]=n)},De.prototype.markModified=function(t){this.modifiedKeys.indexOf(t)===-1&&(this.modifiedKeys.push(t),this.originalData.hasOwnProperty(t)||(this.originalData[t]=this.store.get(t)))};var Cr=(function(r){function t(n,e,i,o,s){r.call(this,n,e,i,o,s)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this.getPath(),this.getBuffer(),this.getStats()),this.resetDirty())},t.prototype.closeSync=function(){this.syncSync()},t})(oe),Ar=(function(r){function t(n){r.call(this),this.store=n.store,this.makeRootDirectory()}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.isAvailable=function(){return!0},t.prototype.getName=function(){return this.store.name()},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSymlinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.empty=function(){this.store.clear(),this.makeRootDirectory()},t.prototype.renameSync=function(e,i){var o=this.store.beginTransaction("readwrite"),s=v.dirname(e),l=v.basename(e),m=v.dirname(i),E=v.basename(i),D=this.findINode(o,s),M=this.getDirListing(o,s,D);if(!M[l])throw u.ENOENT(e);var q=M[l];if(delete M[l],(m+"/").indexOf(e+"/")===0)throw new u(a.EBUSY,s);var $,nt;if(m===s?($=D,nt=M):($=this.findINode(o,m),nt=this.getDirListing(o,m,$)),nt[E]){var ut=this.getINode(o,i,nt[E]);if(ut.isFile())try{o.del(ut.id),o.del(nt[E])}catch(yt){throw o.abort(),yt}else throw u.EPERM(i)}nt[E]=q;try{o.put(D.id,g.from(JSON.stringify(M)),!0),o.put($.id,g.from(JSON.stringify(nt)),!0)}catch(yt){throw o.abort(),yt}o.commit()},t.prototype.statSync=function(e,i){return this.findINode(this.store.beginTransaction("readonly"),e).toStats()},t.prototype.createFileSync=function(e,i,o){var s=this.store.beginTransaction("readwrite"),l=Mt(),m=this.commitNewFile(s,e,C.FILE,o,l);return new Cr(this,e,i,m.toStats(),l)},t.prototype.openFileSync=function(e,i){var o=this.store.beginTransaction("readonly"),s=this.findINode(o,e),l=o.get(s.id);if(l===void 0)throw u.ENOENT(e);return new Cr(this,e,i,s.toStats(),l)},t.prototype.unlinkSync=function(e){this.removeEntry(e,!1)},t.prototype.rmdirSync=function(e){if(this.readdirSync(e).length>0)throw u.ENOTEMPTY(e);this.removeEntry(e,!0)},t.prototype.mkdirSync=function(e,i){var o=this.store.beginTransaction("readwrite"),s=g.from("{}");this.commitNewFile(o,e,C.DIRECTORY,i,s)},t.prototype.readdirSync=function(e){var i=this.store.beginTransaction("readonly");return Object.keys(this.getDirListing(i,e,this.findINode(i,e)))},t.prototype._syncSync=function(e,i,o){var s=this.store.beginTransaction("readwrite"),l=this._findINode(s,v.dirname(e),v.basename(e)),m=this.getINode(s,e,l),E=m.update(o);try{s.put(m.id,i,!0),E&&s.put(l,m.toBuffer(),!0)}catch(D){throw s.abort(),D}s.commit()},t.prototype.makeRootDirectory=function(){var e=this.store.beginTransaction("readwrite");if(e.get(Be)===void 0){var i=new Date().getTime(),o=new de(Nn(),4096,511|C.DIRECTORY,i,i,i);e.put(o.id,Dr(),!1),e.put(Be,o.toBuffer(),!1),e.commit()}},t.prototype._findINode=function(e,i,o){var s=this,l=function(m){var E=s.getDirListing(e,i,m);if(E[o])return E[o];throw u.ENOENT(v.resolve(i,o))};return i==="/"?o===""?Be:l(this.getINode(e,i,Be)):l(this.getINode(e,i+v.sep+o,this._findINode(e,v.dirname(i),v.basename(i))))},t.prototype.findINode=function(e,i){return this.getINode(e,i,this._findINode(e,v.dirname(i),v.basename(i)))},t.prototype.getINode=function(e,i,o){var s=e.get(o);if(s===void 0)throw u.ENOENT(i);return de.fromBuffer(s)},t.prototype.getDirListing=function(e,i,o){if(!o.isDirectory())throw u.ENOTDIR(i);var s=e.get(o.id);if(s===void 0)throw u.ENOENT(i);return JSON.parse(s.toString())},t.prototype.addNewNode=function(e,i){for(var o=0,s;o<5;)try{return s=Nn(),e.put(s,i,!1),s}catch{}throw new u(a.EIO,"Unable to commit data to key-value store.")},t.prototype.commitNewFile=function(e,i,o,s,l){var m=v.dirname(i),E=v.basename(i),D=this.findINode(e,m),M=this.getDirListing(e,m,D),q=new Date().getTime();if(i==="/"||M[E])throw u.EEXIST(i);var $;try{var nt=this.addNewNode(e,l);$=new de(nt,l.length,s|o,q,q,q);var ut=this.addNewNode(e,$.toBuffer());M[E]=ut,e.put(D.id,g.from(JSON.stringify(M)),!0)}catch(yt){throw e.abort(),yt}return e.commit(),$},t.prototype.removeEntry=function(e,i){var o=this.store.beginTransaction("readwrite"),s=v.dirname(e),l=this.findINode(o,s),m=this.getDirListing(o,s,l),E=v.basename(e);if(!m[E])throw u.ENOENT(e);var D=m[E];delete m[E];var M=this.getINode(o,e,D);if(!i&&M.isDirectory())throw u.EISDIR(e);if(i&&!M.isDirectory())throw u.ENOTDIR(e);try{o.del(M.id),o.del(D),o.put(l.id,g.from(JSON.stringify(m)),!0)}catch(q){throw o.abort(),q}o.commit()},t})(ne),Mr=(function(r){function t(n,e,i,o,s){r.call(this,n,e,i,o,s)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var i=this;this.isDirty()?this._fs._sync(this.getPath(),this.getBuffer(),this.getStats(),function(o){o||i.resetDirty(),e(o)}):e()},t.prototype.close=function(e){this.sync(e)},t})(oe),rs=(function(r){function t(){r.apply(this,arguments)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.isAvailable=function(){return!0},t.prototype.init=function(e,i){this.store=e,this.makeRootDirectory(i)},t.prototype.getName=function(){return this.store.name()},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSymlinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!1},t.prototype.empty=function(e){var i=this;this.store.clear(function(o){ve(o,e)&&i.makeRootDirectory(e)})},t.prototype.rename=function(e,i,o){var s=this,l=this.store.beginTransaction("readwrite"),m=v.dirname(e),E=v.basename(e),D=v.dirname(i),M=v.basename(i),q={},$={},nt=!1;if((D+"/").indexOf(e+"/")===0)return o(new u(a.EBUSY,m));var ut=function(){if(!(nt||!$.hasOwnProperty(m)||!$.hasOwnProperty(D))){var It=$[m],Gt=q[m],ae=$[D],Te=q[D];if(!It[E])o(u.ENOENT(e));else{var Fe=It[E];delete It[E];var ln=function(){ae[M]=Fe,l.put(Gt.id,g.from(JSON.stringify(It)),!0,function(Me){$t(Me,l,o)&&(m===D?l.commit(o):l.put(Te.id,g.from(JSON.stringify(ae)),!0,function(Pe){$t(Pe,l,o)&&l.commit(o)}))})};ae[M]?s.getINode(l,i,ae[M],function(Me,Pe){$t(Me,l,o)&&(Pe.isFile()?l.del(Pe.id,function(bi){$t(bi,l,o)&&l.del(ae[M],function(Os){$t(Os,l,o)&&ln()})}):l.abort(function(bi){o(u.EPERM(i))}))}):ln()}}},yt=function(It){s.findINodeAndDirListing(l,It,function(Gt,ae,Te){Gt?nt||(nt=!0,l.abort(function(){o(Gt)})):(q[It]=ae,$[It]=Te,ut())})};yt(m),m!==D&&yt(D)},t.prototype.stat=function(e,i,o){var s=this.store.beginTransaction("readonly");this.findINode(s,e,function(l,m){ve(l,o)&&o(null,m.toStats())})},t.prototype.createFile=function(e,i,o,s){var l=this,m=this.store.beginTransaction("readwrite"),E=Mt();this.commitNewFile(m,e,C.FILE,o,E,function(D,M){ve(D,s)&&s(null,new Mr(l,e,i,M.toStats(),E))})},t.prototype.openFile=function(e,i,o){var s=this,l=this.store.beginTransaction("readonly");this.findINode(l,e,function(m,E){ve(m,o)&&l.get(E.id,function(D,M){ve(D,o)&&(M===void 0?o(u.ENOENT(e)):o(null,new Mr(s,e,i,E.toStats(),M)))})})},t.prototype.unlink=function(e,i){this.removeEntry(e,!1,i)},t.prototype.rmdir=function(e,i){var o=this;this.readdir(e,function(s,l){s?i(s):l.length>0?i(u.ENOTEMPTY(e)):o.removeEntry(e,!0,i)})},t.prototype.mkdir=function(e,i,o){var s=this.store.beginTransaction("readwrite"),l=g.from("{}");this.commitNewFile(s,e,C.DIRECTORY,i,l,o)},t.prototype.readdir=function(e,i){var o=this,s=this.store.beginTransaction("readonly");this.findINode(s,e,function(l,m){ve(l,i)&&o.getDirListing(s,e,m,function(E,D){ve(E,i)&&i(null,Object.keys(D))})})},t.prototype._sync=function(e,i,o,s){var l=this,m=this.store.beginTransaction("readwrite");this._findINode(m,v.dirname(e),v.basename(e),function(E,D){$t(E,m,s)&&l.getINode(m,e,D,function(M,q){if($t(M,m,s)){var $=q.update(o);m.put(q.id,i,!0,function(nt){$t(nt,m,s)&&($?m.put(D,q.toBuffer(),!0,function(ut){$t(ut,m,s)&&m.commit(s)}):m.commit(s))})}})})},t.prototype.makeRootDirectory=function(e){var i=this.store.beginTransaction("readwrite");i.get(Be,function(o,s){if(o||s===void 0){var l=new Date().getTime(),m=new de(Nn(),4096,511|C.DIRECTORY,l,l,l);i.put(m.id,Dr(),!1,function(E){$t(E,i,e)&&i.put(Be,m.toBuffer(),!1,function(D){D?i.abort(function(){e(D)}):i.commit(e)})})}else i.commit(e)})},t.prototype._findINode=function(e,i,o,s){var l=this,m=function(E,D,M){E?s(E):M[o]?s(null,M[o]):s(u.ENOENT(v.resolve(i,o)))};i==="/"?o===""?s(null,Be):this.getINode(e,i,Be,function(E,D){ve(E,s)&&l.getDirListing(e,i,D,function(M,q){m(M,D,q)})}):this.findINodeAndDirListing(e,i,m)},t.prototype.findINode=function(e,i,o){var s=this;this._findINode(e,v.dirname(i),v.basename(i),function(l,m){ve(l,o)&&s.getINode(e,i,m,o)})},t.prototype.getINode=function(e,i,o,s){e.get(o,function(l,m){ve(l,s)&&(m===void 0?s(u.ENOENT(i)):s(null,de.fromBuffer(m)))})},t.prototype.getDirListing=function(e,i,o,s){o.isDirectory()?e.get(o.id,function(l,m){if(ve(l,s))try{s(null,JSON.parse(m.toString()))}catch{s(u.ENOENT(i))}}):s(u.ENOTDIR(i))},t.prototype.findINodeAndDirListing=function(e,i,o){var s=this;this.findINode(e,i,function(l,m){ve(l,o)&&s.getDirListing(e,i,m,function(E,D){ve(E,o)&&o(null,m,D)})})},t.prototype.addNewNode=function(e,i,o){var s=0,l,m=function(){++s===5?o(new u(a.EIO,"Unable to commit data to key-value store.")):(l=Nn(),e.put(l,i,!1,function(E,D){E||!D?m():o(null,l)}))};m()},t.prototype.commitNewFile=function(e,i,o,s,l,m){var E=this,D=v.dirname(i),M=v.basename(i),q=new Date().getTime();if(i==="/")return m(u.EEXIST(i));this.findINodeAndDirListing(e,D,function($,nt,ut){$t($,e,m)&&(ut[M]?e.abort(function(){m(u.EEXIST(i))}):E.addNewNode(e,l,function(yt,It){if($t(yt,e,m)){var Gt=new de(It,l.length,s|o,q,q,q);E.addNewNode(e,Gt.toBuffer(),function(ae,Te){$t(ae,e,m)&&(ut[M]=Te,e.put(nt.id,g.from(JSON.stringify(ut)),!0,function(Fe){$t(Fe,e,m)&&e.commit(function(ln){$t(ln,e,m)&&m(null,Gt)})}))})}}))})},t.prototype.removeEntry=function(e,i,o){var s=this,l=this.store.beginTransaction("readwrite"),m=v.dirname(e),E=v.basename(e);this.findINodeAndDirListing(l,m,function(D,M,q){if($t(D,l,o))if(!q[E])l.abort(function(){o(u.ENOENT(e))});else{var $=q[E];delete q[E],s.getINode(l,e,$,function(nt,ut){$t(nt,l,o)&&(!i&&ut.isDirectory()?l.abort(function(){o(u.EISDIR(e))}):i&&!ut.isDirectory()?l.abort(function(){o(u.ENOTDIR(e))}):l.del(ut.id,function(yt){$t(yt,l,o)&&l.del($,function(It){$t(It,l,o)&&l.put(M.id,g.from(JSON.stringify(q)),!0,function(Gt){$t(Gt,l,o)&&l.commit(o)})})}))})}})},t})(Q),Ge=function(){this.store={}};Ge.prototype.name=function(){return nn.Name},Ge.prototype.clear=function(){this.store={}},Ge.prototype.beginTransaction=function(t){return new De(this)},Ge.prototype.get=function(t){return this.store[t]},Ge.prototype.put=function(t,n,e){return!e&&this.store.hasOwnProperty(t)?!1:(this.store[t]=n,!0)},Ge.prototype.del=function(t){delete this.store[t]};var nn=(function(r){function t(){r.call(this,{store:new Ge})}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.Create=function(e,i){i(null,new t)},t})(Ar);nn.Name="InMemory",nn.Options={};var tr=Jt.indexedDB||Jt.mozIndexedDB||Jt.webkitIndexedDB||Jt.msIndexedDB;function hn(r,t){switch(t===void 0&&(t=r.toString()),r.name){case"NotFoundError":return new u(a.ENOENT,t);case"QuotaExceededError":return new u(a.ENOSPC,t);default:return new u(a.EIO,t)}}function pn(r,t,n){return t===void 0&&(t=a.EIO),n===void 0&&(n=null),function(e){e.preventDefault(),r(new u(t,n!==null?n:void 0))}}var er=function(t,n){this.tx=t,this.store=n};er.prototype.get=function(t,n){try{var e=this.store.get(t);e.onerror=pn(n),e.onsuccess=function(i){var o=i.target.result;o===void 0?n(null,o):n(null,_t(o))}}catch(i){n(hn(i))}};var is=(function(r){function t(n,e){r.call(this,n,e)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.put=function(e,i,o,s){try{var l=K(i),m;o?m=this.store.put(l,e):m=this.store.add(l,e),m.onerror=pn(s),m.onsuccess=function(E){s(null,!0)}}catch(E){s(hn(E))}},t.prototype.del=function(e,i){try{var o=this.store.delete(e);o.onerror=pn(i),o.onsuccess=function(s){i()}}catch(s){i(hn(s))}},t.prototype.commit=function(e){setTimeout(e,0)},t.prototype.abort=function(e){var i=null;try{this.tx.abort()}catch(o){i=hn(o)}finally{e(i)}},t})(er),Dn=function(t,n){var e=this;n===void 0&&(n="browserfs"),this.storeName=n;var i=tr.open(this.storeName,1);i.onupgradeneeded=function(o){var s=o.target.result;s.objectStoreNames.contains(e.storeName)&&s.deleteObjectStore(e.storeName),s.createObjectStore(e.storeName)},i.onsuccess=function(o){e.db=o.target.result,t(null,e)},i.onerror=pn(t,a.EACCES)};Dn.prototype.name=function(){return dn.Name+" - "+this.storeName},Dn.prototype.clear=function(t){try{var n=this.db.transaction(this.storeName,"readwrite"),e=n.objectStore(this.storeName),i=e.clear();i.onsuccess=function(o){setTimeout(t,0)},i.onerror=pn(t)}catch(o){t(hn(o))}},Dn.prototype.beginTransaction=function(t){t===void 0&&(t="readonly");var n=this.db.transaction(this.storeName,t),e=n.objectStore(this.storeName);if(t==="readwrite")return new is(n,e);if(t==="readonly")return new er(n,e);throw new u(a.EINVAL,"Invalid transaction type.")};var dn=(function(r){function t(n,e,i){var o=this;i===void 0&&(i=!0),r.call(this),this.store=new Dn(function(s){s?n(s):o.init(o.store,function(l){n(l,o)})},e),Lt(i,t.Name,{storeName:e})}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.Create=function(e,i){new t(i,e.storeName,!1)},t.isAvailable=function(){try{return typeof tr<"u"&&tr.open("__browserfs_test__")!==null}catch{return!1}},t})(rs);dn.Name="IndexedDB",dn.Options={storeName:{type:"string",optional:!0,description:"The name of this file system. You can have multiple IndexedDB file systems operating at once, but each must have a different name."}};var nr=!1,yn;try{Jt.localStorage.setItem("__test__","\uD800"),nr=Jt.localStorage.getItem("__test__")==="\uD800"}catch{nr=!1}yn=nr?"binary_string":"binary_string_ie",g.isEncoding(yn)||(yn="base64");var Xe=function(){};Xe.prototype.name=function(){return mn.Name},Xe.prototype.clear=function(){Jt.localStorage.clear()},Xe.prototype.beginTransaction=function(t){return new De(this)},Xe.prototype.get=function(t){try{var n=Jt.localStorage.getItem(t);if(n!==null)return g.from(n,yn)}catch{}},Xe.prototype.put=function(t,n,e){try{return!e&&Jt.localStorage.getItem(t)!==null?!1:(Jt.localStorage.setItem(t,n.toString(yn)),!0)}catch{throw new u(a.ENOSPC,"LocalStorage is full.")}},Xe.prototype.del=function(t){try{Jt.localStorage.removeItem(t)}catch(n){throw new u(a.EIO,"Unable to delete key "+t+": "+n)}};var mn=(function(r){function t(){r.call(this,{store:new Xe})}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.Create=function(e,i){i(null,new t)},t.isAvailable=function(){return typeof Jt.localStorage<"u"},t})(Ar);mn.Name="LocalStorage",mn.Options={};var rn=(function(r){function t(){r.call(this),this.mountList=[],this.mntMap={},this.rootFs=new nn}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.Create=function(e,i){var o=new t;Object.keys(e).forEach(function(s){o.mount(s,e[s])}),i(null,o)},t.isAvailable=function(){return!0},t.prototype.mount=function(e,i){if(e[0]!=="/"&&(e="/"+e),e=v.resolve(e),this.mntMap[e])throw new u(a.EINVAL,"Mount point "+e+" is already taken.");U(e,511,this.rootFs),this.mntMap[e]=i,this.mountList.push(e),this.mountList=this.mountList.sort(function(o,s){return s.length-o.length})},t.prototype.umount=function(e){var i=this;if(e[0]!=="/"&&(e="/"+e),e=v.resolve(e),!this.mntMap[e])throw new u(a.EINVAL,"Mount point "+e+" is already unmounted.");for(delete this.mntMap[e],this.mountList.splice(this.mountList.indexOf(e),1);e!=="/"&&i.rootFs.readdirSync(e).length===0;)i.rootFs.rmdirSync(e),e=v.dirname(e)},t.prototype._getFs=function(e){for(var i=this,o=this.mountList,s=o.length,l=0;l<s;l++){var m=o[l];if(m.length<=e.length&&e.indexOf(m)===0)return e=e.substr(m.length>1?m.length:0),e===""&&(e="/"),{fs:i.mntMap[m],path:e}}return{fs:this.rootFs,path:e}},t.prototype.getName=function(){return t.Name},t.prototype.diskSpace=function(e,i){i(0,0)},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.standardizeError=function(e,i,o){var s=e.message.indexOf(i);return s!==-1&&(e.message=e.message.substr(0,s)+o+e.message.substr(s+i.length),e.path=o),e},t.prototype.rename=function(e,i,o){var s=this,l=this._getFs(e),m=this._getFs(i);return l.fs===m.fs?l.fs.rename(l.path,m.path,function(E){E&&s.standardizeError(s.standardizeError(E,l.path,e),m.path,i),o(E)}):lt.readFile(e,function(E,D){if(E)return o(E);lt.writeFile(i,D,function(M){if(M)return o(M);lt.unlink(e,o)})})},t.prototype.renameSync=function(e,i){var o=this._getFs(e),s=this._getFs(i);if(o.fs===s.fs)try{return o.fs.renameSync(o.path,s.path)}catch(m){throw this.standardizeError(this.standardizeError(m,o.path,e),s.path,i),m}var l=lt.readFileSync(e);return lt.writeFileSync(i,l),lt.unlinkSync(e)},t.prototype.readdirSync=function(e){var i=this._getFs(e),o=null;if(i.fs!==this.rootFs)try{o=this.rootFs.readdirSync(e)}catch{}try{var s=i.fs.readdirSync(i.path);return o===null?s:s.concat(o.filter(function(l){return s.indexOf(l)===-1}))}catch(l){if(o===null)throw this.standardizeError(l,i.path,e);return o}},t.prototype.readdir=function(e,i){var o=this,s=this._getFs(e);s.fs.readdir(s.path,function(l,m){if(s.fs!==o.rootFs)try{var E=o.rootFs.readdirSync(e);m?m=m.concat(E.filter(function(D){return m.indexOf(D)===-1})):m=E}catch{if(l)return i(o.standardizeError(l,s.path,e))}else if(l)return i(o.standardizeError(l,s.path,e));i(null,m)})},t.prototype.rmdirSync=function(e){var i=this._getFs(e);if(this._containsMountPt(e))throw u.ENOTEMPTY(e);try{i.fs.rmdirSync(i.path)}catch(o){throw this.standardizeError(o,i.path,e)}},t.prototype.rmdir=function(e,i){var o=this,s=this._getFs(e);this._containsMountPt(e)?i(u.ENOTEMPTY(e)):s.fs.rmdir(s.path,function(l){i(l?o.standardizeError(l,s.path,e):null)})},t.prototype._containsMountPt=function(e){for(var i=this.mountList,o=i.length,s=0;s<o;s++){var l=i[s];if(l.length>=e.length&&l.slice(0,e.length)===e)return!0}return!1},t})(Q);rn.Name="MountableFileSystem",rn.Options={};function Pr(r,t,n){return t?function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];var o=e[0],s=this._getFs(o);e[0]=s.path;try{return s.fs[r].apply(s.fs,e)}catch(l){throw this.standardizeError(l,s.path,o),l}}:function(){for(var e=this,i=[],o=arguments.length;o--;)i[o]=arguments[o];var s=i[0],l=this._getFs(s);if(i[0]=l.path,typeof i[i.length-1]=="function"){var m=i[i.length-1];i[i.length-1]=function(){for(var E=[],D=arguments.length;D--;)E[D]=arguments[D];E.length>0&&E[0]instanceof u&&e.standardizeError(E[0],l.path,s),m.apply(null,E)}}return l.fs[r].apply(l.fs,i)}}for(var Br=[["exists","unlink","readlink"],["stat","mkdir","realpath","truncate"],["open","readFile","chmod","utimes"],["chown"],["writeFile","appendFile"]],rr=0;rr<Br.length;rr++)for(var os=Br[rr],ir=0,Ur=os;ir<Ur.length;ir+=1){var Cn=Ur[ir];rn.prototype[Cn]=Pr(Cn,!1),rn.prototype[Cn+"Sync"]=Pr(Cn+"Sync",!0)}var vn;if(typeof setImmediate<"u")vn=setImmediate;else{var Ee=Jt,on=[],zr="zero-timeout-message",ss=function(){if(typeof Ee.importScripts<"u"||!Ee.postMessage)return!1;var r=!0,t=Ee.onmessage;return Ee.onmessage=function(){r=!1},Ee.postMessage("","*"),Ee.onmessage=t,r};if(ss()){vn=function(r){on.push(r),Ee.postMessage(zr,"*")};var jr=function(r){if(r.source===self&&r.data===zr&&(r.stopPropagation?r.stopPropagation():r.cancelBubble=!0,on.length>0)){var t=on.shift();return t()}};Ee.addEventListener?Ee.addEventListener("message",jr,!0):Ee.attachEvent("onmessage",jr)}else if(Ee.MessageChannel){var Wr=new Ee.MessageChannel;Wr.port1.onmessage=function(r){if(on.length>0)return on.shift()()},vn=function(r){on.push(r),Wr.port2.postMessage("")}}else vn=function(r){return setTimeout(r,0)}}var or=vn,gn=function(){this._locked=!1,this._waiters=[]};gn.prototype.lock=function(t){if(this._locked){this._waiters.push(t);return}this._locked=!0,t()},gn.prototype.unlock=function(){if(!this._locked)throw new Error("unlock of a non-locked mutex");var t=this._waiters.shift();if(t){or(t);return}this._locked=!1},gn.prototype.tryLock=function(){return this._locked?!1:(this._locked=!0,!0)},gn.prototype.isLocked=function(){return this._locked};var wt=function(t){this._fs=t,this._mu=new gn};wt.prototype.getName=function(){return"LockedFS<"+this._fs.getName()+">"},wt.prototype.getFSUnlocked=function(){return this._fs},wt.prototype.initialize=function(t){this._fs.initialize(t)},wt.prototype.diskSpace=function(t,n){this._fs.diskSpace(t,n)},wt.prototype.isReadOnly=function(){return this._fs.isReadOnly()},wt.prototype.supportsLinks=function(){return this._fs.supportsLinks()},wt.prototype.supportsProps=function(){return this._fs.supportsProps()},wt.prototype.supportsSynch=function(){return this._fs.supportsSynch()},wt.prototype.rename=function(t,n,e){var i=this;this._mu.lock(function(){i._fs.rename(t,n,function(o){i._mu.unlock(),e(o)})})},wt.prototype.renameSync=function(t,n){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.renameSync(t,n)},wt.prototype.stat=function(t,n,e){var i=this;this._mu.lock(function(){i._fs.stat(t,n,function(o,s){i._mu.unlock(),e(o,s)})})},wt.prototype.statSync=function(t,n){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.statSync(t,n)},wt.prototype.open=function(t,n,e,i){var o=this;this._mu.lock(function(){o._fs.open(t,n,e,function(s,l){o._mu.unlock(),i(s,l)})})},wt.prototype.openSync=function(t,n,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.openSync(t,n,e)},wt.prototype.unlink=function(t,n){var e=this;this._mu.lock(function(){e._fs.unlink(t,function(i){e._mu.unlock(),n(i)})})},wt.prototype.unlinkSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.unlinkSync(t)},wt.prototype.rmdir=function(t,n){var e=this;this._mu.lock(function(){e._fs.rmdir(t,function(i){e._mu.unlock(),n(i)})})},wt.prototype.rmdirSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.rmdirSync(t)},wt.prototype.mkdir=function(t,n,e){var i=this;this._mu.lock(function(){i._fs.mkdir(t,n,function(o){i._mu.unlock(),e(o)})})},wt.prototype.mkdirSync=function(t,n){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.mkdirSync(t,n)},wt.prototype.readdir=function(t,n){var e=this;this._mu.lock(function(){e._fs.readdir(t,function(i,o){e._mu.unlock(),n(i,o)})})},wt.prototype.readdirSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readdirSync(t)},wt.prototype.exists=function(t,n){var e=this;this._mu.lock(function(){e._fs.exists(t,function(i){e._mu.unlock(),n(i)})})},wt.prototype.existsSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.existsSync(t)},wt.prototype.realpath=function(t,n,e){var i=this;this._mu.lock(function(){i._fs.realpath(t,n,function(o,s){i._mu.unlock(),e(o,s)})})},wt.prototype.realpathSync=function(t,n){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.realpathSync(t,n)},wt.prototype.truncate=function(t,n,e){var i=this;this._mu.lock(function(){i._fs.truncate(t,n,function(o){i._mu.unlock(),e(o)})})},wt.prototype.truncateSync=function(t,n){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.truncateSync(t,n)},wt.prototype.readFile=function(t,n,e,i){var o=this;this._mu.lock(function(){o._fs.readFile(t,n,e,function(s,l){o._mu.unlock(),i(s,l)})})},wt.prototype.readFileSync=function(t,n,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readFileSync(t,n,e)},wt.prototype.writeFile=function(t,n,e,i,o,s){var l=this;this._mu.lock(function(){l._fs.writeFile(t,n,e,i,o,function(m){l._mu.unlock(),s(m)})})},wt.prototype.writeFileSync=function(t,n,e,i,o){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.writeFileSync(t,n,e,i,o)},wt.prototype.appendFile=function(t,n,e,i,o,s){var l=this;this._mu.lock(function(){l._fs.appendFile(t,n,e,i,o,function(m){l._mu.unlock(),s(m)})})},wt.prototype.appendFileSync=function(t,n,e,i,o){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.appendFileSync(t,n,e,i,o)},wt.prototype.chmod=function(t,n,e,i){var o=this;this._mu.lock(function(){o._fs.chmod(t,n,e,function(s){o._mu.unlock(),i(s)})})},wt.prototype.chmodSync=function(t,n,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.chmodSync(t,n,e)},wt.prototype.chown=function(t,n,e,i,o){var s=this;this._mu.lock(function(){s._fs.chown(t,n,e,i,function(l){s._mu.unlock(),o(l)})})},wt.prototype.chownSync=function(t,n,e,i){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.chownSync(t,n,e,i)},wt.prototype.utimes=function(t,n,e,i){var o=this;this._mu.lock(function(){o._fs.utimes(t,n,e,function(s){o._mu.unlock(),i(s)})})},wt.prototype.utimesSync=function(t,n,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.utimesSync(t,n,e)},wt.prototype.link=function(t,n,e){var i=this;this._mu.lock(function(){i._fs.link(t,n,function(o){i._mu.unlock(),e(o)})})},wt.prototype.linkSync=function(t,n){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.linkSync(t,n)},wt.prototype.symlink=function(t,n,e,i){var o=this;this._mu.lock(function(){o._fs.symlink(t,n,e,function(s){o._mu.unlock(),i(s)})})},wt.prototype.symlinkSync=function(t,n,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.symlinkSync(t,n,e)},wt.prototype.readlink=function(t,n){var e=this;this._mu.lock(function(){e._fs.readlink(t,function(i,o){e._mu.unlock(),n(i,o)})})},wt.prototype.readlinkSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readlinkSync(t)};var Ce="/.deletedFiles.log";function Hr(r){return 146|r}function ge(r){return O.getFileFlag(r)}var qr=(function(r){function t(n,e,i,o,s){r.call(this,n,e,i,o,s)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var i=this;if(!this.isDirty()){e(null);return}this._fs._syncAsync(this,function(o){i.resetDirty(),e(o)})},t.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty())},t.prototype.close=function(e){this.sync(e)},t.prototype.closeSync=function(){this.syncSync()},t})(oe),Gr=(function(r){function t(n,e){if(r.call(this),this._isInitialized=!1,this._initializeCallbacks=[],this._deletedFiles={},this._deleteLog="",this._deleteLogUpdatePending=!1,this._deleteLogUpdateNeeded=!1,this._deleteLogError=null,this._writable=n,this._readable=e,this._writable.isReadOnly())throw new u(a.EINVAL,"Writable file system must be writable.")}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.isAvailable=function(){return!0},t.prototype.getOverlayedFileSystems=function(){return{readable:this._readable,writable:this._writable}},t.prototype._syncAsync=function(e,i){var o=this;this.createParentDirectoriesAsync(e.getPath(),function(s){if(s)return i(s);o._writable.writeFile(e.getPath(),e.getBuffer(),null,ge("w"),e.getStats().mode,i)})},t.prototype._syncSync=function(e){this.createParentDirectories(e.getPath()),this._writable.writeFileSync(e.getPath(),e.getBuffer(),null,ge("w"),e.getStats().mode)},t.prototype.getName=function(){return wn.Name},t.prototype.initialize=function(e){var i=this,o=this._initializeCallbacks,s=function(l){i._isInitialized=!l,i._initializeCallbacks=[],o.forEach((function(m){return m(l)}))};if(this._isInitialized)return e();o.push(e),o.length===1&&this._writable.readFile(Ce,"utf8",ge("r"),function(l,m){if(l){if(l.errno!==a.ENOENT)return s(l)}else i._deleteLog=m;i._reparseDeletionLog(),s()})},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSynch=function(){return this._readable.supportsSynch()&&this._writable.supportsSynch()},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return this._readable.supportsProps()&&this._writable.supportsProps()},t.prototype.getDeletionLog=function(){return this._deleteLog},t.prototype.restoreDeletionLog=function(e){this._deleteLog=e,this._reparseDeletionLog(),this.updateLog("")},t.prototype.rename=function(e,i,o){var s=this;if(!(!this.checkInitAsync(o)||this.checkPathAsync(e,o)||this.checkPathAsync(i,o))){if(e===Ce||i===Ce)return o(u.EPERM("Cannot rename deletion log."));if(e===i)return o();this.stat(e,!1,function(l,m){return l?o(l):s.stat(i,!1,function(E,D){var M=s;function q(nt){var ut=nt.shift();if(!ut)return o();var yt=v.resolve(e,ut),It=v.resolve(i,ut);M.rename(yt,It,function(Gt){if(Gt)return o(Gt);q(nt)})}var $=511;if(m.isDirectory()){if(E)return E.errno!==a.ENOENT?o(E):s._writable.exists(e,function(nt){if(nt)return s._writable.rename(e,i,o);s._writable.mkdir(i,$,function(ut){if(ut)return o(ut);s._readable.readdir(e,function(yt,It){if(yt)return o();q(It)})})});if($=D.mode,!D.isDirectory())return o(u.ENOTDIR(i));s.readdir(i,function(nt,ut){if(ut&&ut.length)return o(u.ENOTEMPTY(i));s._readable.readdir(e,function(yt,It){if(yt)return o();q(It)})})}if(D&&D.isDirectory())return o(u.EISDIR(i));s.readFile(e,null,ge("r"),function(nt,ut){return nt?o(nt):s.writeFile(i,ut,null,ge("w"),m.mode,function(yt){return yt?o(yt):s.unlink(e,o)})})})})}},t.prototype.renameSync=function(e,i){var o=this;if(this.checkInitialized(),this.checkPath(e),this.checkPath(i),e===Ce||i===Ce)throw u.EPERM("Cannot rename deletion log.");var s=this.statSync(e,!1);if(s.isDirectory()){if(e===i)return;var l=511;if(this.existsSync(i)){var m=this.statSync(i,!1);if(l=m.mode,m.isDirectory()){if(this.readdirSync(i).length>0)throw u.ENOTEMPTY(i)}else throw u.ENOTDIR(i)}this._writable.existsSync(e)?this._writable.renameSync(e,i):this._writable.existsSync(i)||this._writable.mkdirSync(i,l),this._readable.existsSync(e)&&this._readable.readdirSync(e).forEach(function(E){o.renameSync(v.resolve(e,E),v.resolve(i,E))})}else{if(this.existsSync(i)&&this.statSync(i,!1).isDirectory())throw u.EISDIR(i);this.writeFileSync(i,this.readFileSync(e,null,ge("r")),null,ge("w"),s.mode)}e!==i&&this.existsSync(e)&&this.unlinkSync(e)},t.prototype.stat=function(e,i,o){var s=this;this.checkInitAsync(o)&&this._writable.stat(e,i,function(l,m){l&&l.errno===a.ENOENT?(s._deletedFiles[e]&&o(u.ENOENT(e)),s._readable.stat(e,i,function(E,D){D&&(D=D.clone(),D.mode=Hr(D.mode)),o(E,D)})):o(l,m)})},t.prototype.statSync=function(e,i){this.checkInitialized();try{return this._writable.statSync(e,i)}catch{if(this._deletedFiles[e])throw u.ENOENT(e);var o=this._readable.statSync(e,i).clone();return o.mode=Hr(o.mode),o}},t.prototype.open=function(e,i,o,s){var l=this;!this.checkInitAsync(s)||this.checkPathAsync(e,s)||this.stat(e,!1,function(m,E){if(E)switch(i.pathExistsAction()){case x.TRUNCATE_FILE:return l.createParentDirectoriesAsync(e,function(D){if(D)return s(D);l._writable.open(e,i,o,s)});case x.NOP:return l._writable.exists(e,function(D){D?l._writable.open(e,i,o,s):(E=E.clone(),E.mode=o,l._readable.readFile(e,null,ge("r"),function(M,q){if(M)return s(M);E.size===-1&&(E.size=q.length);var $=new qr(l,e,i,E,q);s(null,$)}))});default:return s(u.EEXIST(e))}else return i.pathNotExistsAction()===x.CREATE_FILE?l.createParentDirectoriesAsync(e,function(D){return D?s(D):l._writable.open(e,i,o,s)}):s(u.ENOENT(e))})},t.prototype.openSync=function(e,i,o){if(this.checkInitialized(),this.checkPath(e),e===Ce)throw u.EPERM("Cannot open deletion log.");if(this.existsSync(e))switch(i.pathExistsAction()){case x.TRUNCATE_FILE:return this.createParentDirectories(e),this._writable.openSync(e,i,o);case x.NOP:if(this._writable.existsSync(e))return this._writable.openSync(e,i,o);var s=this._readable.readFileSync(e,null,ge("r")),l=this._readable.statSync(e,!1).clone();return l.mode=o,new qr(this,e,i,l,s);default:throw u.EEXIST(e)}else{if(i.pathNotExistsAction()===x.CREATE_FILE)return this.createParentDirectories(e),this._writable.openSync(e,i,o);throw u.ENOENT(e)}},t.prototype.unlink=function(e,i){var o=this;!this.checkInitAsync(i)||this.checkPathAsync(e,i)||this.exists(e,function(s){if(!s)return i(u.ENOENT(e));o._writable.exists(e,function(l){if(l)return o._writable.unlink(e,function(m){if(m)return i(m);o.exists(e,function(E){E&&o.deletePath(e),i(null)})});o.deletePath(e),i(null)})})},t.prototype.unlinkSync=function(e){if(this.checkInitialized(),this.checkPath(e),this.existsSync(e))this._writable.existsSync(e)&&this._writable.unlinkSync(e),this.existsSync(e)&&this.deletePath(e);else throw u.ENOENT(e)},t.prototype.rmdir=function(e,i){var o=this;if(this.checkInitAsync(i)){var s=function(){o.readdir(e,function(l,m){if(l)return i(l);if(m.length)return i(u.ENOTEMPTY(e));o.deletePath(e),i(null)})};this.exists(e,function(l){if(!l)return i(u.ENOENT(e));o._writable.exists(e,function(m){m?o._writable.rmdir(e,function(E){if(E)return i(E);o._readable.exists(e,function(D){D?s():i()})}):s()})})}},t.prototype.rmdirSync=function(e){if(this.checkInitialized(),this.existsSync(e)){if(this._writable.existsSync(e)&&this._writable.rmdirSync(e),this.existsSync(e)){if(this.readdirSync(e).length>0)throw u.ENOTEMPTY(e);this.deletePath(e)}}else throw u.ENOENT(e)},t.prototype.mkdir=function(e,i,o){var s=this;this.checkInitAsync(o)&&this.exists(e,function(l){if(l)return o(u.EEXIST(e));s.createParentDirectoriesAsync(e,function(m){if(m)return o(m);s._writable.mkdir(e,i,o)})})},t.prototype.mkdirSync=function(e,i){if(this.checkInitialized(),this.existsSync(e))throw u.EEXIST(e);this.createParentDirectories(e),this._writable.mkdirSync(e,i)},t.prototype.readdir=function(e,i){var o=this;this.checkInitAsync(i)&&this.stat(e,!1,function(s,l){if(s)return i(s);if(!l.isDirectory())return i(u.ENOTDIR(e));o._writable.readdir(e,function(m,E){if(m&&m.code!=="ENOENT")return i(m);(m||!E)&&(E=[]),o._readable.readdir(e,function(D,M){(D||!M)&&(M=[]);var q={},$=E.concat(M.filter(function(nt){return!o._deletedFiles[e+"/"+nt]})).filter(function(nt){var ut=!q[nt];return q[nt]=!0,ut});i(null,$)})})})},t.prototype.readdirSync=function(e){var i=this;this.checkInitialized();var o=this.statSync(e,!1);if(!o.isDirectory())throw u.ENOTDIR(e);var s=[];try{s=s.concat(this._writable.readdirSync(e))}catch{}try{s=s.concat(this._readable.readdirSync(e).filter(function(m){return!i._deletedFiles[e+"/"+m]}))}catch{}var l={};return s.filter(function(m){var E=!l[m];return l[m]=!0,E})},t.prototype.exists=function(e,i){var o=this;this.checkInitialized(),this._writable.exists(e,function(s){if(s)return i(!0);o._readable.exists(e,function(l){i(l&&o._deletedFiles[e]!==!0)})})},t.prototype.existsSync=function(e){return this.checkInitialized(),this._writable.existsSync(e)||this._readable.existsSync(e)&&this._deletedFiles[e]!==!0},t.prototype.chmod=function(e,i,o,s){var l=this;this.checkInitAsync(s)&&this.operateOnWritableAsync(e,function(m){if(m)return s(m);l._writable.chmod(e,i,o,s)})},t.prototype.chmodSync=function(e,i,o){var s=this;this.checkInitialized(),this.operateOnWritable(e,function(){s._writable.chmodSync(e,i,o)})},t.prototype.chown=function(e,i,o,s,l){var m=this;this.checkInitAsync(l)&&this.operateOnWritableAsync(e,function(E){if(E)return l(E);m._writable.chown(e,i,o,s,l)})},t.prototype.chownSync=function(e,i,o,s){var l=this;this.checkInitialized(),this.operateOnWritable(e,function(){l._writable.chownSync(e,i,o,s)})},t.prototype.utimes=function(e,i,o,s){var l=this;this.checkInitAsync(s)&&this.operateOnWritableAsync(e,function(m){if(m)return s(m);l._writable.utimes(e,i,o,s)})},t.prototype.utimesSync=function(e,i,o){var s=this;this.checkInitialized(),this.operateOnWritable(e,function(){s._writable.utimesSync(e,i,o)})},t.prototype.deletePath=function(e){this._deletedFiles[e]=!0,this.updateLog("d"+e+`
`)},t.prototype.updateLog=function(e){var i=this;this._deleteLog+=e,this._deleteLogUpdatePending?this._deleteLogUpdateNeeded=!0:(this._deleteLogUpdatePending=!0,this._writable.writeFile(Ce,this._deleteLog,"utf8",O.getFileFlag("w"),420,function(o){i._deleteLogUpdatePending=!1,o?i._deleteLogError=o:i._deleteLogUpdateNeeded&&(i._deleteLogUpdateNeeded=!1,i.updateLog(""))}))},t.prototype._reparseDeletionLog=function(){var e=this;this._deletedFiles={},this._deleteLog.split(`
`).forEach(function(i){e._deletedFiles[i.slice(1)]=i.slice(0,1)==="d"})},t.prototype.checkInitialized=function(){if(this._isInitialized){if(this._deleteLogError!==null){var e=this._deleteLogError;throw this._deleteLogError=null,e}}else throw new u(a.EPERM,"OverlayFS is not initialized. Please initialize OverlayFS using its initialize() method before using it.")},t.prototype.checkInitAsync=function(e){if(this._isInitialized){if(this._deleteLogError!==null){var i=this._deleteLogError;return this._deleteLogError=null,e(i),!1}}else return e(new u(a.EPERM,"OverlayFS is not initialized. Please initialize OverlayFS using its initialize() method before using it.")),!1;return!0},t.prototype.checkPath=function(e){if(e===Ce)throw u.EPERM(e)},t.prototype.checkPathAsync=function(e,i){return e===Ce?(i(u.EPERM(e)),!0):!1},t.prototype.createParentDirectoriesAsync=function(e,i){var o=v.dirname(e),s=[],l=this;this._writable.stat(o,!1,m);function m(D,M){D?(s.push(o),o=v.dirname(o),l._writable.stat(o,!1,m)):E()}function E(){if(!s.length)return i();var D=s.pop();l._readable.stat(D,!1,function(M,q){if(!q)return i();l._writable.mkdir(D,q.mode,function($){if($)return i($);E()})})}},t.prototype.createParentDirectories=function(e){for(var i=this,o=v.dirname(e),s=[];!this._writable.existsSync(o);)s.push(o),o=v.dirname(o);s=s.reverse(),s.forEach(function(l){i._writable.mkdirSync(l,i.statSync(l,!1).mode)})},t.prototype.operateOnWritable=function(e,i){if(this.existsSync(e))this._writable.existsSync(e)||this.copyToWritable(e),i();else throw u.ENOENT(e)},t.prototype.operateOnWritableAsync=function(e,i){var o=this;this.exists(e,function(s){if(!s)return i(u.ENOENT(e));o._writable.exists(e,function(l){if(l)i();else return o.copyToWritableAsync(e,i)})})},t.prototype.copyToWritable=function(e){var i=this.statSync(e,!1);i.isDirectory()?this._writable.mkdirSync(e,i.mode):this.writeFileSync(e,this._readable.readFileSync(e,null,ge("r")),null,ge("w"),this.statSync(e,!1).mode)},t.prototype.copyToWritableAsync=function(e,i){var o=this;this.stat(e,!1,function(s,l){if(s)return i(s);if(l.isDirectory())return o._writable.mkdir(e,l.mode,i);o._readable.readFile(e,null,ge("r"),function(m,E){if(m)return i(m);o.writeFile(e,E,null,ge("w"),l.mode,i)})})},t})(Q),wn=(function(r){function t(n,e,i){i===void 0&&(i=!0),r.call(this,new Gr(n,e)),Lt(i,t.Name,{readable:"readable file system",writable:"writable file system"})}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.Create=function(e,i){try{var o=new t(e.writable,e.readable,!1);o.initialize(function(s){i(s,o)},!1)}catch(s){i(s)}},t.isAvailable=function(){return Gr.isAvailable()},t.prototype.initialize=function(e,i){i===void 0&&(i=!0),i&&console.warn("[OverlayFS] OverlayFS.initialize() is deprecated and will be removed in the next major release. Please use 'OverlayFS.Create({readable: readable file system instance, writable: writable file system instance}, cb)' to create and initialize OverlayFS instances."),r.prototype.initialize.call(this,e)},t.prototype.getOverlayedFileSystems=function(){return r.prototype.getFSUnlocked.call(this).getOverlayedFileSystems()},t.prototype.unwrap=function(){return r.prototype.getFSUnlocked.call(this)},t})(wt);wn.Name="OverlayFS",wn.Options={writable:{type:"object",description:"The file system to write modified files to."},readable:{type:"object",description:"The file system that initially populates this file system."}};var qt;(function(r){r[r.CB=0]="CB",r[r.FD=1]="FD",r[r.API_ERROR=2]="API_ERROR",r[r.STATS=3]="STATS",r[r.PROBE=4]="PROBE",r[r.FILEFLAG=5]="FILEFLAG",r[r.BUFFER=6]="BUFFER",r[r.ERROR=7]="ERROR"})(qt||(qt={}));var sr=function(){this._callbacks={},this._nextId=0};sr.prototype.toRemoteArg=function(t){var n=this._nextId++;return this._callbacks[n]=t,{type:qt.CB,id:n}},sr.prototype.toLocalArg=function(t){var n=this._callbacks[t];return delete this._callbacks[t],n};var An=function(){this._fileDescriptors={},this._nextId=0};An.prototype.toRemoteArg=function(t,n,e,i){var o=this._nextId++,s,l;this._fileDescriptors[o]=t,t.stat(function(m,E){m?i(m):(l=Ye(E.toBuffer()),e.isReadable()?t.read(g.alloc(E.size),0,E.size,0,function(D,M,q){D?i(D):(s=Ye(q),i(null,{type:qt.FD,id:o,data:s,stat:l,path:n,flag:e.getFlagString()}))}):i(null,{type:qt.FD,id:o,data:new ArrayBuffer(0),stat:l,path:n,flag:e.getFlagString()}))})},An.prototype.applyFdAPIRequest=function(t,n){var e=this,i=t.args[0];this._applyFdChanges(i,function(o,s){o?n(o):s[t.method](function(l){t.method==="close"&&delete e._fileDescriptors[i.id],n(l)})})},An.prototype._applyFdChanges=function(t,n){var e=this._fileDescriptors[t.id],i=Ze(t.data),o=A.fromBuffer(Ze(t.stat)),s=O.getFileFlag(t.flag);s.isWriteable()?e.write(i,0,i.length,s.isAppendable()?e.getPos():0,function(l){function m(){e.stat(function(E,D){E?n(E):D.mode!==o.mode?e.chmod(o.mode,function(M){n(M,e)}):n(E,e)})}l?n(l):s.isAppendable()?m():e.truncate(i.length,function(){m()})}):n(null,e)};function Mn(r){return{type:qt.API_ERROR,errorData:Ye(r.writeToBuffer())}}function Xr(r){return u.fromBuffer(Ze(r.errorData))}function Yr(r){return{type:qt.ERROR,name:r.name,message:r.message,stack:r.stack}}function Zr(r){var t=Jt[r.name];typeof t!="function"&&(t=Error);var n=new t(r.message);return n.stack=r.stack,n}function Vr(r){return{type:qt.STATS,statsData:Ye(r.toBuffer())}}function Kr(r){return A.fromBuffer(Ze(r.statsData))}function Jr(r){return{type:qt.FILEFLAG,flagStr:r.getFlagString()}}function Qr(r){return O.getFileFlag(r.flagStr)}function Ye(r){return K(r)}function Ze(r){return _t(r)}function $r(r){return{type:qt.BUFFER,data:Ye(r)}}function ti(r){return Ze(r.data)}function as(r){return r&&typeof r=="object"&&r.hasOwnProperty("browserfsMessage")&&r.browserfsMessage}function cs(r){return r&&typeof r=="object"&&r.hasOwnProperty("browserfsMessage")&&r.browserfsMessage}var ei=(function(r){function t(n,e,i,o,s,l){r.call(this,n,e,i,o,l),this._remoteFdId=s}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.getRemoteFdId=function(){return this._remoteFdId},t.prototype.toRemoteArg=function(){return{type:qt.FD,id:this._remoteFdId,data:Ye(this.getBuffer()),stat:Ye(this.getStats().toBuffer()),path:this.getPath(),flag:this.getFlag().getFlagString()}},t.prototype.sync=function(e){this._syncClose("sync",e)},t.prototype.close=function(e){this._syncClose("close",e)},t.prototype._syncClose=function(e,i){var o=this;this.isDirty()?this._fs.syncClose(e,this,function(s){s||o.resetDirty(),i(s)}):i()},t})(oe),Pn=(function(r){function t(n,e){var i=this;e===void 0&&(e=!0),r.call(this),this._callbackConverter=new sr,this._isInitialized=!1,this._isReadOnly=!1,this._supportLinks=!1,this._supportProps=!1,this._worker=n,Lt(e,t.Name,{worker:"Web Worker instance"}),this._worker.addEventListener("message",function(o){var s=o.data;if(cs(s)){var l,m=s.args,E=new Array(m.length);for(l=0;l<E.length;l++)E[l]=i._argRemote2Local(m[l]);i._callbackConverter.toLocalArg(s.cbId).apply(null,E)}})}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.Create=function(e,i){var o=new t(e.worker,!1);o.initialize(function(){i(null,o)})},t.isAvailable=function(){return typeof importScripts<"u"||typeof Worker<"u"},t.attachRemoteListener=function(e){var i=new An;function o(l,m,E){typeof l==="object"?l instanceof A?E(null,Vr(l)):l instanceof u?E(null,Mn(l)):l instanceof vt?E(null,i.toRemoteArg(l,m[0],m[1],E)):l instanceof O?E(null,Jr(l)):l instanceof g?E(null,$r(l)):l instanceof Error?E(null,Yr(l)):E(null,l):E(null,l)}function s(l,m){if(!l)return l;switch(typeof l){case"object":if(typeof l.type=="number"){var E=l;switch(E.type){case qt.CB:var D=l.id;return function(){var M=arguments,q,$=new Array(arguments.length),nt,ut=arguments.length;function yt(It){ut>0&&(ut=-1,nt={browserfsMessage:!0,cbId:D,args:[Mn(It)]},e.postMessage(nt))}for(q=0;q<arguments.length;q++)(function(It,Gt){o(Gt,m,function(ae,Te){$[It]=Te,ae?yt(ae):--ut===0&&(nt={browserfsMessage:!0,cbId:D,args:$},e.postMessage(nt))})})(q,M[q]);arguments.length===0&&(nt={browserfsMessage:!0,cbId:D,args:$},e.postMessage(nt))};case qt.API_ERROR:return Xr(E);case qt.STATS:return Kr(E);case qt.FILEFLAG:return Qr(E);case qt.BUFFER:return ti(E);case qt.ERROR:return Zr(E);default:return l}}else return l;default:return l}}e.addEventListener("message",function(l){var m=l.data;if(as(m)){var E=m.args,D=new Array(E.length);switch(m.method){case"close":case"sync":(function(){var $=E[1];i.applyFdAPIRequest(m,function(nt){var ut={browserfsMessage:!0,cbId:$.id,args:nt?[Mn(nt)]:[]};e.postMessage(ut)})})();break;case"probe":(function(){var $=lt.getRootFS(),nt=E[1],ut={type:qt.PROBE,isReadOnly:$.isReadOnly(),supportsLinks:$.supportsLinks(),supportsProps:$.supportsProps()},yt={browserfsMessage:!0,cbId:nt.id,args:[ut]};e.postMessage(yt)})();break;default:for(var M=0;M<E.length;M++)D[M]=s(E[M],D);var q=lt.getRootFS();q[m.method].apply(q,D);break}}})},t.prototype.getName=function(){return t.Name},t.prototype.initialize=function(e){var i=this;if(this._isInitialized)e();else{var o={browserfsMessage:!0,method:"probe",args:[this._argLocal2Remote(Mt()),this._callbackConverter.toRemoteArg(function(s){i._isInitialized=!0,i._isReadOnly=s.isReadOnly,i._supportLinks=s.supportsLinks,i._supportProps=s.supportsProps,e()})]};this._worker.postMessage(o)}},t.prototype.isReadOnly=function(){return this._isReadOnly},t.prototype.supportsSynch=function(){return!1},t.prototype.supportsLinks=function(){return this._supportLinks},t.prototype.supportsProps=function(){return this._supportProps},t.prototype.rename=function(e,i,o){this._rpc("rename",arguments)},t.prototype.stat=function(e,i,o){this._rpc("stat",arguments)},t.prototype.open=function(e,i,o,s){this._rpc("open",arguments)},t.prototype.unlink=function(e,i){this._rpc("unlink",arguments)},t.prototype.rmdir=function(e,i){this._rpc("rmdir",arguments)},t.prototype.mkdir=function(e,i,o){this._rpc("mkdir",arguments)},t.prototype.readdir=function(e,i){this._rpc("readdir",arguments)},t.prototype.exists=function(e,i){this._rpc("exists",arguments)},t.prototype.realpath=function(e,i,o){this._rpc("realpath",arguments)},t.prototype.truncate=function(e,i,o){this._rpc("truncate",arguments)},t.prototype.readFile=function(e,i,o,s){this._rpc("readFile",arguments)},t.prototype.writeFile=function(e,i,o,s,l,m){this._rpc("writeFile",arguments)},t.prototype.appendFile=function(e,i,o,s,l,m){this._rpc("appendFile",arguments)},t.prototype.chmod=function(e,i,o,s){this._rpc("chmod",arguments)},t.prototype.chown=function(e,i,o,s,l){this._rpc("chown",arguments)},t.prototype.utimes=function(e,i,o,s){this._rpc("utimes",arguments)},t.prototype.link=function(e,i,o){this._rpc("link",arguments)},t.prototype.symlink=function(e,i,o,s){this._rpc("symlink",arguments)},t.prototype.readlink=function(e,i){this._rpc("readlink",arguments)},t.prototype.syncClose=function(e,i,o){this._worker.postMessage({browserfsMessage:!0,method:e,args:[i.toRemoteArg(),this._callbackConverter.toRemoteArg(o)]})},t.prototype._argRemote2Local=function(e){if(!e)return e;switch(typeof e){case"object":if(typeof e.type=="number"){var i=e;switch(i.type){case qt.API_ERROR:return Xr(i);case qt.FD:var o=i;return new ei(this,o.path,O.getFileFlag(o.flag),A.fromBuffer(Ze(o.stat)),o.id,Ze(o.data));case qt.STATS:return Kr(i);case qt.FILEFLAG:return Qr(i);case qt.BUFFER:return ti(i);case qt.ERROR:return Zr(i);default:return e}}else return e;default:return e}},t.prototype._rpc=function(e,i){for(var o=this,s=new Array(i.length),l=0;l<i.length;l++)s[l]=o._argLocal2Remote(i[l]);var m={browserfsMessage:!0,method:e,args:s};this._worker.postMessage(m)},t.prototype._argLocal2Remote=function(e){if(!e)return e;switch(typeof e){case"object":return e instanceof A?Vr(e):e instanceof u?Mn(e):e instanceof ei?e.toRemoteArg():e instanceof O?Jr(e):e instanceof g?$r(e):e instanceof Error?Yr(e):"Unknown argument";case"function":return this._callbackConverter.toRemoteArg(e);default:return e}},t})(Q);Pn.Name="WorkerFS",Pn.Options={worker:{type:"object",description:"The target worker that you want to connect to, or the current worker if in a worker context.",validator:function(r,t){r.postMessage?t():t(new u(a.EINVAL,"option must be a Web Worker instance."))}}};function ls(r,t,n){var e=new XMLHttpRequest;e.open("GET",r,!0);var i=!0;switch(t){case"buffer":e.responseType="arraybuffer";break;case"json":try{e.responseType="json",i=e.responseType==="json"}catch{i=!1}break;default:return n(new u(a.EINVAL,"Invalid download type: "+t))}e.onreadystatechange=function(o){if(e.readyState===4)if(e.status===200)switch(t){case"buffer":return n(null,e.response?g.from(e.response):Mt());case"json":return i?n(null,e.response):n(null,JSON.parse(e.responseText))}else return n(new u(e.status,"XHR error."))},e.send()}function us(r,t){var n=new XMLHttpRequest;n.open("GET",r,!1);var e=null,i=null;if(n.overrideMimeType("text/plain; charset=x-user-defined"),n.onreadystatechange=function(o){if(n.readyState===4)if(n.status===200)switch(t){case"buffer":var s=n.responseText;e=g.alloc(s.length);for(var l=0;l<s.length;l++)e[l]=s.charCodeAt(l);return;case"json":e=JSON.parse(n.responseText);return}else{i=new u(n.status,"XHR error.");return}},n.send(),i)throw i;return e}function fs(r,t){var n=new XMLHttpRequest;switch(n.open("GET",r,!1),t){case"buffer":n.responseType="arraybuffer";break;case"json":break;default:throw new u(a.EINVAL,"Invalid download type: "+t)}var e,i;if(n.onreadystatechange=function(o){if(n.readyState===4)if(n.status===200)switch(t){case"buffer":e=g.from(n.response);break;case"json":e=JSON.parse(n.response);break}else i=new u(n.status,"XHR error.")},n.send(),i)throw i;return e}function ni(r,t,n){var e=new XMLHttpRequest;e.open("HEAD",t,r),e.onreadystatechange=function(i){if(e.readyState===4)if(e.status===200)try{return n(null,parseInt(e.getResponseHeader("Content-Length")||"-1",10))}catch{return n(new u(a.EIO,"XHR HEAD error: Could not read content-length."))}else return n(new u(e.status,"XHR HEAD error."))},e.send()}var ri=ls,hs=Et&&typeof Blob<"u"?fs:us;function ps(r){var t=-1;return ni(!1,r,function(n,e){if(n)throw n;t=e}),t}function ds(r,t){ni(!0,r,t)}var _e=function(){this._index={},this.addPath("/",new ye)};_e.fromListing=function(t){var n=new _e,e=new ye;n._index["/"]=e;for(var i=[["",t,e]];i.length>0;){var o=void 0,s=i.pop(),l=s[0],m=s[1],E=s[2];for(var D in m)if(m.hasOwnProperty(D)){var M=m[D],q=l+"/"+D;M?(n._index[q]=o=new ye,i.push([q,M,o])):o=new sn(new A(C.FILE,-1,365)),E&&(E._ls[D]=o)}}return n},_e.prototype.fileIterator=function(t){var n=this;for(var e in n._index)if(n._index.hasOwnProperty(e))for(var i=n._index[e],o=i.getListing(),s=0,l=o;s<l.length;s+=1){var m=l[s],E=i.getItem(m);Ae(E)&&t(E.getData())}},_e.prototype.addPath=function(t,n){if(!n)throw new Error("Inode must be specified");if(t[0]!=="/")throw new Error("Path must be absolute, got: "+t);if(this._index.hasOwnProperty(t))return this._index[t]===n;var e=this._split_path(t),i=e[0],o=e[1],s=this._index[i];return s===void 0&&t!=="/"&&(s=new ye,!this.addPath(i,s))||t!=="/"&&!s.addItem(o,n)?!1:(Ue(n)&&(this._index[t]=n),!0)},_e.prototype.addPathFast=function(t,n){var e=t.lastIndexOf("/"),i=e===0?"/":t.substring(0,e),o=t.substring(e+1),s=this._index[i];return s===void 0&&(s=new ye,this.addPathFast(i,s)),s.addItem(o,n)?(n.isDir()&&(this._index[t]=n),!0):!1},_e.prototype.removePath=function(t){var n=this,e=this._split_path(t),i=e[0],o=e[1],s=this._index[i];if(s===void 0)return null;var l=s.remItem(o);if(l===null)return null;if(Ue(l)){for(var m=l.getListing(),E=0,D=m;E<D.length;E+=1){var M=D[E];n.removePath(t+"/"+M)}t!=="/"&&delete this._index[t]}return l},_e.prototype.ls=function(t){var n=this._index[t];return n===void 0?null:n.getListing()},_e.prototype.getInode=function(t){var n=this._split_path(t),e=n[0],i=n[1],o=this._index[e];return o===void 0?null:e===t?o:o.getItem(i)},_e.prototype._split_path=function(t){var n=v.dirname(t),e=t.substr(n.length+(n==="/"?0:1));return[n,e]};var sn=function(t){this.data=t};sn.prototype.isFile=function(){return!0},sn.prototype.isDir=function(){return!1},sn.prototype.getData=function(){return this.data},sn.prototype.setData=function(t){this.data=t};var ye=function(t){t===void 0&&(t=null),this.data=t,this._ls={}};ye.prototype.isFile=function(){return!1},ye.prototype.isDir=function(){return!0},ye.prototype.getData=function(){return this.data},ye.prototype.getStats=function(){return new A(C.DIRECTORY,4096,365)},ye.prototype.getListing=function(){return Object.keys(this._ls)},ye.prototype.getItem=function(t){var n=this._ls[t];return n||null},ye.prototype.addItem=function(t,n){return t in this._ls?!1:(this._ls[t]=n,!0)},ye.prototype.remItem=function(t){var n=this._ls[t];return n===void 0?null:(delete this._ls[t],n)};function Ae(r){return!!r&&r.isFile()}function Ue(r){return!!r&&r.isDir()}function ys(r,t,n){try{n(null,r.toString(t))}catch(e){n(e)}}var Bn=(function(r){function t(n,e,i){e===void 0&&(e=""),i===void 0&&(i=!0),r.call(this),n||(n="index.json"),e.length>0&&e.charAt(e.length-1)!=="/"&&(e=e+"/"),this.prefixUrl=e;var o=null;if(typeof n=="string"){if(o=this._requestFileSync(n,"json"),!o)throw new Error("Unable to find listing at URL: ${listingUrlOrObj}")}else o=n;Lt(i,t.Name,{index:typeof n=="string"?n:"file index as an object",baseUrl:e}),this._index=_e.fromListing(o)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.Create=function(e,i){e.index===void 0&&(e.index="index.json"),typeof e.index=="string"?t.FromURL(e.index,i,e.baseUrl,!1):i(null,new t(e.index,e.baseUrl,!1))},t.isAvailable=function(){return typeof XMLHttpRequest<"u"&&XMLHttpRequest!==null},t.FromURL=function(e,i,o,s){o===void 0&&(o=e.slice(0,e.lastIndexOf("/")+1)),s===void 0&&(s=!0),s&&console.warn(`[XmlHttpRequest] XmlHttpRequest.FromURL() is deprecated and will be removed in the next major release. Please use 'XmlHttpRequest.Create({ index: "`+e+'", baseUrl: "'+o+`" }, cb)' instead.`),ri(e,"json",function(l,m){l?i(l):i(null,new t(m,o,!1))})},t.prototype.empty=function(){this._index.fileIterator(function(e){e.fileData=null})},t.prototype.getName=function(){return t.Name},t.prototype.diskSpace=function(e,i){i(0,0)},t.prototype.isReadOnly=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.preloadFile=function(e,i){var o=this._index.getInode(e);if(Ae(o)){if(o===null)throw u.ENOENT(e);var s=o.getData();s.size=i.length,s.fileData=i}else throw u.EISDIR(e)},t.prototype.stat=function(e,i,o){var s=this._index.getInode(e);if(s===null)return o(u.ENOENT(e));var l;Ae(s)?(l=s.getData(),l.size<0?this._requestFileSizeAsync(e,function(m,E){if(m)return o(m);l.size=E,o(null,l.clone())}):o(null,l.clone())):Ue(s)?(l=s.getStats(),o(null,l)):o(u.FileError(a.EINVAL,e))},t.prototype.statSync=function(e,i){var o=this._index.getInode(e);if(o===null)throw u.ENOENT(e);var s;if(Ae(o))s=o.getData(),s.size<0&&(s.size=this._requestFileSizeSync(e));else if(Ue(o))s=o.getStats();else throw u.FileError(a.EINVAL,e);return s},t.prototype.open=function(e,i,o,s){if(i.isWriteable())return s(new u(a.EPERM,e));var l=this,m=this._index.getInode(e);if(m===null)return s(u.ENOENT(e));if(Ae(m)){var E=m.getData();switch(i.pathExistsAction()){case x.THROW_EXCEPTION:case x.TRUNCATE_FILE:return s(u.EEXIST(e));case x.NOP:if(E.fileData)return s(null,new le(l,e,i,E.clone(),E.fileData));this._requestFileAsync(e,"buffer",function(D,M){return D?s(D):(E.size=M.length,E.fileData=M,s(null,new le(l,e,i,E.clone(),M)))});break;default:return s(new u(a.EINVAL,"Invalid FileMode object."))}}else return s(u.EISDIR(e))},t.prototype.openSync=function(e,i,o){if(i.isWriteable())throw new u(a.EPERM,e);var s=this._index.getInode(e);if(s===null)throw u.ENOENT(e);if(Ae(s)){var l=s.getData();switch(i.pathExistsAction()){case x.THROW_EXCEPTION:case x.TRUNCATE_FILE:throw u.EEXIST(e);case x.NOP:if(l.fileData)return new le(this,e,i,l.clone(),l.fileData);var m=this._requestFileSync(e,"buffer");return l.size=m.length,l.fileData=m,new le(this,e,i,l.clone(),m);default:throw new u(a.EINVAL,"Invalid FileMode object.")}}else throw u.EISDIR(e)},t.prototype.readdir=function(e,i){try{i(null,this.readdirSync(e))}catch(o){i(o)}},t.prototype.readdirSync=function(e){var i=this._index.getInode(e);if(i===null)throw u.ENOENT(e);if(Ue(i))return i.getListing();throw u.ENOTDIR(e)},t.prototype.readFile=function(e,i,o,s){var l=s;this.open(e,o,420,function(m,E){if(m)return s(m);s=function(q,$){E.close(function(nt){return q||(q=nt),l(q,$)})};var D=E,M=D.getBuffer();i===null?s(m,Ft(M)):ys(M,i,s)})},t.prototype.readFileSync=function(e,i,o){var s=this.openSync(e,o,420);try{var l=s,m=l.getBuffer();return i===null?Ft(m):m.toString(i)}finally{s.closeSync()}},t.prototype.getXhrPath=function(e){return e.charAt(0)==="/"&&(e=e.slice(1)),this.prefixUrl+e},t.prototype._requestFileAsync=function(e,i,o){ri(this.getXhrPath(e),i,o)},t.prototype._requestFileSync=function(e,i){return hs(this.getXhrPath(e),i)},t.prototype._requestFileSizeAsync=function(e,i){ds(this.getXhrPath(e),i)},t.prototype._requestFileSizeSync=function(e){return ps(this.getXhrPath(e))},t})(Q);Bn.Name="XmlHttpRequest",Bn.Options={index:{type:["string","object"],optional:!0,description:"URL to a file index as a JSON file or the file index object itself, generated with the make_xhrfs_index script. Defaults to `index.json`."},baseUrl:{type:"string",optional:!0,description:"Used as the URL prefix for fetched files. Default: Fetch files relative to the index."}};var Ve=function(){};Ve.str2byte=function(t,n){for(var e=t.length>n.length?n.length:t.length,i=0;i<e;i++){var o=t.charCodeAt(i);if(o>127){var s=Ve.extendedChars.indexOf(t.charAt(i));s>-1&&(o=s+128)}n[o]=i}return e},Ve.byte2str=function(t){for(var n=new Array(t.length),e=0;e<t.length;e++){var i=t[e];i>127?n[e]=Ve.extendedChars[i-128]:n[e]=String.fromCharCode(i)}return n.join("")},Ve.byteLength=function(t){return t.length},Ve.extendedChars=["Ç","ü","é","â","ä","à","å","ç","ê","ë","è","ï","î","ì","Ä","Å","É","æ","Æ","ô","ö","ò","û","ù","ÿ","Ö","Ü","ø","£","Ø","×","ƒ","á","í","ó","ú","ñ","Ñ","ª","º","¿","®","¬","½","¼","¡","«","»","_","_","_","¦","¦","Á","Â","À","©","¦","¦","+","+","¢","¥","+","+","-","-","+","-","+","ã","Ã","+","+","-","-","¦","-","+","¤","ð","Ð","Ê","Ë","È","i","Í","Î","Ï","+","+","_","_","¦","Ì","_","Ó","ß","Ô","Ò","õ","Õ","µ","þ","Þ","Ú","Û","Ù","ý","Ý","¯","´","­","±","_","¾","¶","§","÷","¸","°","¨","·","¹","³","²","_"," "];var ms=y(31).inflateRaw,ii={},oi;(function(r){r[r.MSDOS=0]="MSDOS",r[r.AMIGA=1]="AMIGA",r[r.OPENVMS=2]="OPENVMS",r[r.UNIX=3]="UNIX",r[r.VM_CMS=4]="VM_CMS",r[r.ATARI_ST=5]="ATARI_ST",r[r.OS2_HPFS=6]="OS2_HPFS",r[r.MAC=7]="MAC",r[r.Z_SYSTEM=8]="Z_SYSTEM",r[r.CP_M=9]="CP_M",r[r.NTFS=10]="NTFS",r[r.MVS=11]="MVS",r[r.VSE=12]="VSE",r[r.ACORN_RISC=13]="ACORN_RISC",r[r.VFAT=14]="VFAT",r[r.ALT_MVS=15]="ALT_MVS",r[r.BEOS=16]="BEOS",r[r.TANDEM=17]="TANDEM",r[r.OS_400=18]="OS_400",r[r.OSX=19]="OSX"})(oi||(oi={}));var an;(function(r){r[r.STORED=0]="STORED",r[r.SHRUNK=1]="SHRUNK",r[r.REDUCED_1=2]="REDUCED_1",r[r.REDUCED_2=3]="REDUCED_2",r[r.REDUCED_3=4]="REDUCED_3",r[r.REDUCED_4=5]="REDUCED_4",r[r.IMPLODE=6]="IMPLODE",r[r.DEFLATE=8]="DEFLATE",r[r.DEFLATE64=9]="DEFLATE64",r[r.TERSE_OLD=10]="TERSE_OLD",r[r.BZIP2=12]="BZIP2",r[r.LZMA=14]="LZMA",r[r.TERSE_NEW=18]="TERSE_NEW",r[r.LZ77=19]="LZ77",r[r.WAVPACK=97]="WAVPACK",r[r.PPMD=98]="PPMD"})(an||(an={}));function si(r,t){var n=t&31,e=(t>>5&15)-1,i=(t>>9)+1980,o=r&31,s=r>>5&63,l=r>>11;return new Date(i,e,n,l,s,o)}function Un(r,t,n,e){return e===0?"":t?r.toString("utf8",n,n+e):Ve.byte2str(r.slice(n,n+e))}var we=function(t){if(this.data=t,t.readUInt32LE(0)!==67324752)throw new u(a.EINVAL,"Invalid Zip file: Local file header has invalid signature: "+this.data.readUInt32LE(0))};we.prototype.versionNeeded=function(){return this.data.readUInt16LE(4)},we.prototype.flags=function(){return this.data.readUInt16LE(6)},we.prototype.compressionMethod=function(){return this.data.readUInt16LE(8)},we.prototype.lastModFileTime=function(){return si(this.data.readUInt16LE(10),this.data.readUInt16LE(12))},we.prototype.rawLastModFileTime=function(){return this.data.readUInt32LE(10)},we.prototype.crc32=function(){return this.data.readUInt32LE(14)},we.prototype.fileNameLength=function(){return this.data.readUInt16LE(26)},we.prototype.extraFieldLength=function(){return this.data.readUInt16LE(28)},we.prototype.fileName=function(){return Un(this.data,this.useUTF8(),30,this.fileNameLength())},we.prototype.extraField=function(){var t=30+this.fileNameLength();return this.data.slice(t,t+this.extraFieldLength())},we.prototype.totalSize=function(){return 30+this.fileNameLength()+this.extraFieldLength()},we.prototype.useUTF8=function(){return(this.flags()&2048)===2048};var Sn=function(t,n,e){this.header=t,this.record=n,this.data=e};Sn.prototype.decompress=function(){var t=this.header.compressionMethod(),n=ii[t];if(n)return n(this.data,this.record.compressedSize(),this.record.uncompressedSize(),this.record.flag());var e=an[t];throw e||(e="Unknown: "+t),new u(a.EINVAL,"Invalid compression method on file '"+this.header.fileName()+"': "+e)},Sn.prototype.getHeader=function(){return this.header},Sn.prototype.getRecord=function(){return this.record},Sn.prototype.getRawData=function(){return this.data};var Nt=function(t,n){if(this.zipData=t,this.data=n,this.data.readUInt32LE(0)!==33639248)throw new u(a.EINVAL,"Invalid Zip file: Central directory record has invalid signature: "+this.data.readUInt32LE(0));this._filename=this.produceFilename()};Nt.prototype.versionMadeBy=function(){return this.data.readUInt16LE(4)},Nt.prototype.versionNeeded=function(){return this.data.readUInt16LE(6)},Nt.prototype.flag=function(){return this.data.readUInt16LE(8)},Nt.prototype.compressionMethod=function(){return this.data.readUInt16LE(10)},Nt.prototype.lastModFileTime=function(){return si(this.data.readUInt16LE(12),this.data.readUInt16LE(14))},Nt.prototype.rawLastModFileTime=function(){return this.data.readUInt32LE(12)},Nt.prototype.crc32=function(){return this.data.readUInt32LE(16)},Nt.prototype.compressedSize=function(){return this.data.readUInt32LE(20)},Nt.prototype.uncompressedSize=function(){return this.data.readUInt32LE(24)},Nt.prototype.fileNameLength=function(){return this.data.readUInt16LE(28)},Nt.prototype.extraFieldLength=function(){return this.data.readUInt16LE(30)},Nt.prototype.fileCommentLength=function(){return this.data.readUInt16LE(32)},Nt.prototype.diskNumberStart=function(){return this.data.readUInt16LE(34)},Nt.prototype.internalAttributes=function(){return this.data.readUInt16LE(36)},Nt.prototype.externalAttributes=function(){return this.data.readUInt32LE(38)},Nt.prototype.headerRelativeOffset=function(){return this.data.readUInt32LE(42)},Nt.prototype.produceFilename=function(){var t=Un(this.data,this.useUTF8(),46,this.fileNameLength());return t.replace(/\\/g,"/")},Nt.prototype.fileName=function(){return this._filename},Nt.prototype.rawFileName=function(){return this.data.slice(46,46+this.fileNameLength())},Nt.prototype.extraField=function(){var t=44+this.fileNameLength();return this.data.slice(t,t+this.extraFieldLength())},Nt.prototype.fileComment=function(){var t=46+this.fileNameLength()+this.extraFieldLength();return Un(this.data,this.useUTF8(),t,this.fileCommentLength())},Nt.prototype.rawFileComment=function(){var t=46+this.fileNameLength()+this.extraFieldLength();return this.data.slice(t,t+this.fileCommentLength())},Nt.prototype.totalSize=function(){return 46+this.fileNameLength()+this.extraFieldLength()+this.fileCommentLength()},Nt.prototype.isDirectory=function(){var t=this.fileName();return!!(this.externalAttributes()&16)||t.charAt(t.length-1)==="/"},Nt.prototype.isFile=function(){return!this.isDirectory()},Nt.prototype.useUTF8=function(){return(this.flag()&2048)===2048},Nt.prototype.isEncrypted=function(){return(this.flag()&1)===1},Nt.prototype.getFileData=function(){var t=this.headerRelativeOffset(),n=new we(this.zipData.slice(t));return new Sn(n,this,this.zipData.slice(t+n.totalSize()))},Nt.prototype.getData=function(){return this.getFileData().decompress()},Nt.prototype.getRawData=function(){return this.getFileData().getRawData()},Nt.prototype.getStats=function(){return new A(C.FILE,this.uncompressedSize(),365,new Date,this.lastModFileTime())};var Le=function(t){if(this.data=t,this.data.readUInt32LE(0)!==101010256)throw new u(a.EINVAL,"Invalid Zip file: End of central directory record has invalid signature: "+this.data.readUInt32LE(0))};Le.prototype.diskNumber=function(){return this.data.readUInt16LE(4)},Le.prototype.cdDiskNumber=function(){return this.data.readUInt16LE(6)},Le.prototype.cdDiskEntryCount=function(){return this.data.readUInt16LE(8)},Le.prototype.cdTotalEntryCount=function(){return this.data.readUInt16LE(10)},Le.prototype.cdSize=function(){return this.data.readUInt32LE(12)},Le.prototype.cdOffset=function(){return this.data.readUInt32LE(16)},Le.prototype.cdZipCommentLength=function(){return this.data.readUInt16LE(20)},Le.prototype.cdZipComment=function(){return Un(this.data,!0,22,this.cdZipCommentLength())},Le.prototype.rawCdZipComment=function(){return this.data.slice(22,22+this.cdZipCommentLength())};var ai=function(t,n,e,i){this.index=t,this.directoryEntries=n,this.eocd=e,this.data=i},Ke=(function(r){function t(n,e,i){e===void 0&&(e=""),i===void 0&&(i=!0),r.call(this),this.name=e,this._index=new _e,this._directoryEntries=[],this._eocd=null,Lt(i,t.Name,{zipData:"zip data as a Buffer",name:e}),n instanceof ai?(this._index=n.index,this._directoryEntries=n.directoryEntries,this._eocd=n.eocd,this.data=n.data):(this.data=n,this.populateIndex())}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.Create=function(e,i){try{t.computeIndex(e.zipData,function(o){var s=new t(o,e.name,!1);i(null,s)},!1)}catch(o){i(o)}},t.isAvailable=function(){return!0},t.RegisterDecompressionMethod=function(e,i){ii[e]=i},t.computeIndex=function(e,i,o){o===void 0&&(o=!0),o&&console.warn("[ZipFS] ZipFS.computeIndex is now deprecated, and will be removed in the next major release. Please update your code to use 'ZipFS.Create({ zipData: zip file as a Buffer}, cb)' instead.");var s=new _e,l=t.getEOCD(e);if(l.diskNumber()!==l.cdDiskNumber())throw new u(a.EINVAL,"ZipFS does not support spanned zip files.");var m=l.cdOffset();if(m===4294967295)throw new u(a.EINVAL,"ZipFS does not support Zip64.");var E=m+l.cdSize();t.computeIndexResponsive(e,s,m,E,i,[],l)},t.getEOCD=function(e){for(var i=22,o=Math.min(i+65535,e.length-1),s=i;s<o;s++)if(e.readUInt32LE(e.length-s)===101010256)return new Le(e.slice(e.length-s));throw new u(a.EINVAL,"Invalid ZIP file: Could not locate End of Central Directory signature.")},t.addToIndex=function(e,i){var o=e.fileName();if(o.charAt(0)==="/")throw new Error("WHY IS THIS ABSOLUTE");o.charAt(o.length-1)==="/"&&(o=o.substr(0,o.length-1)),e.isDirectory()?i.addPathFast("/"+o,new ye(e)):i.addPathFast("/"+o,new sn(e))},t.computeIndexResponsive=function(e,i,o,s,l,m,E){if(o<s){for(var D=0;D++<200&&o<s;){var M=new Nt(e,e.slice(o));t.addToIndex(M,i),o+=M.totalSize(),m.push(M)}or(function(){t.computeIndexResponsive(e,i,o,s,l,m,E)})}else l(new ai(i,m,E,e))},t.prototype.getName=function(){return t.Name+(this.name!==""?" "+this.name:"")},t.prototype.getCentralDirectoryEntry=function(e){var i=this._index.getInode(e);if(i===null)throw u.ENOENT(e);if(Ae(i))return i.getData();if(Ue(i))return i.getData();throw u.EPERM("Invalid inode: "+i)},t.prototype.getCentralDirectoryEntryAt=function(e){var i=this._directoryEntries[e];if(!i)throw new RangeError("Invalid directory index: "+e+".");return i},t.prototype.getNumberOfCentralDirectoryEntries=function(){return this._directoryEntries.length},t.prototype.getEndOfCentralDirectory=function(){return this._eocd},t.prototype.diskSpace=function(e,i){i(this.data.length,0)},t.prototype.isReadOnly=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.statSync=function(e,i){var o=this._index.getInode(e);if(o===null)throw u.ENOENT(e);var s;if(Ae(o))s=o.getData().getStats();else if(Ue(o))s=o.getStats();else throw new u(a.EINVAL,"Invalid inode.");return s},t.prototype.openSync=function(e,i,o){if(i.isWriteable())throw new u(a.EPERM,e);var s=this._index.getInode(e);if(s)if(Ae(s)){var l=s.getData(),m=l.getStats();switch(i.pathExistsAction()){case x.THROW_EXCEPTION:case x.TRUNCATE_FILE:throw u.EEXIST(e);case x.NOP:return new le(this,e,i,m,l.getData());default:throw new u(a.EINVAL,"Invalid FileMode object.")}}else throw u.EISDIR(e);else throw u.ENOENT(e)},t.prototype.readdirSync=function(e){var i=this._index.getInode(e);if(i){if(Ue(i))return i.getListing();throw u.ENOTDIR(e)}else throw u.ENOENT(e)},t.prototype.readFileSync=function(e,i,o){var s=this.openSync(e,o,420);try{var l=s,m=l.getBuffer();return i===null?Ft(m):m.toString(i)}finally{s.closeSync()}},t.prototype.populateIndex=function(){var e=this,i=this._eocd=t.getEOCD(this.data);if(i.diskNumber()!==i.cdDiskNumber())throw new u(a.EINVAL,"ZipFS does not support spanned zip files.");var o=i.cdOffset();if(o===4294967295)throw new u(a.EINVAL,"ZipFS does not support Zip64.");for(var s=o+i.cdSize();o<s;){var l=new Nt(e.data,e.data.slice(o));o+=l.totalSize(),t.addToIndex(l,e._index),e._directoryEntries.push(l)}},t})(ne);Ke.Name="ZipFS",Ke.Options={zipData:{type:"object",description:"The zip file as a Buffer object.",validator:T},name:{type:"string",optional:!0,description:"The name of the zip file (optional)."}},Ke.CompressionMethod=an,Ke.RegisterDecompressionMethod(an.DEFLATE,function(r,t,n){return Rt(ms(r.slice(0,t),{chunkSize:n}))}),Ke.RegisterDecompressionMethod(an.STORED,function(r,t,n){return Ft(r,0,n)});var vs="IEEE_P1282";function me(r,t,n){return r.toString("ascii",t,t+n).trim()}function ar(r,t,n){if(n===1)return String.fromCharCode(r[t]);for(var e=Math.floor(n/2),i=new Array(e),o=0;o<e;o++){var s=t+(o<<1);i[o]=String.fromCharCode(r[s+1]|r[s]<<8)}return i.join("")}function xe(r,t){var n=parseInt(me(r,t,4),10),e=parseInt(me(r,t+4,2),10),i=parseInt(me(r,t+6,2),10),o=parseInt(me(r,t+8,2),10),s=parseInt(me(r,t+10,2),10),l=parseInt(me(r,t+12,2),10),m=parseInt(me(r,t+14,2),10);return new Date(n,e,i,o,s,l,m*100)}function Je(r,t){var n=r[t],e=r[t+1],i=r[t+2],o=r[t+3],s=r[t+4],l=r[t+5];return new Date(n,e-1,i,o,s,l)}function gs(r,t){var n=r.slice(t),e=new Qt(n);switch(e.signatureWord()){case 17221:return new hi(n);case 20548:return new Es(n);case 21328:return new pi(n);case 21332:return new di(n);case 17746:return new yi(n);case 17747:return new _s(n);case 20568:return new vi(n);case 20558:return new bs(n);case 21324:return new cr(n);case 20045:return new gi(n);case 17228:return new lr(n);case 20556:return new ks(n);case 21061:return new wi(n);case 21574:return new Si(n);case 21318:return new Is(n);case 21074:return new mi(n);default:return e}}function ci(r,t,n,e){n=n-4;for(var i=new Array;t<n;){var o=gs(r,t),s=o.length();if(s===0)return i;if(t+=s,o instanceof di)break;o instanceof hi?i=i.concat(o.getEntries(e)):i.push(o)}return i}var cn=function(t){this._data=t};cn.prototype.type=function(){return this._data[0]},cn.prototype.standardIdentifier=function(){return me(this._data,1,5)},cn.prototype.version=function(){return this._data[6]},cn.prototype.data=function(){return this._data.slice(7,2048)};var li=(function(r){function t(n){r.call(this,n),this._root=null}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.systemIdentifier=function(){return this._getString32(8)},t.prototype.volumeIdentifier=function(){return this._getString32(40)},t.prototype.volumeSpaceSize=function(){return this._data.readUInt32LE(80)},t.prototype.volumeSetSize=function(){return this._data.readUInt16LE(120)},t.prototype.volumeSequenceNumber=function(){return this._data.readUInt16LE(124)},t.prototype.logicalBlockSize=function(){return this._data.readUInt16LE(128)},t.prototype.pathTableSize=function(){return this._data.readUInt32LE(132)},t.prototype.locationOfTypeLPathTable=function(){return this._data.readUInt32LE(140)},t.prototype.locationOfOptionalTypeLPathTable=function(){return this._data.readUInt32LE(144)},t.prototype.locationOfTypeMPathTable=function(){return this._data.readUInt32BE(148)},t.prototype.locationOfOptionalTypeMPathTable=function(){return this._data.readUInt32BE(152)},t.prototype.rootDirectoryEntry=function(e){return this._root===null&&(this._root=this._constructRootDirectoryRecord(this._data.slice(156)),this._root.rootCheckForRockRidge(e)),this._root},t.prototype.volumeSetIdentifier=function(){return this._getString(190,128)},t.prototype.publisherIdentifier=function(){return this._getString(318,128)},t.prototype.dataPreparerIdentifier=function(){return this._getString(446,128)},t.prototype.applicationIdentifier=function(){return this._getString(574,128)},t.prototype.copyrightFileIdentifier=function(){return this._getString(702,38)},t.prototype.abstractFileIdentifier=function(){return this._getString(740,36)},t.prototype.bibliographicFileIdentifier=function(){return this._getString(776,37)},t.prototype.volumeCreationDate=function(){return xe(this._data,813)},t.prototype.volumeModificationDate=function(){return xe(this._data,830)},t.prototype.volumeExpirationDate=function(){return xe(this._data,847)},t.prototype.volumeEffectiveDate=function(){return xe(this._data,864)},t.prototype.fileStructureVersion=function(){return this._data[881]},t.prototype.applicationUsed=function(){return this._data.slice(883,1395)},t.prototype.reserved=function(){return this._data.slice(1395,2048)},t.prototype._getString32=function(e){return this._getString(e,32)},t})(cn),ws=(function(r){function t(n){if(r.call(this,n),this.type()!==1)throw new u(a.EIO,"Invalid primary volume descriptor.")}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.name=function(){return"ISO9660"},t.prototype._constructRootDirectoryRecord=function(e){return new ui(e,-1)},t.prototype._getString=function(e,i){return this._getString(e,i)},t})(li),Ss=(function(r){function t(n){if(r.call(this,n),this.type()!==2)throw new u(a.EIO,"Invalid supplementary volume descriptor.");var e=this.escapeSequence(),i=e[2];if(e[0]!==37||e[1]!==47||i!==64&&i!==67&&i!==69)throw new u(a.EIO,"Unrecognized escape sequence for SupplementaryVolumeDescriptor: "+e.toString())}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.name=function(){return"Joliet"},t.prototype.escapeSequence=function(){return this._data.slice(88,120)},t.prototype._constructRootDirectoryRecord=function(e){return new fi(e,-1)},t.prototype._getString=function(e,i){return ar(this._data,e,i)},t})(li),jt=function(t,n){this._suEntries=null,this._fileOrDir=null,this._data=t,this._rockRidgeOffset=n};jt.prototype.hasRockRidge=function(){return this._rockRidgeOffset>-1},jt.prototype.getRockRidgeOffset=function(){return this._rockRidgeOffset},jt.prototype.rootCheckForRockRidge=function(t){var n=this.getDirectory(t);this._rockRidgeOffset=n.getDotEntry(t)._getRockRidgeOffset(t),this._rockRidgeOffset>-1&&(this._fileOrDir=null)},jt.prototype.length=function(){return this._data[0]},jt.prototype.extendedAttributeRecordLength=function(){return this._data[1]},jt.prototype.lba=function(){return this._data.readUInt32LE(2)*2048},jt.prototype.dataLength=function(){return this._data.readUInt32LE(10)},jt.prototype.recordingDate=function(){return Je(this._data,18)},jt.prototype.fileFlags=function(){return this._data[25]},jt.prototype.fileUnitSize=function(){return this._data[26]},jt.prototype.interleaveGapSize=function(){return this._data[27]},jt.prototype.volumeSequenceNumber=function(){return this._data.readUInt16LE(28)},jt.prototype.identifier=function(){return this._getString(33,this._data[32])},jt.prototype.fileName=function(t){if(this.hasRockRidge()){var n=this._rockRidgeFilename(t);if(n!==null)return n}var e=this.identifier();if(this.isDirectory(t))return e;var i=e.indexOf(";");return i===-1?e:e[i-1]==="."?e.slice(0,i-1):e.slice(0,i)},jt.prototype.isDirectory=function(t){var n=!!(this.fileFlags()&2);return!n&&this.hasRockRidge()&&(n=this.getSUEntries(t).filter(function(e){return e instanceof lr}).length>0),n},jt.prototype.isSymlink=function(t){return this.hasRockRidge()&&this.getSUEntries(t).filter(function(n){return n instanceof cr}).length>0},jt.prototype.getSymlinkPath=function(t){for(var n="",e=this.getSUEntries(t),i=this._getGetString(),o=0,s=e;o<s.length;o+=1){var l=s[o];if(l instanceof cr){for(var m=l.componentRecords(),E=0,D=m;E<D.length;E+=1){var M=D[E],q=M.flags();q&2?n+="./":q&4?n+="../":q&8?n+="/":(n+=M.content(i),q&1||(n+="/"))}if(!l.continueFlag())break}}return n.length>1&&n[n.length-1]==="/"?n.slice(0,n.length-1):n},jt.prototype.getFile=function(t){if(this.isDirectory(t))throw new Error("Tried to get a File from a directory.");return this._fileOrDir===null&&(this._fileOrDir=t.slice(this.lba(),this.lba()+this.dataLength())),this._fileOrDir},jt.prototype.getDirectory=function(t){if(!this.isDirectory(t))throw new Error("Tried to get a Directory from a file.");return this._fileOrDir===null&&(this._fileOrDir=this._constructDirectory(t)),this._fileOrDir},jt.prototype.getSUEntries=function(t){return this._suEntries||this._constructSUEntries(t),this._suEntries},jt.prototype._rockRidgeFilename=function(t){var n=this.getSUEntries(t).filter(function(m){return m instanceof gi});if(n.length===0||n[0].flags()&6)return null;for(var e="",i=this._getGetString(),o=0,s=n;o<s.length;o+=1){var l=s[o];if(e+=l.name(i),!(l.flags()&1))break}return e},jt.prototype._constructSUEntries=function(t){var n=33+this._data[32];n%2===1&&n++,n+=this._rockRidgeOffset,this._suEntries=ci(this._data,n,this.length(),t)},jt.prototype._getRockRidgeOffset=function(t){this._rockRidgeOffset=0;var n=this.getSUEntries(t);if(n.length>0){var e=n[0];if(e instanceof pi&&e.checkBytesPass())for(var i=1;i<n.length;i++){var o=n[i];if(o instanceof mi||o instanceof yi&&o.extensionIdentifier()===vs)return e.bytesSkipped()}}return this._rockRidgeOffset=-1,-1};var ui=(function(r){function t(n,e){r.call(this,n,e)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype._getString=function(e,i){return me(this._data,e,i)},t.prototype._constructDirectory=function(e){return new Rs(this,e)},t.prototype._getGetString=function(){return me},t})(jt),fi=(function(r){function t(n,e){r.call(this,n,e)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype._getString=function(e,i){return ar(this._data,e,i)},t.prototype._constructDirectory=function(e){return new Ls(this,e)},t.prototype._getGetString=function(){return ar},t})(jt),Qt=function(t){this._data=t};Qt.prototype.signatureWord=function(){return this._data.readUInt16BE(0)},Qt.prototype.signatureWordString=function(){return me(this._data,0,2)},Qt.prototype.length=function(){return this._data[2]},Qt.prototype.suVersion=function(){return this._data[3]};var hi=(function(r){function t(n){r.call(this,n),this._entries=null}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.continuationLba=function(){return this._data.readUInt32LE(4)},t.prototype.continuationLbaOffset=function(){return this._data.readUInt32LE(12)},t.prototype.continuationLength=function(){return this._data.readUInt32LE(20)},t.prototype.getEntries=function(e){if(!this._entries){var i=this.continuationLba()*2048+this.continuationLbaOffset();this._entries=ci(e,i,this.continuationLength(),e)}return this._entries},t})(Qt),Es=(function(r){function t(n){r.call(this,n)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t})(Qt),pi=(function(r){function t(n){r.call(this,n)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.checkBytesPass=function(){return this._data[4]===190&&this._data[5]===239},t.prototype.bytesSkipped=function(){return this._data[6]},t})(Qt),di=(function(r){function t(n){r.call(this,n)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t})(Qt),yi=(function(r){function t(n){r.call(this,n)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.identifierLength=function(){return this._data[4]},t.prototype.descriptorLength=function(){return this._data[5]},t.prototype.sourceLength=function(){return this._data[6]},t.prototype.extensionVersion=function(){return this._data[7]},t.prototype.extensionIdentifier=function(){return me(this._data,8,this.identifierLength())},t.prototype.extensionDescriptor=function(){return me(this._data,8+this.identifierLength(),this.descriptorLength())},t.prototype.extensionSource=function(){return me(this._data,8+this.identifierLength()+this.descriptorLength(),this.sourceLength())},t})(Qt),_s=(function(r){function t(n){r.call(this,n)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.extensionSequence=function(){return this._data[4]},t})(Qt),mi=(function(r){function t(n){r.call(this,n)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t})(Qt),vi=(function(r){function t(n){r.call(this,n)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.mode=function(){return this._data.readUInt32LE(4)},t.prototype.fileLinks=function(){return this._data.readUInt32LE(12)},t.prototype.uid=function(){return this._data.readUInt32LE(20)},t.prototype.gid=function(){return this._data.readUInt32LE(28)},t.prototype.inode=function(){return this._data.readUInt32LE(36)},t})(Qt),bs=(function(r){function t(n){r.call(this,n)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.devTHigh=function(){return this._data.readUInt32LE(4)},t.prototype.devTLow=function(){return this._data.readUInt32LE(12)},t})(Qt),cr=(function(r){function t(n){r.call(this,n)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.flags=function(){return this._data[4]},t.prototype.continueFlag=function(){return this.flags()&1},t.prototype.componentRecords=function(){for(var e=this,i=new Array,o=5;o<this.length();){var s=new En(e._data.slice(o));i.push(s),o+=s.length()}return i},t})(Qt),En=function(t){this._data=t};En.prototype.flags=function(){return this._data[0]},En.prototype.length=function(){return 2+this.componentLength()},En.prototype.componentLength=function(){return this._data[1]},En.prototype.content=function(t){return t(this._data,2,this.componentLength())};var gi=(function(r){function t(n){r.call(this,n)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.flags=function(){return this._data[4]},t.prototype.name=function(e){return e(this._data,5,this.length()-5)},t})(Qt),lr=(function(r){function t(n){r.call(this,n)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.childDirectoryLba=function(){return this._data.readUInt32LE(4)},t})(Qt),ks=(function(r){function t(n){r.call(this,n)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.parentDirectoryLba=function(){return this._data.readUInt32LE(4)},t})(Qt),wi=(function(r){function t(n){r.call(this,n)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t})(Qt),Si=(function(r){function t(n){r.call(this,n)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.flags=function(){return this._data[4]},t.prototype.creation=function(){return this.flags()&1?this._longFormDates()?xe(this._data,5):Je(this._data,5):null},t.prototype.modify=function(){if(this.flags()&2){var e=this.flags()&1?1:0;return this._longFormDates?xe(this._data,5+e*17):Je(this._data,5+e*7)}else return null},t.prototype.access=function(){if(this.flags()&4){var e=this.flags()&1?1:0;return e+=this.flags()&2?1:0,this._longFormDates?xe(this._data,5+e*17):Je(this._data,5+e*7)}else return null},t.prototype.backup=function(){if(this.flags()&16){var e=this.flags()&1?1:0;return e+=this.flags()&2?1:0,e+=this.flags()&4?1:0,this._longFormDates?xe(this._data,5+e*17):Je(this._data,5+e*7)}else return null},t.prototype.expiration=function(){if(this.flags()&32){var e=this.flags()&1?1:0;return e+=this.flags()&2?1:0,e+=this.flags()&4?1:0,e+=this.flags()&16?1:0,this._longFormDates?xe(this._data,5+e*17):Je(this._data,5+e*7)}else return null},t.prototype.effective=function(){if(this.flags()&64){var e=this.flags()&1?1:0;return e+=this.flags()&2?1:0,e+=this.flags()&4?1:0,e+=this.flags()&16?1:0,e+=this.flags()&32?1:0,this._longFormDates?xe(this._data,5+e*17):Je(this._data,5+e*7)}else return null},t.prototype._longFormDates=function(){return!!this.flags()},t})(Qt),Is=(function(r){function t(n){r.call(this,n)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.virtualSizeHigh=function(){return this._data.readUInt32LE(4)},t.prototype.virtualSizeLow=function(){return this._data.readUInt32LE(12)},t.prototype.tableDepth=function(){return this._data[20]},t})(Qt),_n=function(t,n){var e=this;this._fileList=[],this._fileMap={},this._record=t;var i=t.lba(),o=i+t.dataLength();if(!(t.fileFlags()&2)){var s=t.getSUEntries(n).filter(function(D){return D instanceof lr})[0];i=s.childDirectoryLba()*2048,o=1/0}for(;i<o;){var l=n[i];if(l===0){i++;continue}var m=e._constructDirectoryRecord(n.slice(i)),E=m.fileName(n);E!=="\0"&&E!==""?(!m.hasRockRidge()||m.getSUEntries(n).filter(function(D){return D instanceof wi}).length===0)&&(e._fileMap[E]=m,e._fileList.push(E)):o===1/0&&(o=i+m.dataLength()),i+=m.length()}};_n.prototype.getRecord=function(t){return this._fileMap[t]},_n.prototype.getFileList=function(){return this._fileList},_n.prototype.getDotEntry=function(t){return this._constructDirectoryRecord(t.slice(this._record.lba()))};var Rs=(function(r){function t(n,e){r.call(this,n,e)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype._constructDirectoryRecord=function(e){return new ui(e,this._record.getRockRidgeOffset())},t})(_n),Ls=(function(r){function t(n,e){r.call(this,n,e)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype._constructDirectoryRecord=function(e){return new fi(e,this._record.getRockRidgeOffset())},t})(_n),zn=(function(r){function t(n,e,i){var o=this;e===void 0&&(e=""),i===void 0&&(i=!0),r.call(this),this._data=n,Lt(i,t.Name,{data:"ISO data as a Buffer",name:e});for(var s=!1,l=16*2048,m=new Array;!s;){var E=n.slice(l),D=new cn(E);switch(D.type()){case 1:m.push(new ws(E));break;case 2:m.push(new Ss(E));break;case 255:s=!0;break}l+=2048}if(m.length===0)throw new u(a.EIO,"Unable to find a suitable volume descriptor.");m.forEach(function(M){(!o._pvd||o._pvd.type()!==2)&&(o._pvd=M)}),this._root=this._pvd.rootDirectoryEntry(n),this._name=e}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.Create=function(e,i){var o,s;try{o=new t(e.data,e.name,!1)}catch(l){l=l}finally{i(s,o)}},t.isAvailable=function(){return!0},t.prototype.getName=function(){var e="IsoFS"+this._name+(this._pvd?"-"+this._pvd.name():"");return this._root&&this._root.hasRockRidge()&&(e+="-RockRidge"),e},t.prototype.diskSpace=function(e,i){i(this._data.length,0)},t.prototype.isReadOnly=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.statSync=function(e,i){var o=this._getDirectoryRecord(e);if(o===null)throw u.ENOENT(e);return this._getStats(e,o)},t.prototype.openSync=function(e,i,o){if(i.isWriteable())throw new u(a.EPERM,e);var s=this._getDirectoryRecord(e);if(s){if(s.isSymlink(this._data))return this.openSync(v.resolve(e,s.getSymlinkPath(this._data)),i,o);if(s.isDirectory(this._data))throw u.EISDIR(e);var l=s.getFile(this._data),m=this._getStats(e,s);switch(i.pathExistsAction()){case x.THROW_EXCEPTION:case x.TRUNCATE_FILE:throw u.EEXIST(e);case x.NOP:return new le(this,e,i,m,l);default:throw new u(a.EINVAL,"Invalid FileMode object.")}}else throw u.ENOENT(e)},t.prototype.readdirSync=function(e){var i=this._getDirectoryRecord(e);if(i){if(i.isDirectory(this._data))return i.getDirectory(this._data).getFileList().slice(0);throw u.ENOTDIR(e)}else throw u.ENOENT(e)},t.prototype.readFileSync=function(e,i,o){var s=this.openSync(e,o,420);try{var l=s,m=l.getBuffer();return i===null?Ft(m):m.toString(i)}finally{s.closeSync()}},t.prototype._getDirectoryRecord=function(e){var i=this;if(e==="/")return this._root;for(var o=e.split("/").slice(1),s=this._root,l=0,m=o;l<m.length;l+=1){var E=m[l];if(s.isDirectory(i._data)){if(s=s.getDirectory(i._data).getRecord(E),!s)return null}else return null}return s},t.prototype._getStats=function(e,i){if(i.isSymlink(this._data)){var o=v.resolve(e,i.getSymlinkPath(this._data)),s=this._getDirectoryRecord(o);return s?this._getStats(o,s):null}else{var l=i.dataLength(),m=365,E=i.recordingDate(),D=E,M=E,q=E;if(i.hasRockRidge())for(var $=i.getSUEntries(this._data),nt=0,ut=$;nt<ut.length;nt+=1){var yt=ut[nt];if(yt instanceof vi)m=yt.mode();else if(yt instanceof Si){var It=yt.flags();It&4&&(D=yt.access()),It&2&&(M=yt.modify()),It&1&&(q=yt.creation())}}return m=m&365,new A(i.isDirectory(this._data)?C.DIRECTORY:C.FILE,l,m,D,M,q)}},t})(ne);zn.Name="IsoFS",zn.Options={data:{type:"object",description:"The ISO file in a buffer",validator:T}},[R,xn,Tn,en,On,nn,dn,zn,mn,rn,wn,Pn,Bn,Ke].forEach(function(r){var t=r.Create;r.Create=function(n,e){var i=typeof n=="function",o=i?n:e,s=i?{}:n;function l(m){m?o(m):t.call(r,s,o)}F(r,s,l)}});var jn={AsyncMirror:R,Dropbox:xn,Emscripten:Tn,FolderAdapter:en,HTML5FS:On,InMemory:nn,IndexedDB:dn,IsoFS:zn,LocalStorage:mn,MountableFileSystem:rn,OverlayFS:wn,WorkerFS:Pn,XmlHttpRequest:Bn,ZipFS:Ke};k.initializeTTYs&&k.initializeTTYs();function xs(r){r.Buffer=g,r.process=k;var t=r.require?r.require:null;r.require=function(n){var e=Ei(n);return e||t.apply(null,Array.prototype.slice.call(arguments,0))}}function Ts(r,t){jn[r]=t}function Ei(r){switch(r){case"fs":return lt;case"path":return v;case"buffer":return w;case"process":return k;case"bfs_utils":return Z;default:return jn[r]}}function _i(r){return lt.initialize(r)}function Fs(r,t){ur(r,function(n,e){e?(_i(e),t()):t(n)})}function ur(r,t){var n=r.fs;if(!n)return t(new u(a.EPERM,'Missing "fs" property on configuration object.'));var e=r.options,i=0,o=!1;function s(){if(!o){o=!0;var E=jn[n];E?E.Create(e,t):t(new u(a.EPERM,"File system "+n+" is not available in BrowserFS."))}}if(e!==null&&typeof e=="object"){var l=!1,m=Object.keys(e).filter(function(E){return E!=="fs"});m.forEach(function(E){var D=e[E];D!==null&&typeof D=="object"&&D.fs&&(i++,ur(D,function(M,q){if(i--,M){if(o)return;o=!0,t(M)}else e[E]=q,i===0&&l&&s()}))}),l=!0}i===0&&s()}"ab".substr(-1)!=="b"&&(String.prototype.substr=(function(r){return function(t,n){return t<0&&(t=this.length+t),r.call(this,t,n)}})(String.prototype.substr)),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&(Uint8Array.prototype.slice||(Uint8Array.prototype.slice=function(r,t){r===void 0&&(r=0),t===void 0&&(t=this.length);var n=this;return r<0&&(r=this.length+r,r<0&&(r=0)),t<0&&(t=this.length+t,t<0&&(t=0)),t<r&&(t=r),new Uint8Array(n.buffer,n.byteOffset+r,t-r)})),p.install=xs,p.registerFileSystem=Ts,p.BFSRequire=Ei,p.initialize=_i,p.configure=Fs,p.getFileSystem=ur,p.EmscriptenFS=bt,p.FileSystem=jn,p.Errors=N,p.setImmediate=or}).call(p,y(1),(function(){return this})(),y(5)(f),y(6))},function(f,p,y){f.exports=y(2).Buffer},function(f,p,y){(function(a){var I=y(3),S=y(4);p.Buffer=a,p.SlowBuffer=H,p.INSPECT_MAX_BYTES=50;var k=2147483647;p.kMaxLength=k,a.TYPED_ARRAY_SUPPORT=w(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function w(){try{var R=new Uint8Array(1);return R.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},R.foo()===42}catch{return!1}}function v(R){if(R>k)throw new RangeError("Invalid typed array length");var h=new Uint8Array(R);return h.__proto__=a.prototype,h}function a(R,h,d){if(typeof R=="number"){if(typeof h=="string")throw new Error("If encoding is specified then the first argument must be a string");return x(R)}return b(R,h,d)}typeof Symbol<"u"&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),a.poolSize=8192;function b(R,h,d){if(typeof R=="number")throw new TypeError('"value" argument must not be a number');return oe(R)?A(R,h,d):typeof R=="string"?O(R,h):J(R)}a.from=function(R,h,d){return b(R,h,d)},a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array;function u(R){if(typeof R!="number")throw new TypeError('"size" argument must be a number');if(R<0)throw new RangeError('"size" argument must not be negative')}function N(R,h,d){return u(R),R<=0?v(R):h!==void 0?typeof d=="string"?v(R).fill(h,d):v(R).fill(h):v(R)}a.alloc=function(R,h,d){return N(R,h,d)};function x(R){return u(R),v(R<0?0:B(R)|0)}a.allocUnsafe=function(R){return x(R)},a.allocUnsafeSlow=function(R){return x(R)};function O(R,h){if((typeof h!="string"||h==="")&&(h="utf8"),!a.isEncoding(h))throw new TypeError('"encoding" must be a valid string encoding');var d=St(R,h)|0,L=v(d),P=L.write(R,h);return P!==d&&(L=L.slice(0,P)),L}function C(R){for(var h=R.length<0?0:B(R.length)|0,d=v(h),L=0;L<h;L+=1)d[L]=R[L]&255;return d}function A(R,h,d){if(h<0||R.byteLength<h)throw new RangeError("'offset' is out of bounds");if(R.byteLength<h+(d||0))throw new RangeError("'length' is out of bounds");var L;return h===void 0&&d===void 0?L=new Uint8Array(R):d===void 0?L=new Uint8Array(R,h):L=new Uint8Array(R,h,d),L.__proto__=a.prototype,L}function J(R){if(a.isBuffer(R)){var h=B(R.length)|0,d=v(h);return d.length===0||R.copy(d,0,0,h),d}if(R){if(le(R)||"length"in R)return typeof R.length!="number"||be(R.length)?v(0):C(R);if(R.type==="Buffer"&&Array.isArray(R.data))return C(R.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function B(R){if(R>=k)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+k.toString(16)+" bytes");return R|0}function H(R){return+R!=R&&(R=0),a.alloc(+R)}a.isBuffer=function(h){return h!=null&&h._isBuffer===!0},a.compare=function(h,d){if(!a.isBuffer(h)||!a.isBuffer(d))throw new TypeError("Arguments must be Buffers");if(h===d)return 0;for(var L=h.length,P=d.length,G=0,V=Math.min(L,P);G<V;++G)if(h[G]!==d[G]){L=h[G],P=d[G];break}return L<P?-1:P<L?1:0},a.isEncoding=function(h){switch(String(h).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(h,d){if(!Array.isArray(h))throw new TypeError('"list" argument must be an Array of Buffers');if(h.length===0)return a.alloc(0);var L;if(d===void 0)for(d=0,L=0;L<h.length;++L)d+=h[L].length;var P=a.allocUnsafe(d),G=0;for(L=0;L<h.length;++L){var V=h[L];if(!a.isBuffer(V))throw new TypeError('"list" argument must be an Array of Buffers');V.copy(P,G),G+=V.length}return P};function St(R,h){if(a.isBuffer(R))return R.length;if(le(R)||oe(R))return R.byteLength;typeof R!="string"&&(R=""+R);var d=R.length;if(d===0)return 0;for(var L=!1;;)switch(h){case"ascii":case"latin1":case"binary":return d;case"utf8":case"utf-8":case void 0:return pt(R).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d*2;case"hex":return d>>>1;case"base64":return ne(R).length;default:if(L)return pt(R).length;h=(""+h).toLowerCase(),L=!0}}a.byteLength=St;function tt(R,h,d){var L=!1;if((h===void 0||h<0)&&(h=0),h>this.length||((d===void 0||d>this.length)&&(d=this.length),d<=0)||(d>>>=0,h>>>=0,d<=h))return"";for(R||(R="utf8");;)switch(R){case"hex":return Rt(this,h,d);case"utf8":case"utf-8":return Zt(this,h,d);case"ascii":return K(this,h,d);case"latin1":case"binary":return ft(this,h,d);case"base64":return Et(this,h,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return gt(this,h,d);default:if(L)throw new TypeError("Unknown encoding: "+R);R=(R+"").toLowerCase(),L=!0}}a.prototype._isBuffer=!0;function kt(R,h,d){var L=R[h];R[h]=R[d],R[d]=L}a.prototype.swap16=function(){var h=this.length;if(h%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var d=0;d<h;d+=2)kt(this,d,d+1);return this},a.prototype.swap32=function(){var h=this.length;if(h%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var d=0;d<h;d+=4)kt(this,d,d+3),kt(this,d+1,d+2);return this},a.prototype.swap64=function(){var h=this.length;if(h%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var d=0;d<h;d+=8)kt(this,d,d+7),kt(this,d+1,d+6),kt(this,d+2,d+5),kt(this,d+3,d+4);return this},a.prototype.toString=function(){var h=this.length;return h===0?"":arguments.length===0?Zt(this,0,h):tt.apply(this,arguments)},a.prototype.equals=function(h){if(!a.isBuffer(h))throw new TypeError("Argument must be a Buffer");return this===h?!0:a.compare(this,h)===0},a.prototype.inspect=function(){var h="",d=p.INSPECT_MAX_BYTES;return this.length>0&&(h=this.toString("hex",0,d).match(/.{2}/g).join(" "),this.length>d&&(h+=" ... ")),"<Buffer "+h+">"},a.prototype.compare=function(h,d,L,P,G){if(!a.isBuffer(h))throw new TypeError("Argument must be a Buffer");if(d===void 0&&(d=0),L===void 0&&(L=h?h.length:0),P===void 0&&(P=0),G===void 0&&(G=this.length),d<0||L>h.length||P<0||G>this.length)throw new RangeError("out of range index");if(P>=G&&d>=L)return 0;if(P>=G)return-1;if(d>=L)return 1;if(d>>>=0,L>>>=0,P>>>=0,G>>>=0,this===h)return 0;for(var V=G-P,xt=L-d,Dt=Math.min(V,xt),Pt=this.slice(P,G),Vt=h.slice(d,L),At=0;At<Dt;++At)if(Pt[At]!==Vt[At]){V=Pt[At],xt=Vt[At];break}return V<xt?-1:xt<V?1:0};function dt(R,h,d,L,P){if(R.length===0)return-1;if(typeof d=="string"?(L=d,d=0):d>2147483647?d=2147483647:d<-2147483648&&(d=-2147483648),d=+d,be(d)&&(d=P?0:R.length-1),d<0&&(d=R.length+d),d>=R.length){if(P)return-1;d=R.length-1}else if(d<0)if(P)d=0;else return-1;if(typeof h=="string"&&(h=a.from(h,L)),a.isBuffer(h))return h.length===0?-1:z(R,h,d,L,P);if(typeof h=="number")return h=h&255,typeof Uint8Array.prototype.indexOf=="function"?P?Uint8Array.prototype.indexOf.call(R,h,d):Uint8Array.prototype.lastIndexOf.call(R,h,d):z(R,[h],d,L,P);throw new TypeError("val must be string, number or Buffer")}function z(R,h,d,L,P){var G=1,V=R.length,xt=h.length;if(L!==void 0&&(L=String(L).toLowerCase(),L==="ucs2"||L==="ucs-2"||L==="utf16le"||L==="utf-16le")){if(R.length<2||h.length<2)return-1;G=2,V/=2,xt/=2,d/=2}function Dt(Qe,je){return G===1?Qe[je]:Qe.readUInt16BE(je*G)}var Pt;if(P){var Vt=-1;for(Pt=d;Pt<V;Pt++)if(Dt(R,Pt)===Dt(h,Vt===-1?0:Pt-Vt)){if(Vt===-1&&(Vt=Pt),Pt-Vt+1===xt)return Vt*G}else Vt!==-1&&(Pt-=Pt-Vt),Vt=-1}else for(d+xt>V&&(d=V-xt),Pt=d;Pt>=0;Pt--){for(var At=!0,ke=0;ke<xt;ke++)if(Dt(R,Pt+ke)!==Dt(h,ke)){At=!1;break}if(At)return Pt}return-1}a.prototype.includes=function(h,d,L){return this.indexOf(h,d,L)!==-1},a.prototype.indexOf=function(h,d,L){return dt(this,h,d,L,!0)},a.prototype.lastIndexOf=function(h,d,L){return dt(this,h,d,L,!1)};function et(R,h,d,L){d=Number(d)||0;var P=R.length-d;L?(L=Number(L),L>P&&(L=P)):L=P;var G=h.length;if(G%2!==0)throw new TypeError("Invalid hex string");L>G/2&&(L=G/2);for(var V=0;V<L;++V){var xt=parseInt(h.substr(V*2,2),16);if(be(xt))return V;R[d+V]=xt}return V}function lt(R,h,d,L){return vt(pt(h,R.length-d),R,d,L)}function Tt(R,h,d,L){return vt(bt(h),R,d,L)}function mt(R,h,d,L){return Tt(R,h,d,L)}function Ct(R,h,d,L){return vt(ne(h),R,d,L)}function Lt(R,h,d,L){return vt(Q(h,R.length-d),R,d,L)}a.prototype.write=function(h,d,L,P){if(d===void 0)P="utf8",L=this.length,d=0;else if(L===void 0&&typeof d=="string")P=d,L=this.length,d=0;else if(isFinite(d))d=d>>>0,isFinite(L)?(L=L>>>0,P===void 0&&(P="utf8")):(P=L,L=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var G=this.length-d;if((L===void 0||L>G)&&(L=G),h.length>0&&(L<0||d<0)||d>this.length)throw new RangeError("Attempt to write outside buffer bounds");P||(P="utf8");for(var V=!1;;)switch(P){case"hex":return et(this,h,d,L);case"utf8":case"utf-8":return lt(this,h,d,L);case"ascii":return Tt(this,h,d,L);case"latin1":case"binary":return mt(this,h,d,L);case"base64":return Ct(this,h,d,L);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Lt(this,h,d,L);default:if(V)throw new TypeError("Unknown encoding: "+P);P=(""+P).toLowerCase(),V=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Et(R,h,d){return h===0&&d===R.length?I.fromByteArray(R):I.fromByteArray(R.slice(h,d))}function Zt(R,h,d){d=Math.min(R.length,d);for(var L=[],P=h;P<d;){var G=R[P],V=null,xt=G>239?4:G>223?3:G>191?2:1;if(P+xt<=d){var Dt,Pt,Vt,At;switch(xt){case 1:G<128&&(V=G);break;case 2:Dt=R[P+1],(Dt&192)===128&&(At=(G&31)<<6|Dt&63,At>127&&(V=At));break;case 3:Dt=R[P+1],Pt=R[P+2],(Dt&192)===128&&(Pt&192)===128&&(At=(G&15)<<12|(Dt&63)<<6|Pt&63,At>2047&&(At<55296||At>57343)&&(V=At));break;case 4:Dt=R[P+1],Pt=R[P+2],Vt=R[P+3],(Dt&192)===128&&(Pt&192)===128&&(Vt&192)===128&&(At=(G&15)<<18|(Dt&63)<<12|(Pt&63)<<6|Vt&63,At>65535&&At<1114112&&(V=At))}}V===null?(V=65533,xt=1):V>65535&&(V-=65536,L.push(V>>>10&1023|55296),V=56320|V&1023),L.push(V),P+=xt}return U(L)}var j=4096;function U(R){var h=R.length;if(h<=j)return String.fromCharCode.apply(String,R);for(var d="",L=0;L<h;)d+=String.fromCharCode.apply(String,R.slice(L,L+=j));return d}function K(R,h,d){var L="";d=Math.min(R.length,d);for(var P=h;P<d;++P)L+=String.fromCharCode(R[P]&127);return L}function ft(R,h,d){var L="";d=Math.min(R.length,d);for(var P=h;P<d;++P)L+=String.fromCharCode(R[P]);return L}function Rt(R,h,d){var L=R.length;(!h||h<0)&&(h=0),(!d||d<0||d>L)&&(d=L);for(var P="",G=h;G<d;++G)P+=rt(R[G]);return P}function gt(R,h,d){for(var L=R.slice(h,d),P="",G=0;G<L.length;G+=2)P+=String.fromCharCode(L[G]+L[G+1]*256);return P}a.prototype.slice=function(h,d){var L=this.length;h=~~h,d=d===void 0?L:~~d,h<0?(h+=L,h<0&&(h=0)):h>L&&(h=L),d<0?(d+=L,d<0&&(d=0)):d>L&&(d=L),d<h&&(d=h);var P=this.subarray(h,d);return P.__proto__=a.prototype,P};function _t(R,h,d){if(R%1!==0||R<0)throw new RangeError("offset is not uint");if(R+h>d)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUIntLE=function(h,d,L){h=h>>>0,d=d>>>0,L||_t(h,d,this.length);for(var P=this[h],G=1,V=0;++V<d&&(G*=256);)P+=this[h+V]*G;return P},a.prototype.readUIntBE=function(h,d,L){h=h>>>0,d=d>>>0,L||_t(h,d,this.length);for(var P=this[h+--d],G=1;d>0&&(G*=256);)P+=this[h+--d]*G;return P},a.prototype.readUInt8=function(h,d){return h=h>>>0,d||_t(h,1,this.length),this[h]},a.prototype.readUInt16LE=function(h,d){return h=h>>>0,d||_t(h,2,this.length),this[h]|this[h+1]<<8},a.prototype.readUInt16BE=function(h,d){return h=h>>>0,d||_t(h,2,this.length),this[h]<<8|this[h+1]},a.prototype.readUInt32LE=function(h,d){return h=h>>>0,d||_t(h,4,this.length),(this[h]|this[h+1]<<8|this[h+2]<<16)+this[h+3]*16777216},a.prototype.readUInt32BE=function(h,d){return h=h>>>0,d||_t(h,4,this.length),this[h]*16777216+(this[h+1]<<16|this[h+2]<<8|this[h+3])},a.prototype.readIntLE=function(h,d,L){h=h>>>0,d=d>>>0,L||_t(h,d,this.length);for(var P=this[h],G=1,V=0;++V<d&&(G*=256);)P+=this[h+V]*G;return G*=128,P>=G&&(P-=Math.pow(2,8*d)),P},a.prototype.readIntBE=function(h,d,L){h=h>>>0,d=d>>>0,L||_t(h,d,this.length);for(var P=d,G=1,V=this[h+--P];P>0&&(G*=256);)V+=this[h+--P]*G;return G*=128,V>=G&&(V-=Math.pow(2,8*d)),V},a.prototype.readInt8=function(h,d){return h=h>>>0,d||_t(h,1,this.length),this[h]&128?(255-this[h]+1)*-1:this[h]},a.prototype.readInt16LE=function(h,d){h=h>>>0,d||_t(h,2,this.length);var L=this[h]|this[h+1]<<8;return L&32768?L|4294901760:L},a.prototype.readInt16BE=function(h,d){h=h>>>0,d||_t(h,2,this.length);var L=this[h+1]|this[h]<<8;return L&32768?L|4294901760:L},a.prototype.readInt32LE=function(h,d){return h=h>>>0,d||_t(h,4,this.length),this[h]|this[h+1]<<8|this[h+2]<<16|this[h+3]<<24},a.prototype.readInt32BE=function(h,d){return h=h>>>0,d||_t(h,4,this.length),this[h]<<24|this[h+1]<<16|this[h+2]<<8|this[h+3]},a.prototype.readFloatLE=function(h,d){return h=h>>>0,d||_t(h,4,this.length),S.read(this,h,!0,23,4)},a.prototype.readFloatBE=function(h,d){return h=h>>>0,d||_t(h,4,this.length),S.read(this,h,!1,23,4)},a.prototype.readDoubleLE=function(h,d){return h=h>>>0,d||_t(h,8,this.length),S.read(this,h,!0,52,8)},a.prototype.readDoubleBE=function(h,d){return h=h>>>0,d||_t(h,8,this.length),S.read(this,h,!1,52,8)};function Ft(R,h,d,L,P,G){if(!a.isBuffer(R))throw new TypeError('"buffer" argument must be a Buffer instance');if(h>P||h<G)throw new RangeError('"value" argument is out of bounds');if(d+L>R.length)throw new RangeError("Index out of range")}a.prototype.writeUIntLE=function(h,d,L,P){if(h=+h,d=d>>>0,L=L>>>0,!P){var G=Math.pow(2,8*L)-1;Ft(this,h,d,L,G,0)}var V=1,xt=0;for(this[d]=h&255;++xt<L&&(V*=256);)this[d+xt]=h/V&255;return d+L},a.prototype.writeUIntBE=function(h,d,L,P){if(h=+h,d=d>>>0,L=L>>>0,!P){var G=Math.pow(2,8*L)-1;Ft(this,h,d,L,G,0)}var V=L-1,xt=1;for(this[d+V]=h&255;--V>=0&&(xt*=256);)this[d+V]=h/xt&255;return d+L},a.prototype.writeUInt8=function(h,d,L){return h=+h,d=d>>>0,L||Ft(this,h,d,1,255,0),this[d]=h&255,d+1},a.prototype.writeUInt16LE=function(h,d,L){return h=+h,d=d>>>0,L||Ft(this,h,d,2,65535,0),this[d]=h&255,this[d+1]=h>>>8,d+2},a.prototype.writeUInt16BE=function(h,d,L){return h=+h,d=d>>>0,L||Ft(this,h,d,2,65535,0),this[d]=h>>>8,this[d+1]=h&255,d+2},a.prototype.writeUInt32LE=function(h,d,L){return h=+h,d=d>>>0,L||Ft(this,h,d,4,4294967295,0),this[d+3]=h>>>24,this[d+2]=h>>>16,this[d+1]=h>>>8,this[d]=h&255,d+4},a.prototype.writeUInt32BE=function(h,d,L){return h=+h,d=d>>>0,L||Ft(this,h,d,4,4294967295,0),this[d]=h>>>24,this[d+1]=h>>>16,this[d+2]=h>>>8,this[d+3]=h&255,d+4},a.prototype.writeIntLE=function(h,d,L,P){if(h=+h,d=d>>>0,!P){var G=Math.pow(2,8*L-1);Ft(this,h,d,L,G-1,-G)}var V=0,xt=1,Dt=0;for(this[d]=h&255;++V<L&&(xt*=256);)h<0&&Dt===0&&this[d+V-1]!==0&&(Dt=1),this[d+V]=(h/xt>>0)-Dt&255;return d+L},a.prototype.writeIntBE=function(h,d,L,P){if(h=+h,d=d>>>0,!P){var G=Math.pow(2,8*L-1);Ft(this,h,d,L,G-1,-G)}var V=L-1,xt=1,Dt=0;for(this[d+V]=h&255;--V>=0&&(xt*=256);)h<0&&Dt===0&&this[d+V+1]!==0&&(Dt=1),this[d+V]=(h/xt>>0)-Dt&255;return d+L},a.prototype.writeInt8=function(h,d,L){return h=+h,d=d>>>0,L||Ft(this,h,d,1,127,-128),h<0&&(h=255+h+1),this[d]=h&255,d+1},a.prototype.writeInt16LE=function(h,d,L){return h=+h,d=d>>>0,L||Ft(this,h,d,2,32767,-32768),this[d]=h&255,this[d+1]=h>>>8,d+2},a.prototype.writeInt16BE=function(h,d,L){return h=+h,d=d>>>0,L||Ft(this,h,d,2,32767,-32768),this[d]=h>>>8,this[d+1]=h&255,d+2},a.prototype.writeInt32LE=function(h,d,L){return h=+h,d=d>>>0,L||Ft(this,h,d,4,2147483647,-2147483648),this[d]=h&255,this[d+1]=h>>>8,this[d+2]=h>>>16,this[d+3]=h>>>24,d+4},a.prototype.writeInt32BE=function(h,d,L){return h=+h,d=d>>>0,L||Ft(this,h,d,4,2147483647,-2147483648),h<0&&(h=4294967295+h+1),this[d]=h>>>24,this[d+1]=h>>>16,this[d+2]=h>>>8,this[d+3]=h&255,d+4};function Wt(R,h,d,L,P,G){if(d+L>R.length)throw new RangeError("Index out of range");if(d<0)throw new RangeError("Index out of range")}function Mt(R,h,d,L,P){return h=+h,d=d>>>0,P||Wt(R,h,d,4),S.write(R,h,d,L,23,4),d+4}a.prototype.writeFloatLE=function(h,d,L){return Mt(this,h,d,!0,L)},a.prototype.writeFloatBE=function(h,d,L){return Mt(this,h,d,!1,L)};function T(R,h,d,L,P){return h=+h,d=d>>>0,P||Wt(R,h,d,8),S.write(R,h,d,L,52,8),d+8}a.prototype.writeDoubleLE=function(h,d,L){return T(this,h,d,!0,L)},a.prototype.writeDoubleBE=function(h,d,L){return T(this,h,d,!1,L)},a.prototype.copy=function(h,d,L,P){if(L||(L=0),!P&&P!==0&&(P=this.length),d>=h.length&&(d=h.length),d||(d=0),P>0&&P<L&&(P=L),P===L||h.length===0||this.length===0)return 0;if(d<0)throw new RangeError("targetStart out of bounds");if(L<0||L>=this.length)throw new RangeError("sourceStart out of bounds");if(P<0)throw new RangeError("sourceEnd out of bounds");P>this.length&&(P=this.length),h.length-d<P-L&&(P=h.length-d+L);var G=P-L,V;if(this===h&&L<d&&d<P)for(V=G-1;V>=0;--V)h[V+d]=this[V+L];else if(G<1e3)for(V=0;V<G;++V)h[V+d]=this[V+L];else Uint8Array.prototype.set.call(h,this.subarray(L,L+G),d);return G},a.prototype.fill=function(h,d,L,P){if(typeof h=="string"){if(typeof d=="string"?(P=d,d=0,L=this.length):typeof L=="string"&&(P=L,L=this.length),h.length===1){var G=h.charCodeAt(0);G<256&&(h=G)}if(P!==void 0&&typeof P!="string")throw new TypeError("encoding must be a string");if(typeof P=="string"&&!a.isEncoding(P))throw new TypeError("Unknown encoding: "+P)}else typeof h=="number"&&(h=h&255);if(d<0||this.length<d||this.length<L)throw new RangeError("Out of range index");if(L<=d)return this;d=d>>>0,L=L===void 0?this.length:L>>>0,h||(h=0);var V;if(typeof h=="number")for(V=d;V<L;++V)this[V]=h;else{var xt=a.isBuffer(h)?h:new a(h,P),Dt=xt.length;for(V=0;V<L-d;++V)this[V+d]=xt[V%Dt]}return this};var F=/[^+/0-9A-Za-z-_]/g;function Z(R){if(R=R.trim().replace(F,""),R.length<2)return"";for(;R.length%4!==0;)R=R+"=";return R}function rt(R){return R<16?"0"+R.toString(16):R.toString(16)}function pt(R,h){h=h||1/0;for(var d,L=R.length,P=null,G=[],V=0;V<L;++V){if(d=R.charCodeAt(V),d>55295&&d<57344){if(!P){if(d>56319){(h-=3)>-1&&G.push(239,191,189);continue}else if(V+1===L){(h-=3)>-1&&G.push(239,191,189);continue}P=d;continue}if(d<56320){(h-=3)>-1&&G.push(239,191,189),P=d;continue}d=(P-55296<<10|d-56320)+65536}else P&&(h-=3)>-1&&G.push(239,191,189);if(P=null,d<128){if((h-=1)<0)break;G.push(d)}else if(d<2048){if((h-=2)<0)break;G.push(d>>6|192,d&63|128)}else if(d<65536){if((h-=3)<0)break;G.push(d>>12|224,d>>6&63|128,d&63|128)}else if(d<1114112){if((h-=4)<0)break;G.push(d>>18|240,d>>12&63|128,d>>6&63|128,d&63|128)}else throw new Error("Invalid code point")}return G}function bt(R){for(var h=[],d=0;d<R.length;++d)h.push(R.charCodeAt(d)&255);return h}function Q(R,h){for(var d,L,P,G=[],V=0;V<R.length&&!((h-=2)<0);++V)d=R.charCodeAt(V),L=d>>8,P=d%256,G.push(P),G.push(L);return G}function ne(R){return I.toByteArray(Z(R))}function vt(R,h,d,L){for(var P=0;P<L&&!(P+d>=h.length||P>=R.length);++P)h[P+d]=R[P];return P}function oe(R){return R instanceof ArrayBuffer||R!=null&&R.constructor!=null&&R.constructor.name==="ArrayBuffer"&&typeof R.byteLength=="number"}function le(R){return typeof ArrayBuffer.isView=="function"&&ArrayBuffer.isView(R)}function be(R){return R!==R}}).call(p,y(1))},function(f,p){p.byteLength=a,p.toByteArray=b,p.fromByteArray=x;for(var y=[],g=[],I=typeof Uint8Array<"u"?Uint8Array:Array,S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k=0,w=S.length;k<w;++k)y[k]=S[k],g[S.charCodeAt(k)]=k;g[45]=62,g[95]=63;function v(O){var C=O.length;if(C%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return O[C-2]==="="?2:O[C-1]==="="?1:0}function a(O){return O.length*3/4-v(O)}function b(O){var C,A,J,B,H,St,tt=O.length;H=v(O),St=new I(tt*3/4-H),J=H>0?tt-4:tt;var kt=0;for(C=0,A=0;C<J;C+=4,A+=3)B=g[O.charCodeAt(C)]<<18|g[O.charCodeAt(C+1)]<<12|g[O.charCodeAt(C+2)]<<6|g[O.charCodeAt(C+3)],St[kt++]=B>>16&255,St[kt++]=B>>8&255,St[kt++]=B&255;return H===2?(B=g[O.charCodeAt(C)]<<2|g[O.charCodeAt(C+1)]>>4,St[kt++]=B&255):H===1&&(B=g[O.charCodeAt(C)]<<10|g[O.charCodeAt(C+1)]<<4|g[O.charCodeAt(C+2)]>>2,St[kt++]=B>>8&255,St[kt++]=B&255),St}function u(O){return y[O>>18&63]+y[O>>12&63]+y[O>>6&63]+y[O&63]}function N(O,C,A){for(var J,B=[],H=C;H<A;H+=3)J=(O[H]<<16)+(O[H+1]<<8)+O[H+2],B.push(u(J));return B.join("")}function x(O){for(var C,A=O.length,J=A%3,B="",H=[],St=16383,tt=0,kt=A-J;tt<kt;tt+=St)H.push(N(O,tt,tt+St>kt?kt:tt+St));return J===1?(C=O[A-1],B+=y[C>>2],B+=y[C<<4&63],B+="=="):J===2&&(C=(O[A-2]<<8)+O[A-1],B+=y[C>>10],B+=y[C>>4&63],B+=y[C<<2&63],B+="="),H.push(B),H.join("")}},function(f,p){p.read=function(y,g,I,S,k){var w,v,a=k*8-S-1,b=(1<<a)-1,u=b>>1,N=-7,x=I?k-1:0,O=I?-1:1,C=y[g+x];for(x+=O,w=C&(1<<-N)-1,C>>=-N,N+=a;N>0;w=w*256+y[g+x],x+=O,N-=8);for(v=w&(1<<-N)-1,w>>=-N,N+=S;N>0;v=v*256+y[g+x],x+=O,N-=8);if(w===0)w=1-u;else{if(w===b)return v?NaN:(C?-1:1)*(1/0);v=v+Math.pow(2,S),w=w-u}return(C?-1:1)*v*Math.pow(2,w-S)},p.write=function(y,g,I,S,k,w){var v,a,b,u=w*8-k-1,N=(1<<u)-1,x=N>>1,O=k===23?Math.pow(2,-24)-Math.pow(2,-77):0,C=S?0:w-1,A=S?1:-1,J=g<0||g===0&&1/g<0?1:0;for(g=Math.abs(g),isNaN(g)||g===1/0?(a=isNaN(g)?1:0,v=N):(v=Math.floor(Math.log(g)/Math.LN2),g*(b=Math.pow(2,-v))<1&&(v--,b*=2),v+x>=1?g+=O/b:g+=O*Math.pow(2,1-x),g*b>=2&&(v++,b/=2),v+x>=N?(a=0,v=N):v+x>=1?(a=(g*b-1)*Math.pow(2,k),v=v+x):(a=g*Math.pow(2,x-1)*Math.pow(2,k),v=0));k>=8;y[I+C]=a&255,C+=A,a/=256,k-=8);for(v=v<<k|a,u+=k;u>0;y[I+C]=v&255,C+=A,v/=256,u-=8);y[I+C-A]|=J*128}},function(f,p){f.exports=function(y){return y.webpackPolyfill||(y.deprecate=function(){},y.paths=[],y.children=[],y.webpackPolyfill=1),y}},function(f,p,y){var g=y(7),I=new g,S={};function k(v){S[v]||(typeof I[v]=="function"?S[v]=function(){return I[v].apply(I,arguments)}:S[v]=I[v])}for(var w in I)k(w);S.initializeTTYs=function(){I.stdin===null&&(I.initializeTTYs(),S.stdin=I.stdin,S.stdout=I.stdout,S.stderr=I.stderr)},I.nextTick(function(){S.initializeTTYs()}),f.exports=S},function(f,p,y){(function(g){var I=this&&this.__extends||function(b,u){for(var N in u)u.hasOwnProperty(N)&&(b[N]=u[N]);function x(){this.constructor=b}b.prototype=u===null?Object.create(u):(x.prototype=u.prototype,new x)},S=y(8),k=null,w=(function(){function b(u,N){this.fun=u,this.array=N}return b.prototype.run=function(){this.fun.apply(null,this.array)},b})(),v=(function(){function b(){this._queue=[],this._draining=!1,this._currentQueue=null,this._queueIndex=-1}return b.prototype.push=function(u){var N=this;this._queue.push(u)===1&&!this._draining&&setTimeout(function(){return N._drainQueue()},0)},b.prototype._cleanUpNextTick=function(){this._draining=!1,this._currentQueue&&this._currentQueue.length?this._queue=this._currentQueue.concat(this._queue):this._queueIndex=-1,this._queue.length&&this._drainQueue()},b.prototype._drainQueue=function(){var u=this;if(!this._draining){var N=setTimeout(function(){return u._cleanUpNextTick()});this._draining=!0;for(var x=this._queue.length;x;){for(this._currentQueue=this._queue,this._queue=[];++this._queueIndex<x;)this._currentQueue&&this._currentQueue[this._queueIndex].run();this._queueIndex=-1,x=this._queue.length}this._currentQueue=null,this._draining=!1,clearTimeout(N)}},b})(),a=(function(b){I(u,b);function u(){b.apply(this,arguments),this.startTime=Date.now(),this._cwd="/",this.platform="browser",this.argv=[],this.execArgv=[],this.stdout=null,this.stderr=null,this.stdin=null,this.domain=null,this._queue=new v,this.execPath=g,this.env={},this.exitCode=0,this._gid=1,this._uid=1,this.version="v5.0",this.versions={http_parser:"0.0",node:"5.0",v8:"0.0",uv:"0.0",zlib:"0.0",ares:"0.0",icu:"0.0",modules:"0",openssl:"0.0"},this.config={target_defaults:{cflags:[],default_configuration:"Release",defines:[],include_dirs:[],libraries:[]},variables:{clang:0,host_arch:"x32",node_install_npm:!1,node_install_waf:!1,node_prefix:"",node_shared_cares:!1,node_shared_http_parser:!1,node_shared_libuv:!1,node_shared_zlib:!1,node_shared_v8:!1,node_use_dtrace:!1,node_use_etw:!1,node_use_openssl:!1,node_shared_openssl:!1,strict_aliasing:!1,target_arch:"x32",v8_use_snapshot:!1,v8_no_strict_aliasing:0,visibility:""}},this.pid=Math.random()*1e3|0,this.title="node",this.arch="x32",this._mask=18,this.connected=void 0}return u.prototype.chdir=function(N){k===null&&(k=y(9)),this._cwd=k.resolve(N)},u.prototype.cwd=function(){return this._cwd},u.prototype.uptime=function(){return(Date.now()-this.startTime)/1e3|0},u.prototype.nextTick=function(N){for(var x=[],O=1;O<arguments.length;O++)x[O-1]=arguments[O];this._queue.push(new w(N,x))},u.prototype.abort=function(){this.emit("abort")},u.prototype.exit=function(N){this.exitCode=N,this.emit("exit",[N])},u.prototype.getgid=function(){return this._gid},u.prototype.setgid=function(N){typeof N=="number"?this._gid=N:this._gid=1},u.prototype.getuid=function(){return this._uid},u.prototype.setuid=function(N){typeof N=="number"?this._uid=N:this._uid=1},u.prototype.kill=function(N,x){this.emit("kill",[N,x])},u.prototype.memoryUsage=function(){return{rss:0,heapTotal:0,heapUsed:0}},u.prototype.umask=function(N){N===void 0&&(N=this._mask);var x=this._mask;return this._mask=N,this.emit("umask",[N]),x},u.prototype.hrtime=function(){var N;typeof performance<"u"?N=performance.now():Date.now?N=Date.now():N=new Date().getTime();var x=N/1e3|0;return N-=x*1e3,N=N*1e6|0,[x,N]},u.prototype.initializeTTYs=function(){if(this.stdout===null){var N=y(10);this.stdout=new N,this.stderr=new N,this.stdin=new N}},u.prototype.disconnect=function(){},u})(S.EventEmitter);f.exports=a}).call(p,"/")},function(f,p){function y(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}f.exports=y,y.EventEmitter=y,y.prototype._events=void 0,y.prototype._maxListeners=void 0,y.defaultMaxListeners=10,y.prototype.setMaxListeners=function(w){if(!I(w)||w<0||isNaN(w))throw TypeError("n must be a positive number");return this._maxListeners=w,this},y.prototype.emit=function(w){var v,a,b,u,N,x;if(this._events||(this._events={}),w==="error"&&(!this._events.error||S(this._events.error)&&!this._events.error.length)){if(v=arguments[1],v instanceof Error)throw v;var O=new Error('Uncaught, unspecified "error" event. ('+v+")");throw O.context=v,O}if(a=this._events[w],k(a))return!1;if(g(a))switch(arguments.length){case 1:a.call(this);break;case 2:a.call(this,arguments[1]);break;case 3:a.call(this,arguments[1],arguments[2]);break;default:u=Array.prototype.slice.call(arguments,1),a.apply(this,u)}else if(S(a))for(u=Array.prototype.slice.call(arguments,1),x=a.slice(),b=x.length,N=0;N<b;N++)x[N].apply(this,u);return!0},y.prototype.addListener=function(w,v){var a;if(!g(v))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",w,g(v.listener)?v.listener:v),this._events[w]?S(this._events[w])?this._events[w].push(v):this._events[w]=[this._events[w],v]:this._events[w]=v,S(this._events[w])&&!this._events[w].warned&&(k(this._maxListeners)?a=y.defaultMaxListeners:a=this._maxListeners,a&&a>0&&this._events[w].length>a&&(this._events[w].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[w].length),typeof console.trace=="function"&&console.trace())),this},y.prototype.on=y.prototype.addListener,y.prototype.once=function(w,v){if(!g(v))throw TypeError("listener must be a function");var a=!1;function b(){this.removeListener(w,b),a||(a=!0,v.apply(this,arguments))}return b.listener=v,this.on(w,b),this},y.prototype.removeListener=function(w,v){var a,b,u,N;if(!g(v))throw TypeError("listener must be a function");if(!this._events||!this._events[w])return this;if(a=this._events[w],u=a.length,b=-1,a===v||g(a.listener)&&a.listener===v)delete this._events[w],this._events.removeListener&&this.emit("removeListener",w,v);else if(S(a)){for(N=u;N-- >0;)if(a[N]===v||a[N].listener&&a[N].listener===v){b=N;break}if(b<0)return this;a.length===1?(a.length=0,delete this._events[w]):a.splice(b,1),this._events.removeListener&&this.emit("removeListener",w,v)}return this},y.prototype.removeAllListeners=function(w){var v,a;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[w]&&delete this._events[w],this;if(arguments.length===0){for(v in this._events)v!=="removeListener"&&this.removeAllListeners(v);return this.removeAllListeners("removeListener"),this._events={},this}if(a=this._events[w],g(a))this.removeListener(w,a);else if(a)for(;a.length;)this.removeListener(w,a[a.length-1]);return delete this._events[w],this},y.prototype.listeners=function(w){var v;return!this._events||!this._events[w]?v=[]:g(this._events[w])?v=[this._events[w]]:v=this._events[w].slice(),v},y.prototype.listenerCount=function(w){if(this._events){var v=this._events[w];if(g(v))return 1;if(v)return v.length}return 0},y.listenerCount=function(w,v){return w.listenerCount(v)};function g(w){return typeof w=="function"}function I(w){return typeof w=="number"}function S(w){return typeof w=="object"&&w!==null}function k(w){return w===void 0}},function(f,p,y){(function(g){var I=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;function S(w){var v=I.exec(w);return v.shift(),v}var k=(function(){function w(){}return w.normalize=function(v){v===""&&(v=".");var a=v.charAt(0)===w.sep;v=w._removeDuplicateSeps(v);for(var b=v.split(w.sep),u=[],N=0;N<b.length;N++){var x=b[N];x!=="."&&(x===".."&&(a||!a&&u.length>0&&u[0]!=="..")?u.pop():u.push(x))}return!a&&u.length<2&&(u.length===1?u[0]===""&&u.unshift("."):u.push(".")),v=u.join(w.sep),a&&v.charAt(0)!==w.sep&&(v=w.sep+v),v},w.join=function(){for(var v=[],a=0;a<arguments.length;a++)v[a-0]=arguments[a];for(var b=[],u=0;u<v.length;u++){var N=v[u];if(typeof N!="string")throw new TypeError("Invalid argument type to path.join: "+typeof N);N!==""&&b.push(N)}return w.normalize(b.join(w.sep))},w.resolve=function(){for(var v=[],a=0;a<arguments.length;a++)v[a-0]=arguments[a];for(var b=[],u=0;u<v.length;u++){var N=v[u];if(typeof N!="string")throw new TypeError("Invalid argument type to path.join: "+typeof N);N!==""&&(N.charAt(0)===w.sep&&(b=[]),b.push(N))}var x=w.normalize(b.join(w.sep));if(x.length>1&&x.charAt(x.length-1)===w.sep)return x.substr(0,x.length-1);if(x.charAt(0)!==w.sep){x.charAt(0)==="."&&(x.length===1||x.charAt(1)===w.sep)&&(x=x.length===1?"":x.substr(2));var O=g.cwd();x!==""?x=this.normalize(O+(O!=="/"?w.sep:"")+x):x=O}return x},w.relative=function(v,a){var b;v=w.resolve(v),a=w.resolve(a);var u=v.split(w.sep),N=a.split(w.sep);N.shift(),u.shift();var x=0,O=[];for(b=0;b<u.length;b++){var C=u[b];if(C!==N[b]){x=u.length-b;break}}O=N.slice(b),u.length===1&&u[0]===""&&(x=0),x>u.length&&(x=u.length);var A="";for(b=0;b<x;b++)A+="../";return A+=O.join(w.sep),A.length>1&&A.charAt(A.length-1)===w.sep&&(A=A.substr(0,A.length-1)),A},w.dirname=function(v){v=w._removeDuplicateSeps(v);var a=v.charAt(0)===w.sep,b=v.split(w.sep);return b.pop()===""&&b.length>0&&b.pop(),b.length>1||b.length===1&&!a?b.join(w.sep):a?w.sep:"."},w.basename=function(v,a){if(a===void 0&&(a=""),v==="")return v;v=w.normalize(v);var b=v.split(w.sep),u=b[b.length-1];if(u===""&&b.length>1)return b[b.length-2];if(a.length>0){var N=u.substr(u.length-a.length);if(N===a)return u.substr(0,u.length-a.length)}return u},w.extname=function(v){v=w.normalize(v);var a=v.split(w.sep);if(v=a.pop(),v===""&&a.length>0&&(v=a.pop()),v==="..")return"";var b=v.lastIndexOf(".");return b===-1||b===0?"":v.substr(b)},w.isAbsolute=function(v){return v.length>0&&v.charAt(0)===w.sep},w._makeLong=function(v){return v},w.parse=function(v){var a=S(v);return{root:a[0],dir:a[0]+a[1].slice(0,-1),base:a[2],ext:a[3],name:a[2].slice(0,a[2].length-a[3].length)}},w.format=function(v){if(v===null||typeof v!="object")throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof v);var a=v.root||"";if(typeof a!="string")throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof v.root);var b=v.dir?v.dir+w.sep:"",u=v.base||"";return b+u},w._removeDuplicateSeps=function(v){return v=v.replace(this._replaceRegex,this.sep),v},w.sep="/",w._replaceRegex=new RegExp("//+","g"),w.delimiter=":",w.posix=w,w.win32=w,w})();f.exports=k}).call(p,y(6))},function(f,p,y){(function(g){var I=this&&this.__extends||function(w,v){for(var a in v)v.hasOwnProperty(a)&&(w[a]=v[a]);function b(){this.constructor=w}w.prototype=v===null?Object.create(v):(b.prototype=v.prototype,new b)},S=y(11),k=(function(w){I(v,w);function v(){w.call(this),this.isRaw=!1,this.columns=80,this.rows=120,this.isTTY=!0,this._bufferedWrites=[],this._waitingForWrites=!1}return v.prototype.setRawMode=function(a){this.isRaw!==a&&(this.isRaw=a,this.emit("modeChange"))},v.prototype.changeColumns=function(a){a!==this.columns&&(this.columns=a,this.emit("resize"))},v.prototype.changeRows=function(a){a!==this.rows&&(this.rows=a,this.emit("resize"))},v.isatty=function(a){return a&&a instanceof v},v.prototype._write=function(a,b,u){var N;try{var x;typeof a=="string"?x=new g(a,b):x=a,this._bufferedWrites.push(x),this._waitingForWrites&&this._read(1024)}catch(O){N=O}finally{u(N)}},v.prototype._read=function(a){if(this._bufferedWrites.length===0)this._waitingForWrites=!0;else for(;this._bufferedWrites.length>0&&(this._waitingForWrites=this.push(this._bufferedWrites.shift()),!!this._waitingForWrites););},v})(S.Duplex);f.exports=k}).call(p,y(1))},function(f,p,y){f.exports=S;var g=y(8).EventEmitter,I=y(12);I(S,g),S.Readable=y(13),S.Writable=y(27),S.Duplex=y(28),S.Transform=y(29),S.PassThrough=y(30),S.Stream=S;function S(){g.call(this)}S.prototype.pipe=function(k,w){var v=this;function a(A){k.writable&&k.write(A)===!1&&v.pause&&v.pause()}v.on("data",a);function b(){v.readable&&v.resume&&v.resume()}k.on("drain",b),!k._isStdio&&(!w||w.end!==!1)&&(v.on("end",N),v.on("close",x));var u=!1;function N(){u||(u=!0,k.end())}function x(){u||(u=!0,typeof k.destroy=="function"&&k.destroy())}function O(A){if(C(),g.listenerCount(this,"error")===0)throw A}v.on("error",O),k.on("error",O);function C(){v.removeListener("data",a),k.removeListener("drain",b),v.removeListener("end",N),v.removeListener("close",x),v.removeListener("error",O),k.removeListener("error",O),v.removeListener("end",C),v.removeListener("close",C),k.removeListener("close",C)}return v.on("end",C),v.on("close",C),k.on("close",C),k.emit("pipe",v),k}},function(f,p){typeof Object.create=="function"?f.exports=function(g,I){g.super_=I,g.prototype=Object.create(I.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}})}:f.exports=function(g,I){g.super_=I;var S=function(){};S.prototype=I.prototype,g.prototype=new S,g.prototype.constructor=g}},function(f,p,y){(function(g){var I=(function(){try{return y(11)}catch{}})();p=f.exports=y(14),p.Stream=I||p,p.Readable=p,p.Writable=y(22),p.Duplex=y(21),p.Transform=y(25),p.PassThrough=y(26),!g.browser&&g.env.READABLE_STREAM==="disable"&&I&&(f.exports=I)}).call(p,y(6))},function(f,p,y){(function(g){f.exports=B;var I=y(15),S=y(16),k;B.ReadableState=J,y(8).EventEmitter;var w=function(T,F){return T.listeners(F).length},v;(function(){try{v=y(11)}catch{}finally{v||(v=y(8).EventEmitter)}})();var a=y(2).Buffer,b=y(17),u=y(18);u.inherits=y(12);var N=y(19),x=void 0;N&&N.debuglog?x=N.debuglog("stream"):x=function(){};var O=y(20),C;u.inherits(B,v);function A(T,F,Z){if(typeof T.prependListener=="function")return T.prependListener(F,Z);!T._events||!T._events[F]?T.on(F,Z):S(T._events[F])?T._events[F].unshift(Z):T._events[F]=[Z,T._events[F]]}function J(T,F){k=k||y(21),T=T||{},this.objectMode=!!T.objectMode,F instanceof k&&(this.objectMode=this.objectMode||!!T.readableObjectMode);var Z=T.highWaterMark,rt=this.objectMode?16:16*1024;this.highWaterMark=Z||Z===0?Z:rt,this.highWaterMark=~~this.highWaterMark,this.buffer=new O,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=T.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,T.encoding&&(C||(C=y(24).StringDecoder),this.decoder=new C(T.encoding),this.encoding=T.encoding)}function B(T){if(k=k||y(21),!(this instanceof B))return new B(T);this._readableState=new J(T,this),this.readable=!0,T&&typeof T.read=="function"&&(this._read=T.read),v.call(this)}B.prototype.push=function(T,F){var Z=this._readableState;return!Z.objectMode&&typeof T=="string"&&(F=F||Z.defaultEncoding,F!==Z.encoding&&(T=b.from(T,F),F="")),H(this,Z,T,F,!1)},B.prototype.unshift=function(T){var F=this._readableState;return H(this,F,T,"",!0)},B.prototype.isPaused=function(){return this._readableState.flowing===!1};function H(T,F,Z,rt,pt){var bt=z(F,Z);if(bt)T.emit("error",bt);else if(Z===null)F.reading=!1,et(T,F);else if(F.objectMode||Z&&Z.length>0)if(F.ended&&!pt){var Q=new Error("stream.push() after EOF");T.emit("error",Q)}else if(F.endEmitted&&pt){var ne=new Error("stream.unshift() after end event");T.emit("error",ne)}else{var vt;F.decoder&&!pt&&!rt&&(Z=F.decoder.write(Z),vt=!F.objectMode&&Z.length===0),pt||(F.reading=!1),vt||(F.flowing&&F.length===0&&!F.sync?(T.emit("data",Z),T.read(0)):(F.length+=F.objectMode?1:Z.length,pt?F.buffer.unshift(Z):F.buffer.push(Z),F.needReadable&&lt(T))),mt(T,F)}else pt||(F.reading=!1);return St(F)}function St(T){return!T.ended&&(T.needReadable||T.length<T.highWaterMark||T.length===0)}B.prototype.setEncoding=function(T){return C||(C=y(24).StringDecoder),this._readableState.decoder=new C(T),this._readableState.encoding=T,this};var tt=8388608;function kt(T){return T>=tt?T=tt:(T--,T|=T>>>1,T|=T>>>2,T|=T>>>4,T|=T>>>8,T|=T>>>16,T++),T}function dt(T,F){return T<=0||F.length===0&&F.ended?0:F.objectMode?1:T!==T?F.flowing&&F.length?F.buffer.head.data.length:F.length:(T>F.highWaterMark&&(F.highWaterMark=kt(T)),T<=F.length?T:F.ended?F.length:(F.needReadable=!0,0))}B.prototype.read=function(T){x("read",T),T=parseInt(T,10);var F=this._readableState,Z=T;if(T!==0&&(F.emittedReadable=!1),T===0&&F.needReadable&&(F.length>=F.highWaterMark||F.ended))return x("read: emitReadable",F.length,F.ended),F.length===0&&F.ended?_t(this):lt(this),null;if(T=dt(T,F),T===0&&F.ended)return F.length===0&&_t(this),null;var rt=F.needReadable;x("need readable",rt),(F.length===0||F.length-T<F.highWaterMark)&&(rt=!0,x("length less than watermark",rt)),F.ended||F.reading?(rt=!1,x("reading or ended",rt)):rt&&(x("do read"),F.reading=!0,F.sync=!0,F.length===0&&(F.needReadable=!0),this._read(F.highWaterMark),F.sync=!1,F.reading||(T=dt(Z,F)));var pt;return T>0?pt=K(T,F):pt=null,pt===null?(F.needReadable=!0,T=0):F.length-=T,F.length===0&&(F.ended||(F.needReadable=!0),Z!==T&&F.ended&&_t(this)),pt!==null&&this.emit("data",pt),pt};function z(T,F){var Z=null;return!a.isBuffer(F)&&typeof F!="string"&&F!==null&&F!==void 0&&!T.objectMode&&(Z=new TypeError("Invalid non-string/buffer chunk")),Z}function et(T,F){if(!F.ended){if(F.decoder){var Z=F.decoder.end();Z&&Z.length&&(F.buffer.push(Z),F.length+=F.objectMode?1:Z.length)}F.ended=!0,lt(T)}}function lt(T){var F=T._readableState;F.needReadable=!1,F.emittedReadable||(x("emitReadable",F.flowing),F.emittedReadable=!0,F.sync?I(Tt,T):Tt(T))}function Tt(T){x("emit readable"),T.emit("readable"),U(T)}function mt(T,F){F.readingMore||(F.readingMore=!0,I(Ct,T,F))}function Ct(T,F){for(var Z=F.length;!F.reading&&!F.flowing&&!F.ended&&F.length<F.highWaterMark&&(x("maybeReadMore read 0"),T.read(0),Z!==F.length);)Z=F.length;F.readingMore=!1}B.prototype._read=function(T){this.emit("error",new Error("_read() is not implemented"))},B.prototype.pipe=function(T,F){var Z=this,rt=this._readableState;switch(rt.pipesCount){case 0:rt.pipes=T;break;case 1:rt.pipes=[rt.pipes,T];break;default:rt.pipes.push(T);break}rt.pipesCount+=1,x("pipe count=%d opts=%j",rt.pipesCount,F);var pt=(!F||F.end!==!1)&&T!==g.stdout&&T!==g.stderr,bt=pt?ne:le;rt.endEmitted?I(bt):Z.once("end",bt),T.on("unpipe",Q);function Q(G){x("onunpipe"),G===Z&&le()}function ne(){x("onend"),T.end()}var vt=Lt(Z);T.on("drain",vt);var oe=!1;function le(){x("cleanup"),T.removeListener("close",d),T.removeListener("finish",L),T.removeListener("drain",vt),T.removeListener("error",h),T.removeListener("unpipe",Q),Z.removeListener("end",ne),Z.removeListener("end",le),Z.removeListener("data",R),oe=!0,rt.awaitDrain&&(!T._writableState||T._writableState.needDrain)&&vt()}var be=!1;Z.on("data",R);function R(G){x("ondata"),be=!1;var V=T.write(G);V===!1&&!be&&((rt.pipesCount===1&&rt.pipes===T||rt.pipesCount>1&&Mt(rt.pipes,T)!==-1)&&!oe&&(x("false write response, pause",Z._readableState.awaitDrain),Z._readableState.awaitDrain++,be=!0),Z.pause())}function h(G){x("onerror",G),P(),T.removeListener("error",h),w(T,"error")===0&&T.emit("error",G)}A(T,"error",h);function d(){T.removeListener("finish",L),P()}T.once("close",d);function L(){x("onfinish"),T.removeListener("close",d),P()}T.once("finish",L);function P(){x("unpipe"),Z.unpipe(T)}return T.emit("pipe",Z),rt.flowing||(x("pipe resume"),Z.resume()),T};function Lt(T){return function(){var F=T._readableState;x("pipeOnDrain",F.awaitDrain),F.awaitDrain&&F.awaitDrain--,F.awaitDrain===0&&w(T,"data")&&(F.flowing=!0,U(T))}}B.prototype.unpipe=function(T){var F=this._readableState;if(F.pipesCount===0)return this;if(F.pipesCount===1)return T&&T!==F.pipes?this:(T||(T=F.pipes),F.pipes=null,F.pipesCount=0,F.flowing=!1,T&&T.emit("unpipe",this),this);if(!T){var Z=F.pipes,rt=F.pipesCount;F.pipes=null,F.pipesCount=0,F.flowing=!1;for(var pt=0;pt<rt;pt++)Z[pt].emit("unpipe",this);return this}var bt=Mt(F.pipes,T);return bt===-1?this:(F.pipes.splice(bt,1),F.pipesCount-=1,F.pipesCount===1&&(F.pipes=F.pipes[0]),T.emit("unpipe",this),this)},B.prototype.on=function(T,F){var Z=v.prototype.on.call(this,T,F);if(T==="data")this._readableState.flowing!==!1&&this.resume();else if(T==="readable"){var rt=this._readableState;!rt.endEmitted&&!rt.readableListening&&(rt.readableListening=rt.needReadable=!0,rt.emittedReadable=!1,rt.reading?rt.length&&lt(this):I(Et,this))}return Z},B.prototype.addListener=B.prototype.on;function Et(T){x("readable nexttick read 0"),T.read(0)}B.prototype.resume=function(){var T=this._readableState;return T.flowing||(x("resume"),T.flowing=!0,Zt(this,T)),this};function Zt(T,F){F.resumeScheduled||(F.resumeScheduled=!0,I(j,T,F))}function j(T,F){F.reading||(x("resume read 0"),T.read(0)),F.resumeScheduled=!1,F.awaitDrain=0,T.emit("resume"),U(T),F.flowing&&!F.reading&&T.read(0)}B.prototype.pause=function(){return x("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(x("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function U(T){var F=T._readableState;for(x("flow",F.flowing);F.flowing&&T.read()!==null;);}B.prototype.wrap=function(T){var F=this._readableState,Z=!1,rt=this;T.on("end",function(){if(x("wrapped end"),F.decoder&&!F.ended){var Q=F.decoder.end();Q&&Q.length&&rt.push(Q)}rt.push(null)}),T.on("data",function(Q){if(x("wrapped data"),F.decoder&&(Q=F.decoder.write(Q)),!(F.objectMode&&Q==null)&&!(!F.objectMode&&(!Q||!Q.length))){var ne=rt.push(Q);ne||(Z=!0,T.pause())}});for(var pt in T)this[pt]===void 0&&typeof T[pt]=="function"&&(this[pt]=(function(Q){return function(){return T[Q].apply(T,arguments)}})(pt));var bt=["error","close","destroy","pause","resume"];return Wt(bt,function(Q){T.on(Q,rt.emit.bind(rt,Q))}),rt._read=function(Q){x("wrapped _read",Q),Z&&(Z=!1,T.resume())},rt},B._fromList=K;function K(T,F){if(F.length===0)return null;var Z;return F.objectMode?Z=F.buffer.shift():!T||T>=F.length?(F.decoder?Z=F.buffer.join(""):F.buffer.length===1?Z=F.buffer.head.data:Z=F.buffer.concat(F.length),F.buffer.clear()):Z=ft(T,F.buffer,F.decoder),Z}function ft(T,F,Z){var rt;return T<F.head.data.length?(rt=F.head.data.slice(0,T),F.head.data=F.head.data.slice(T)):T===F.head.data.length?rt=F.shift():rt=Z?Rt(T,F):gt(T,F),rt}function Rt(T,F){var Z=F.head,rt=1,pt=Z.data;for(T-=pt.length;Z=Z.next;){var bt=Z.data,Q=T>bt.length?bt.length:T;if(Q===bt.length?pt+=bt:pt+=bt.slice(0,T),T-=Q,T===0){Q===bt.length?(++rt,Z.next?F.head=Z.next:F.head=F.tail=null):(F.head=Z,Z.data=bt.slice(Q));break}++rt}return F.length-=rt,pt}function gt(T,F){var Z=b.allocUnsafe(T),rt=F.head,pt=1;for(rt.data.copy(Z),T-=rt.data.length;rt=rt.next;){var bt=rt.data,Q=T>bt.length?bt.length:T;if(bt.copy(Z,Z.length-T,0,Q),T-=Q,T===0){Q===bt.length?(++pt,rt.next?F.head=rt.next:F.head=F.tail=null):(F.head=rt,rt.data=bt.slice(Q));break}++pt}return F.length-=pt,Z}function _t(T){var F=T._readableState;if(F.length>0)throw new Error('"endReadable()" called on non-empty stream');F.endEmitted||(F.ended=!0,I(Ft,F,T))}function Ft(T,F){!T.endEmitted&&T.length===0&&(T.endEmitted=!0,F.readable=!1,F.emit("end"))}function Wt(T,F){for(var Z=0,rt=T.length;Z<rt;Z++)F(T[Z],Z)}function Mt(T,F){for(var Z=0,rt=T.length;Z<rt;Z++)if(T[Z]===F)return Z;return-1}}).call(p,y(6))},function(f,p,y){(function(g){!g.version||g.version.indexOf("v0.")===0||g.version.indexOf("v1.")===0&&g.version.indexOf("v1.8.")!==0?f.exports=I:f.exports=g.nextTick;function I(S,k,w,v){if(typeof S!="function")throw new TypeError('"callback" argument must be a function');var a=arguments.length,b,u;switch(a){case 0:case 1:return g.nextTick(S);case 2:return g.nextTick(function(){S.call(null,k)});case 3:return g.nextTick(function(){S.call(null,k,w)});case 4:return g.nextTick(function(){S.call(null,k,w,v)});default:for(b=new Array(a-1),u=0;u<b.length;)b[u++]=arguments[u];return g.nextTick(function(){S.apply(null,b)})}}}).call(p,y(6))},function(f,p){var y={}.toString;f.exports=Array.isArray||function(g){return y.call(g)=="[object Array]"}},function(f,p,y){(function(g){var I=y(2),S=I.Buffer,k=I.SlowBuffer,w=I.kMaxLength||2147483647;p.alloc=function(a,b,u){if(typeof S.alloc=="function")return S.alloc(a,b,u);if(typeof u=="number")throw new TypeError("encoding must not be number");if(typeof a!="number")throw new TypeError("size must be a number");if(a>w)throw new RangeError("size is too large");var N=u,x=b;x===void 0&&(N=void 0,x=0);var O=new S(a);if(typeof x=="string")for(var C=new S(x,N),A=C.length,J=-1;++J<a;)O[J]=C[J%A];else O.fill(x);return O},p.allocUnsafe=function(a){if(typeof S.allocUnsafe=="function")return S.allocUnsafe(a);if(typeof a!="number")throw new TypeError("size must be a number");if(a>w)throw new RangeError("size is too large");return new S(a)},p.from=function(a,b,u){if(typeof S.from=="function"&&(!g.Uint8Array||Uint8Array.from!==S.from))return S.from(a,b,u);if(typeof a=="number")throw new TypeError('"value" argument must not be a number');if(typeof a=="string")return new S(a,b);if(typeof ArrayBuffer<"u"&&a instanceof ArrayBuffer){var N=b;if(arguments.length===1)return new S(a);typeof N>"u"&&(N=0);var x=u;if(typeof x>"u"&&(x=a.byteLength-N),N>=a.byteLength)throw new RangeError("'offset' is out of bounds");if(x>a.byteLength-N)throw new RangeError("'length' is out of bounds");return new S(a.slice(N,N+x))}if(S.isBuffer(a)){var O=new S(a.length);return a.copy(O,0,0,a.length),O}if(a){if(Array.isArray(a)||typeof ArrayBuffer<"u"&&a.buffer instanceof ArrayBuffer||"length"in a)return new S(a);if(a.type==="Buffer"&&Array.isArray(a.data))return new S(a.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},p.allocUnsafeSlow=function(a){if(typeof S.allocUnsafeSlow=="function")return S.allocUnsafeSlow(a);if(typeof a!="number")throw new TypeError("size must be a number");if(a>=w)throw new RangeError("size is too large");return new k(a)}}).call(p,(function(){return this})())},function(f,p,y){(function(g){function I(H){return Array.isArray?Array.isArray(H):B(H)==="[object Array]"}p.isArray=I;function S(H){return typeof H=="boolean"}p.isBoolean=S;function k(H){return H===null}p.isNull=k;function w(H){return H==null}p.isNullOrUndefined=w;function v(H){return typeof H=="number"}p.isNumber=v;function a(H){return typeof H=="string"}p.isString=a;function b(H){return typeof H=="symbol"}p.isSymbol=b;function u(H){return H===void 0}p.isUndefined=u;function N(H){return B(H)==="[object RegExp]"}p.isRegExp=N;function x(H){return typeof H=="object"&&H!==null}p.isObject=x;function O(H){return B(H)==="[object Date]"}p.isDate=O;function C(H){return B(H)==="[object Error]"||H instanceof Error}p.isError=C;function A(H){return typeof H=="function"}p.isFunction=A;function J(H){return H===null||typeof H=="boolean"||typeof H=="number"||typeof H=="string"||typeof H=="symbol"||typeof H>"u"}p.isPrimitive=J,p.isBuffer=g.isBuffer;function B(H){return Object.prototype.toString.call(H)}}).call(p,y(1))},function(f,p){},function(f,p,y){y(2).Buffer;var g=y(17);f.exports=I;function I(){this.head=null,this.tail=null,this.length=0}I.prototype.push=function(S){var k={data:S,next:null};this.length>0?this.tail.next=k:this.head=k,this.tail=k,++this.length},I.prototype.unshift=function(S){var k={data:S,next:this.head};this.length===0&&(this.tail=k),this.head=k,++this.length},I.prototype.shift=function(){if(this.length!==0){var S=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,S}},I.prototype.clear=function(){this.head=this.tail=null,this.length=0},I.prototype.join=function(S){if(this.length===0)return"";for(var k=this.head,w=""+k.data;k=k.next;)w+=S+k.data;return w},I.prototype.concat=function(S){if(this.length===0)return g.alloc(0);if(this.length===1)return this.head.data;for(var k=g.allocUnsafe(S>>>0),w=this.head,v=0;w;)w.data.copy(k,v),v+=w.data.length,w=w.next;return k}},function(f,p,y){var g=Object.keys||function(O){var C=[];for(var A in O)C.push(A);return C};f.exports=u;var I=y(15),S=y(18);S.inherits=y(12);var k=y(14),w=y(22);S.inherits(u,k);for(var v=g(w.prototype),a=0;a<v.length;a++){var b=v[a];u.prototype[b]||(u.prototype[b]=w.prototype[b])}function u(O){if(!(this instanceof u))return new u(O);k.call(this,O),w.call(this,O),O&&O.readable===!1&&(this.readable=!1),O&&O.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,O&&O.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",N)}function N(){this.allowHalfOpen||this._writableState.ended||I(x,this)}function x(O){O.end()}},function(f,p,y){(function(g){f.exports=A;var I=y(15),S=!g.browser&&["v0.10","v0.9."].indexOf(g.version.slice(0,5))>-1?setImmediate:I,k;A.WritableState=O;var w=y(18);w.inherits=y(12);var v={deprecate:y(23)},a;(function(){try{a=y(11)}catch{}finally{a||(a=y(8).EventEmitter)}})();var b=y(2).Buffer,u=y(17);w.inherits(A,a);function N(){}function x(j,U,K){this.chunk=j,this.encoding=U,this.callback=K,this.next=null}function O(j,U){k=k||y(21),j=j||{},this.objectMode=!!j.objectMode,U instanceof k&&(this.objectMode=this.objectMode||!!j.writableObjectMode);var K=j.highWaterMark,ft=this.objectMode?16:16*1024;this.highWaterMark=K||K===0?K:ft,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var Rt=j.decodeStrings===!1;this.decodeStrings=!Rt,this.defaultEncoding=j.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(gt){z(U,gt)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new Zt(this)}O.prototype.getBuffer=function(){for(var U=this.bufferedRequest,K=[];U;)K.push(U),U=U.next;return K},(function(){try{Object.defineProperty(O.prototype,"buffer",{get:v.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch{}})();var C;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(C=Function.prototype[Symbol.hasInstance],Object.defineProperty(A,Symbol.hasInstance,{value:function(j){return C.call(this,j)?!0:j&&j._writableState instanceof O}})):C=function(j){return j instanceof this};function A(j){if(k=k||y(21),!C.call(A,this)&&!(this instanceof k))return new A(j);this._writableState=new O(j,this),this.writable=!0,j&&(typeof j.write=="function"&&(this._write=j.write),typeof j.writev=="function"&&(this._writev=j.writev)),a.call(this)}A.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function J(j,U){var K=new Error("write after end");j.emit("error",K),I(U,K)}function B(j,U,K,ft){var Rt=!0,gt=!1;return K===null?gt=new TypeError("May not write null values to stream"):typeof K!="string"&&K!==void 0&&!U.objectMode&&(gt=new TypeError("Invalid non-string/buffer chunk")),gt&&(j.emit("error",gt),I(ft,gt),Rt=!1),Rt}A.prototype.write=function(j,U,K){var ft=this._writableState,Rt=!1,gt=b.isBuffer(j);return typeof U=="function"&&(K=U,U=null),gt?U="buffer":U||(U=ft.defaultEncoding),typeof K!="function"&&(K=N),ft.ended?J(this,K):(gt||B(this,ft,j,K))&&(ft.pendingcb++,Rt=St(this,ft,gt,j,U,K)),Rt},A.prototype.cork=function(){var j=this._writableState;j.corked++},A.prototype.uncork=function(){var j=this._writableState;j.corked&&(j.corked--,!j.writing&&!j.corked&&!j.finished&&!j.bufferProcessing&&j.bufferedRequest&&Tt(this,j))},A.prototype.setDefaultEncoding=function(U){if(typeof U=="string"&&(U=U.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((U+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+U);return this._writableState.defaultEncoding=U,this};function H(j,U,K){return!j.objectMode&&j.decodeStrings!==!1&&typeof U=="string"&&(U=u.from(U,K)),U}function St(j,U,K,ft,Rt,gt){K||(ft=H(U,ft,Rt),b.isBuffer(ft)&&(Rt="buffer"));var _t=U.objectMode?1:ft.length;U.length+=_t;var Ft=U.length<U.highWaterMark;if(Ft||(U.needDrain=!0),U.writing||U.corked){var Wt=U.lastBufferedRequest;U.lastBufferedRequest=new x(ft,Rt,gt),Wt?Wt.next=U.lastBufferedRequest:U.bufferedRequest=U.lastBufferedRequest,U.bufferedRequestCount+=1}else tt(j,U,!1,_t,ft,Rt,gt);return Ft}function tt(j,U,K,ft,Rt,gt,_t){U.writelen=ft,U.writecb=_t,U.writing=!0,U.sync=!0,K?j._writev(Rt,U.onwrite):j._write(Rt,gt,U.onwrite),U.sync=!1}function kt(j,U,K,ft,Rt){--U.pendingcb,K?I(Rt,ft):Rt(ft),j._writableState.errorEmitted=!0,j.emit("error",ft)}function dt(j){j.writing=!1,j.writecb=null,j.length-=j.writelen,j.writelen=0}function z(j,U){var K=j._writableState,ft=K.sync,Rt=K.writecb;if(dt(K),U)kt(j,K,ft,U,Rt);else{var gt=mt(K);!gt&&!K.corked&&!K.bufferProcessing&&K.bufferedRequest&&Tt(j,K),ft?S(et,j,K,gt,Rt):et(j,K,gt,Rt)}}function et(j,U,K,ft){K||lt(j,U),U.pendingcb--,ft(),Lt(j,U)}function lt(j,U){U.length===0&&U.needDrain&&(U.needDrain=!1,j.emit("drain"))}function Tt(j,U){U.bufferProcessing=!0;var K=U.bufferedRequest;if(j._writev&&K&&K.next){var ft=U.bufferedRequestCount,Rt=new Array(ft),gt=U.corkedRequestsFree;gt.entry=K;for(var _t=0;K;)Rt[_t]=K,K=K.next,_t+=1;tt(j,U,!0,U.length,Rt,"",gt.finish),U.pendingcb++,U.lastBufferedRequest=null,gt.next?(U.corkedRequestsFree=gt.next,gt.next=null):U.corkedRequestsFree=new Zt(U)}else{for(;K;){var Ft=K.chunk,Wt=K.encoding,Mt=K.callback,T=U.objectMode?1:Ft.length;if(tt(j,U,!1,T,Ft,Wt,Mt),K=K.next,U.writing)break}K===null&&(U.lastBufferedRequest=null)}U.bufferedRequestCount=0,U.bufferedRequest=K,U.bufferProcessing=!1}A.prototype._write=function(j,U,K){K(new Error("_write() is not implemented"))},A.prototype._writev=null,A.prototype.end=function(j,U,K){var ft=this._writableState;typeof j=="function"?(K=j,j=null,U=null):typeof U=="function"&&(K=U,U=null),j!=null&&this.write(j,U),ft.corked&&(ft.corked=1,this.uncork()),!ft.ending&&!ft.finished&&Et(this,ft,K)};function mt(j){return j.ending&&j.length===0&&j.bufferedRequest===null&&!j.finished&&!j.writing}function Ct(j,U){U.prefinished||(U.prefinished=!0,j.emit("prefinish"))}function Lt(j,U){var K=mt(U);return K&&(U.pendingcb===0?(Ct(j,U),U.finished=!0,j.emit("finish")):Ct(j,U)),K}function Et(j,U,K){U.ending=!0,Lt(j,U),K&&(U.finished?I(K):j.once("finish",K)),U.ended=!0,j.writable=!1}function Zt(j){var U=this;this.next=null,this.entry=null,this.finish=function(K){var ft=U.entry;for(U.entry=null;ft;){var Rt=ft.callback;j.pendingcb--,Rt(K),ft=ft.next}j.corkedRequestsFree?j.corkedRequestsFree.next=U:j.corkedRequestsFree=U}}}).call(p,y(6))},function(f,p){(function(y){f.exports=g;function g(S,k){if(I("noDeprecation"))return S;var w=!1;function v(){if(!w){if(I("throwDeprecation"))throw new Error(k);I("traceDeprecation")?console.trace(k):console.warn(k),w=!0}return S.apply(this,arguments)}return v}function I(S){try{if(!y.localStorage)return!1}catch{return!1}var k=y.localStorage[S];return k==null?!1:String(k).toLowerCase()==="true"}}).call(p,(function(){return this})())},function(f,p,y){var g=y(2).Buffer,I=g.isEncoding||function(b){switch(b&&b.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function S(b){if(b&&!I(b))throw new Error("Unknown encoding: "+b)}var k=p.StringDecoder=function(b){switch(this.encoding=(b||"utf8").toLowerCase().replace(/[-_]/,""),S(b),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=v;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=a;break;default:this.write=w;return}this.charBuffer=new g(6),this.charReceived=0,this.charLength=0};k.prototype.write=function(b){for(var u="";this.charLength;){var N=b.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:b.length;if(b.copy(this.charBuffer,this.charReceived,0,N),this.charReceived+=N,this.charReceived<this.charLength)return"";b=b.slice(N,b.length),u=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var O=u.charCodeAt(u.length-1);if(O>=55296&&O<=56319){this.charLength+=this.surrogateSize,u="";continue}if(this.charReceived=this.charLength=0,b.length===0)return u;break}this.detectIncompleteChar(b);var x=b.length;this.charLength&&(b.copy(this.charBuffer,0,b.length-this.charReceived,x),x-=this.charReceived),u+=b.toString(this.encoding,0,x);var x=u.length-1,O=u.charCodeAt(x);if(O>=55296&&O<=56319){var C=this.surrogateSize;return this.charLength+=C,this.charReceived+=C,this.charBuffer.copy(this.charBuffer,C,0,C),b.copy(this.charBuffer,0,0,C),u.substring(0,x)}return u},k.prototype.detectIncompleteChar=function(b){for(var u=b.length>=3?3:b.length;u>0;u--){var N=b[b.length-u];if(u==1&&N>>5==6){this.charLength=2;break}if(u<=2&&N>>4==14){this.charLength=3;break}if(u<=3&&N>>3==30){this.charLength=4;break}}this.charReceived=u},k.prototype.end=function(b){var u="";if(b&&b.length&&(u=this.write(b)),this.charReceived){var N=this.charReceived,x=this.charBuffer,O=this.encoding;u+=x.slice(0,N).toString(O)}return u};function w(b){return b.toString(this.encoding)}function v(b){this.charReceived=b.length%2,this.charLength=this.charReceived?2:0}function a(b){this.charReceived=b.length%3,this.charLength=this.charReceived?3:0}},function(f,p,y){f.exports=w;var g=y(21),I=y(18);I.inherits=y(12),I.inherits(w,g);function S(a){this.afterTransform=function(b,u){return k(a,b,u)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function k(a,b,u){var N=a._transformState;N.transforming=!1;var x=N.writecb;if(!x)return a.emit("error",new Error("no writecb in Transform class"));N.writechunk=null,N.writecb=null,u!=null&&a.push(u),x(b);var O=a._readableState;O.reading=!1,(O.needReadable||O.length<O.highWaterMark)&&a._read(O.highWaterMark)}function w(a){if(!(this instanceof w))return new w(a);g.call(this,a),this._transformState=new S(this);var b=this;this._readableState.needReadable=!0,this._readableState.sync=!1,a&&(typeof a.transform=="function"&&(this._transform=a.transform),typeof a.flush=="function"&&(this._flush=a.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(u,N){v(b,u,N)}):v(b)})}w.prototype.push=function(a,b){return this._transformState.needTransform=!1,g.prototype.push.call(this,a,b)},w.prototype._transform=function(a,b,u){throw new Error("_transform() is not implemented")},w.prototype._write=function(a,b,u){var N=this._transformState;if(N.writecb=u,N.writechunk=a,N.writeencoding=b,!N.transforming){var x=this._readableState;(N.needTransform||x.needReadable||x.length<x.highWaterMark)&&this._read(x.highWaterMark)}},w.prototype._read=function(a){var b=this._transformState;b.writechunk!==null&&b.writecb&&!b.transforming?(b.transforming=!0,this._transform(b.writechunk,b.writeencoding,b.afterTransform)):b.needTransform=!0};function v(a,b,u){if(b)return a.emit("error",b);u!=null&&a.push(u);var N=a._writableState,x=a._transformState;if(N.length)throw new Error("Calling transform done when ws.length != 0");if(x.transforming)throw new Error("Calling transform done when still transforming");return a.push(null)}},function(f,p,y){f.exports=S;var g=y(25),I=y(18);I.inherits=y(12),I.inherits(S,g);function S(k){if(!(this instanceof S))return new S(k);g.call(this,k)}S.prototype._transform=function(k,w,v){v(null,k)}},function(f,p,y){f.exports=y(22)},function(f,p,y){f.exports=y(21)},function(f,p,y){f.exports=y(25)},function(f,p,y){f.exports=y(26)},function(f,p,y){var g=y(32),I=y(33),S=y(38),k=y(39),w=y(40),v=y(41),a=y(42),b=Object.prototype.toString;function u(O){if(!(this instanceof u))return new u(O);this.options=I.assign({chunkSize:16384,windowBits:0,to:""},O||{});var C=this.options;C.raw&&C.windowBits>=0&&C.windowBits<16&&(C.windowBits=-C.windowBits,C.windowBits===0&&(C.windowBits=-15)),C.windowBits>=0&&C.windowBits<16&&!(O&&O.windowBits)&&(C.windowBits+=32),C.windowBits>15&&C.windowBits<48&&(C.windowBits&15)===0&&(C.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new v,this.strm.avail_out=0;var A=g.inflateInit2(this.strm,C.windowBits);if(A!==k.Z_OK)throw new Error(w[A]);this.header=new a,g.inflateGetHeader(this.strm,this.header)}u.prototype.push=function(O,C){var A=this.strm,J=this.options.chunkSize,B=this.options.dictionary,H,St,tt,kt,dt,z,et=!1;if(this.ended)return!1;St=C===~~C?C:C===!0?k.Z_FINISH:k.Z_NO_FLUSH,typeof O=="string"?A.input=S.binstring2buf(O):b.call(O)==="[object ArrayBuffer]"?A.input=new Uint8Array(O):A.input=O,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new I.Buf8(J),A.next_out=0,A.avail_out=J),H=g.inflate(A,k.Z_NO_FLUSH),H===k.Z_NEED_DICT&&B&&(typeof B=="string"?z=S.string2buf(B):b.call(B)==="[object ArrayBuffer]"?z=new Uint8Array(B):z=B,H=g.inflateSetDictionary(this.strm,z)),H===k.Z_BUF_ERROR&&et===!0&&(H=k.Z_OK,et=!1),H!==k.Z_STREAM_END&&H!==k.Z_OK)return this.onEnd(H),this.ended=!0,!1;A.next_out&&(A.avail_out===0||H===k.Z_STREAM_END||A.avail_in===0&&(St===k.Z_FINISH||St===k.Z_SYNC_FLUSH))&&(this.options.to==="string"?(tt=S.utf8border(A.output,A.next_out),kt=A.next_out-tt,dt=S.buf2string(A.output,tt),A.next_out=kt,A.avail_out=J-kt,kt&&I.arraySet(A.output,A.output,tt,kt,0),this.onData(dt)):this.onData(I.shrinkBuf(A.output,A.next_out))),A.avail_in===0&&A.avail_out===0&&(et=!0)}while((A.avail_in>0||A.avail_out===0)&&H!==k.Z_STREAM_END);return H===k.Z_STREAM_END&&(St=k.Z_FINISH),St===k.Z_FINISH?(H=g.inflateEnd(this.strm),this.onEnd(H),this.ended=!0,H===k.Z_OK):(St===k.Z_SYNC_FLUSH&&(this.onEnd(k.Z_OK),A.avail_out=0),!0)},u.prototype.onData=function(O){this.chunks.push(O)},u.prototype.onEnd=function(O){O===k.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=I.flattenChunks(this.chunks)),this.chunks=[],this.err=O,this.msg=this.strm.msg};function N(O,C){var A=new u(C);if(A.push(O,!0),A.err)throw A.msg||w[A.err];return A.result}function x(O,C){return C=C||{},C.raw=!0,N(O,C)}p.Inflate=u,p.inflate=N,p.inflateRaw=x,p.ungzip=N},function(f,p,y){var g=y(33),I=y(34),S=y(35),k=y(36),w=y(37),v=0,a=1,b=2,u=4,N=5,x=6,O=0,C=1,A=2,J=-2,B=-3,H=-4,St=-5,tt=8,kt=1,dt=2,z=3,et=4,lt=5,Tt=6,mt=7,Ct=8,Lt=9,Et=10,Zt=11,j=12,U=13,K=14,ft=15,Rt=16,gt=17,_t=18,Ft=19,Wt=20,Mt=21,T=22,F=23,Z=24,rt=25,pt=26,bt=27,Q=28,ne=29,vt=30,oe=31,le=32,be=852,R=592,h=15,d=h;function L(W){return(W>>>24&255)+(W>>>8&65280)+((W&65280)<<8)+((W&255)<<24)}function P(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new g.Buf16(320),this.work=new g.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function G(W){var st;return!W||!W.state?J:(st=W.state,W.total_in=W.total_out=st.total=0,W.msg="",st.wrap&&(W.adler=st.wrap&1),st.mode=kt,st.last=0,st.havedict=0,st.dmax=32768,st.head=null,st.hold=0,st.bits=0,st.lencode=st.lendyn=new g.Buf32(be),st.distcode=st.distdyn=new g.Buf32(R),st.sane=1,st.back=-1,O)}function V(W){var st;return!W||!W.state?J:(st=W.state,st.wsize=0,st.whave=0,st.wnext=0,G(W))}function xt(W,st){var _,ct;return!W||!W.state||(ct=W.state,st<0?(_=0,st=-st):(_=(st>>4)+1,st<48&&(st&=15)),st&&(st<8||st>15))?J:(ct.window!==null&&ct.wbits!==st&&(ct.window=null),ct.wrap=_,ct.wbits=st,V(W))}function Dt(W,st){var _,ct;return W?(ct=new P,W.state=ct,ct.window=null,_=xt(W,st),_!==O&&(W.state=null),_):J}function Pt(W){return Dt(W,d)}var Vt=!0,At,ke;function Qe(W){if(Vt){var st;for(At=new g.Buf32(512),ke=new g.Buf32(32),st=0;st<144;)W.lens[st++]=8;for(;st<256;)W.lens[st++]=9;for(;st<280;)W.lens[st++]=7;for(;st<288;)W.lens[st++]=8;for(w(a,W.lens,0,288,At,0,W.work,{bits:9}),st=0;st<32;)W.lens[st++]=5;w(b,W.lens,0,32,ke,0,W.work,{bits:5}),Vt=!1}W.lencode=At,W.lenbits=9,W.distcode=ke,W.distbits=5}function je(W,st,_,ct){var Bt,ot=W.state;return ot.window===null&&(ot.wsize=1<<ot.wbits,ot.wnext=0,ot.whave=0,ot.window=new g.Buf8(ot.wsize)),ct>=ot.wsize?(g.arraySet(ot.window,st,_-ot.wsize,ot.wsize,0),ot.wnext=0,ot.whave=ot.wsize):(Bt=ot.wsize-ot.wnext,Bt>ct&&(Bt=ct),g.arraySet(ot.window,st,_-ct,Bt,ot.wnext),ct-=Bt,ct?(g.arraySet(ot.window,st,_-ct,ct,0),ot.wnext=ct,ot.whave=ot.wsize):(ot.wnext+=Bt,ot.wnext===ot.wsize&&(ot.wnext=0),ot.whave<ot.wsize&&(ot.whave+=Bt))),0}function We(W,st){var _,ct,Bt,ot,fe,at,Kt,Y,X,$e,Ut,ht,He,Ne,Ht=0,Ot,re,ue,ie,tn,qe,Xt,he,te=new g.Buf8(4),Ie,Se,In=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!W||!W.state||!W.output||!W.input&&W.avail_in!==0)return J;_=W.state,_.mode===j&&(_.mode=U),fe=W.next_out,Bt=W.output,Kt=W.avail_out,ot=W.next_in,ct=W.input,at=W.avail_in,Y=_.hold,X=_.bits,$e=at,Ut=Kt,he=O;t:for(;;)switch(_.mode){case kt:if(_.wrap===0){_.mode=U;break}for(;X<16;){if(at===0)break t;at--,Y+=ct[ot++]<<X,X+=8}if(_.wrap&2&&Y===35615){_.check=0,te[0]=Y&255,te[1]=Y>>>8&255,_.check=S(_.check,te,2,0),Y=0,X=0,_.mode=dt;break}if(_.flags=0,_.head&&(_.head.done=!1),!(_.wrap&1)||(((Y&255)<<8)+(Y>>8))%31){W.msg="incorrect header check",_.mode=vt;break}if((Y&15)!==tt){W.msg="unknown compression method",_.mode=vt;break}if(Y>>>=4,X-=4,Xt=(Y&15)+8,_.wbits===0)_.wbits=Xt;else if(Xt>_.wbits){W.msg="invalid window size",_.mode=vt;break}_.dmax=1<<Xt,W.adler=_.check=1,_.mode=Y&512?Et:j,Y=0,X=0;break;case dt:for(;X<16;){if(at===0)break t;at--,Y+=ct[ot++]<<X,X+=8}if(_.flags=Y,(_.flags&255)!==tt){W.msg="unknown compression method",_.mode=vt;break}if(_.flags&57344){W.msg="unknown header flags set",_.mode=vt;break}_.head&&(_.head.text=Y>>8&1),_.flags&512&&(te[0]=Y&255,te[1]=Y>>>8&255,_.check=S(_.check,te,2,0)),Y=0,X=0,_.mode=z;case z:for(;X<32;){if(at===0)break t;at--,Y+=ct[ot++]<<X,X+=8}_.head&&(_.head.time=Y),_.flags&512&&(te[0]=Y&255,te[1]=Y>>>8&255,te[2]=Y>>>16&255,te[3]=Y>>>24&255,_.check=S(_.check,te,4,0)),Y=0,X=0,_.mode=et;case et:for(;X<16;){if(at===0)break t;at--,Y+=ct[ot++]<<X,X+=8}_.head&&(_.head.xflags=Y&255,_.head.os=Y>>8),_.flags&512&&(te[0]=Y&255,te[1]=Y>>>8&255,_.check=S(_.check,te,2,0)),Y=0,X=0,_.mode=lt;case lt:if(_.flags&1024){for(;X<16;){if(at===0)break t;at--,Y+=ct[ot++]<<X,X+=8}_.length=Y,_.head&&(_.head.extra_len=Y),_.flags&512&&(te[0]=Y&255,te[1]=Y>>>8&255,_.check=S(_.check,te,2,0)),Y=0,X=0}else _.head&&(_.head.extra=null);_.mode=Tt;case Tt:if(_.flags&1024&&(ht=_.length,ht>at&&(ht=at),ht&&(_.head&&(Xt=_.head.extra_len-_.length,_.head.extra||(_.head.extra=new Array(_.head.extra_len)),g.arraySet(_.head.extra,ct,ot,ht,Xt)),_.flags&512&&(_.check=S(_.check,ct,ht,ot)),at-=ht,ot+=ht,_.length-=ht),_.length))break t;_.length=0,_.mode=mt;case mt:if(_.flags&2048){if(at===0)break t;ht=0;do Xt=ct[ot+ht++],_.head&&Xt&&_.length<65536&&(_.head.name+=String.fromCharCode(Xt));while(Xt&&ht<at);if(_.flags&512&&(_.check=S(_.check,ct,ht,ot)),at-=ht,ot+=ht,Xt)break t}else _.head&&(_.head.name=null);_.length=0,_.mode=Ct;case Ct:if(_.flags&4096){if(at===0)break t;ht=0;do Xt=ct[ot+ht++],_.head&&Xt&&_.length<65536&&(_.head.comment+=String.fromCharCode(Xt));while(Xt&&ht<at);if(_.flags&512&&(_.check=S(_.check,ct,ht,ot)),at-=ht,ot+=ht,Xt)break t}else _.head&&(_.head.comment=null);_.mode=Lt;case Lt:if(_.flags&512){for(;X<16;){if(at===0)break t;at--,Y+=ct[ot++]<<X,X+=8}if(Y!==(_.check&65535)){W.msg="header crc mismatch",_.mode=vt;break}Y=0,X=0}_.head&&(_.head.hcrc=_.flags>>9&1,_.head.done=!0),W.adler=_.check=0,_.mode=j;break;case Et:for(;X<32;){if(at===0)break t;at--,Y+=ct[ot++]<<X,X+=8}W.adler=_.check=L(Y),Y=0,X=0,_.mode=Zt;case Zt:if(_.havedict===0)return W.next_out=fe,W.avail_out=Kt,W.next_in=ot,W.avail_in=at,_.hold=Y,_.bits=X,A;W.adler=_.check=1,_.mode=j;case j:if(st===N||st===x)break t;case U:if(_.last){Y>>>=X&7,X-=X&7,_.mode=bt;break}for(;X<3;){if(at===0)break t;at--,Y+=ct[ot++]<<X,X+=8}switch(_.last=Y&1,Y>>>=1,X-=1,Y&3){case 0:_.mode=K;break;case 1:if(Qe(_),_.mode=Wt,st===x){Y>>>=2,X-=2;break t}break;case 2:_.mode=gt;break;case 3:W.msg="invalid block type",_.mode=vt}Y>>>=2,X-=2;break;case K:for(Y>>>=X&7,X-=X&7;X<32;){if(at===0)break t;at--,Y+=ct[ot++]<<X,X+=8}if((Y&65535)!==(Y>>>16^65535)){W.msg="invalid stored block lengths",_.mode=vt;break}if(_.length=Y&65535,Y=0,X=0,_.mode=ft,st===x)break t;case ft:_.mode=Rt;case Rt:if(ht=_.length,ht){if(ht>at&&(ht=at),ht>Kt&&(ht=Kt),ht===0)break t;g.arraySet(Bt,ct,ot,ht,fe),at-=ht,ot+=ht,Kt-=ht,fe+=ht,_.length-=ht;break}_.mode=j;break;case gt:for(;X<14;){if(at===0)break t;at--,Y+=ct[ot++]<<X,X+=8}if(_.nlen=(Y&31)+257,Y>>>=5,X-=5,_.ndist=(Y&31)+1,Y>>>=5,X-=5,_.ncode=(Y&15)+4,Y>>>=4,X-=4,_.nlen>286||_.ndist>30){W.msg="too many length or distance symbols",_.mode=vt;break}_.have=0,_.mode=_t;case _t:for(;_.have<_.ncode;){for(;X<3;){if(at===0)break t;at--,Y+=ct[ot++]<<X,X+=8}_.lens[In[_.have++]]=Y&7,Y>>>=3,X-=3}for(;_.have<19;)_.lens[In[_.have++]]=0;if(_.lencode=_.lendyn,_.lenbits=7,Ie={bits:_.lenbits},he=w(v,_.lens,0,19,_.lencode,0,_.work,Ie),_.lenbits=Ie.bits,he){W.msg="invalid code lengths set",_.mode=vt;break}_.have=0,_.mode=Ft;case Ft:for(;_.have<_.nlen+_.ndist;){for(;Ht=_.lencode[Y&(1<<_.lenbits)-1],Ot=Ht>>>24,re=Ht>>>16&255,ue=Ht&65535,!(Ot<=X);){if(at===0)break t;at--,Y+=ct[ot++]<<X,X+=8}if(ue<16)Y>>>=Ot,X-=Ot,_.lens[_.have++]=ue;else{if(ue===16){for(Se=Ot+2;X<Se;){if(at===0)break t;at--,Y+=ct[ot++]<<X,X+=8}if(Y>>>=Ot,X-=Ot,_.have===0){W.msg="invalid bit length repeat",_.mode=vt;break}Xt=_.lens[_.have-1],ht=3+(Y&3),Y>>>=2,X-=2}else if(ue===17){for(Se=Ot+3;X<Se;){if(at===0)break t;at--,Y+=ct[ot++]<<X,X+=8}Y>>>=Ot,X-=Ot,Xt=0,ht=3+(Y&7),Y>>>=3,X-=3}else{for(Se=Ot+7;X<Se;){if(at===0)break t;at--,Y+=ct[ot++]<<X,X+=8}Y>>>=Ot,X-=Ot,Xt=0,ht=11+(Y&127),Y>>>=7,X-=7}if(_.have+ht>_.nlen+_.ndist){W.msg="invalid bit length repeat",_.mode=vt;break}for(;ht--;)_.lens[_.have++]=Xt}}if(_.mode===vt)break;if(_.lens[256]===0){W.msg="invalid code -- missing end-of-block",_.mode=vt;break}if(_.lenbits=9,Ie={bits:_.lenbits},he=w(a,_.lens,0,_.nlen,_.lencode,0,_.work,Ie),_.lenbits=Ie.bits,he){W.msg="invalid literal/lengths set",_.mode=vt;break}if(_.distbits=6,_.distcode=_.distdyn,Ie={bits:_.distbits},he=w(b,_.lens,_.nlen,_.ndist,_.distcode,0,_.work,Ie),_.distbits=Ie.bits,he){W.msg="invalid distances set",_.mode=vt;break}if(_.mode=Wt,st===x)break t;case Wt:_.mode=Mt;case Mt:if(at>=6&&Kt>=258){W.next_out=fe,W.avail_out=Kt,W.next_in=ot,W.avail_in=at,_.hold=Y,_.bits=X,k(W,Ut),fe=W.next_out,Bt=W.output,Kt=W.avail_out,ot=W.next_in,ct=W.input,at=W.avail_in,Y=_.hold,X=_.bits,_.mode===j&&(_.back=-1);break}for(_.back=0;Ht=_.lencode[Y&(1<<_.lenbits)-1],Ot=Ht>>>24,re=Ht>>>16&255,ue=Ht&65535,!(Ot<=X);){if(at===0)break t;at--,Y+=ct[ot++]<<X,X+=8}if(re&&(re&240)===0){for(ie=Ot,tn=re,qe=ue;Ht=_.lencode[qe+((Y&(1<<ie+tn)-1)>>ie)],Ot=Ht>>>24,re=Ht>>>16&255,ue=Ht&65535,!(ie+Ot<=X);){if(at===0)break t;at--,Y+=ct[ot++]<<X,X+=8}Y>>>=ie,X-=ie,_.back+=ie}if(Y>>>=Ot,X-=Ot,_.back+=Ot,_.length=ue,re===0){_.mode=pt;break}if(re&32){_.back=-1,_.mode=j;break}if(re&64){W.msg="invalid literal/length code",_.mode=vt;break}_.extra=re&15,_.mode=T;case T:if(_.extra){for(Se=_.extra;X<Se;){if(at===0)break t;at--,Y+=ct[ot++]<<X,X+=8}_.length+=Y&(1<<_.extra)-1,Y>>>=_.extra,X-=_.extra,_.back+=_.extra}_.was=_.length,_.mode=F;case F:for(;Ht=_.distcode[Y&(1<<_.distbits)-1],Ot=Ht>>>24,re=Ht>>>16&255,ue=Ht&65535,!(Ot<=X);){if(at===0)break t;at--,Y+=ct[ot++]<<X,X+=8}if((re&240)===0){for(ie=Ot,tn=re,qe=ue;Ht=_.distcode[qe+((Y&(1<<ie+tn)-1)>>ie)],Ot=Ht>>>24,re=Ht>>>16&255,ue=Ht&65535,!(ie+Ot<=X);){if(at===0)break t;at--,Y+=ct[ot++]<<X,X+=8}Y>>>=ie,X-=ie,_.back+=ie}if(Y>>>=Ot,X-=Ot,_.back+=Ot,re&64){W.msg="invalid distance code",_.mode=vt;break}_.offset=ue,_.extra=re&15,_.mode=Z;case Z:if(_.extra){for(Se=_.extra;X<Se;){if(at===0)break t;at--,Y+=ct[ot++]<<X,X+=8}_.offset+=Y&(1<<_.extra)-1,Y>>>=_.extra,X-=_.extra,_.back+=_.extra}if(_.offset>_.dmax){W.msg="invalid distance too far back",_.mode=vt;break}_.mode=rt;case rt:if(Kt===0)break t;if(ht=Ut-Kt,_.offset>ht){if(ht=_.offset-ht,ht>_.whave&&_.sane){W.msg="invalid distance too far back",_.mode=vt;break}ht>_.wnext?(ht-=_.wnext,He=_.wsize-ht):He=_.wnext-ht,ht>_.length&&(ht=_.length),Ne=_.window}else Ne=Bt,He=fe-_.offset,ht=_.length;ht>Kt&&(ht=Kt),Kt-=ht,_.length-=ht;do Bt[fe++]=Ne[He++];while(--ht);_.length===0&&(_.mode=Mt);break;case pt:if(Kt===0)break t;Bt[fe++]=_.length,Kt--,_.mode=Mt;break;case bt:if(_.wrap){for(;X<32;){if(at===0)break t;at--,Y|=ct[ot++]<<X,X+=8}if(Ut-=Kt,W.total_out+=Ut,_.total+=Ut,Ut&&(W.adler=_.check=_.flags?S(_.check,Bt,Ut,fe-Ut):I(_.check,Bt,Ut,fe-Ut)),Ut=Kt,(_.flags?Y:L(Y))!==_.check){W.msg="incorrect data check",_.mode=vt;break}Y=0,X=0}_.mode=Q;case Q:if(_.wrap&&_.flags){for(;X<32;){if(at===0)break t;at--,Y+=ct[ot++]<<X,X+=8}if(Y!==(_.total&4294967295)){W.msg="incorrect length check",_.mode=vt;break}Y=0,X=0}_.mode=ne;case ne:he=C;break t;case vt:he=B;break t;case oe:return H;case le:default:return J}return W.next_out=fe,W.avail_out=Kt,W.next_in=ot,W.avail_in=at,_.hold=Y,_.bits=X,(_.wsize||Ut!==W.avail_out&&_.mode<vt&&(_.mode<bt||st!==u))&&je(W,W.output,W.next_out,Ut-W.avail_out),$e-=W.avail_in,Ut-=W.avail_out,W.total_in+=$e,W.total_out+=Ut,_.total+=Ut,_.wrap&&Ut&&(W.adler=_.check=_.flags?S(_.check,Bt,Ut,W.next_out-Ut):I(_.check,Bt,Ut,W.next_out-Ut)),W.data_type=_.bits+(_.last?64:0)+(_.mode===j?128:0)+(_.mode===Wt||_.mode===ft?256:0),($e===0&&Ut===0||st===u)&&he===O&&(he=St),he}function Yn(W){if(!W||!W.state)return J;var st=W.state;return st.window&&(st.window=null),W.state=null,O}function Zn(W,st){var _;return!W||!W.state||(_=W.state,(_.wrap&2)===0)?J:(_.head=st,st.done=!1,O)}function Vn(W,st){var _=st.length,ct,Bt,ot;return!W||!W.state||(ct=W.state,ct.wrap!==0&&ct.mode!==Zt)?J:ct.mode===Zt&&(Bt=1,Bt=I(Bt,st,_,0),Bt!==ct.check)?B:(ot=je(W,st,_,_),ot?(ct.mode=oe,H):(ct.havedict=1,O))}p.inflateReset=V,p.inflateReset2=xt,p.inflateResetKeep=G,p.inflateInit=Pt,p.inflateInit2=Dt,p.inflate=We,p.inflateEnd=Yn,p.inflateGetHeader=Zn,p.inflateSetDictionary=Vn,p.inflateInfo="pako inflate (from Nodeca project)"},function(f,p){var y=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";p.assign=function(S){for(var k=Array.prototype.slice.call(arguments,1);k.length;){var w=k.shift();if(w){if(typeof w!="object")throw new TypeError(w+"must be non-object");for(var v in w)w.hasOwnProperty(v)&&(S[v]=w[v])}}return S},p.shrinkBuf=function(S,k){return S.length===k?S:S.subarray?S.subarray(0,k):(S.length=k,S)};var g={arraySet:function(S,k,w,v,a){if(k.subarray&&S.subarray){S.set(k.subarray(w,w+v),a);return}for(var b=0;b<v;b++)S[a+b]=k[w+b]},flattenChunks:function(S){var k,w,v,a,b,u;for(v=0,k=0,w=S.length;k<w;k++)v+=S[k].length;for(u=new Uint8Array(v),a=0,k=0,w=S.length;k<w;k++)b=S[k],u.set(b,a),a+=b.length;return u}},I={arraySet:function(S,k,w,v,a){for(var b=0;b<v;b++)S[a+b]=k[w+b]},flattenChunks:function(S){return[].concat.apply([],S)}};p.setTyped=function(S){S?(p.Buf8=Uint8Array,p.Buf16=Uint16Array,p.Buf32=Int32Array,p.assign(p,g)):(p.Buf8=Array,p.Buf16=Array,p.Buf32=Array,p.assign(p,I))},p.setTyped(y)},function(f,p){function y(g,I,S,k){for(var w=g&65535|0,v=g>>>16&65535|0,a=0;S!==0;){a=S>2e3?2e3:S,S-=a;do w=w+I[k++]|0,v=v+w|0;while(--a);w%=65521,v%=65521}return w|v<<16|0}f.exports=y},function(f,p){function y(){for(var S,k=[],w=0;w<256;w++){S=w;for(var v=0;v<8;v++)S=S&1?3988292384^S>>>1:S>>>1;k[w]=S}return k}var g=y();function I(S,k,w,v){var a=g,b=v+w;S^=-1;for(var u=v;u<b;u++)S=S>>>8^a[(S^k[u])&255];return S^-1}f.exports=I},function(f,p){var y=30,g=12;f.exports=function(S,k){var w,v,a,b,u,N,x,O,C,A,J,B,H,St,tt,kt,dt,z,et,lt,Tt,mt,Ct,Lt,Et;w=S.state,v=S.next_in,Lt=S.input,a=v+(S.avail_in-5),b=S.next_out,Et=S.output,u=b-(k-S.avail_out),N=b+(S.avail_out-257),x=w.dmax,O=w.wsize,C=w.whave,A=w.wnext,J=w.window,B=w.hold,H=w.bits,St=w.lencode,tt=w.distcode,kt=(1<<w.lenbits)-1,dt=(1<<w.distbits)-1;t:do{H<15&&(B+=Lt[v++]<<H,H+=8,B+=Lt[v++]<<H,H+=8),z=St[B&kt];e:for(;;){if(et=z>>>24,B>>>=et,H-=et,et=z>>>16&255,et===0)Et[b++]=z&65535;else if(et&16){lt=z&65535,et&=15,et&&(H<et&&(B+=Lt[v++]<<H,H+=8),lt+=B&(1<<et)-1,B>>>=et,H-=et),H<15&&(B+=Lt[v++]<<H,H+=8,B+=Lt[v++]<<H,H+=8),z=tt[B&dt];n:for(;;){if(et=z>>>24,B>>>=et,H-=et,et=z>>>16&255,et&16){if(Tt=z&65535,et&=15,H<et&&(B+=Lt[v++]<<H,H+=8,H<et&&(B+=Lt[v++]<<H,H+=8)),Tt+=B&(1<<et)-1,Tt>x){S.msg="invalid distance too far back",w.mode=y;break t}if(B>>>=et,H-=et,et=b-u,Tt>et){if(et=Tt-et,et>C&&w.sane){S.msg="invalid distance too far back",w.mode=y;break t}if(mt=0,Ct=J,A===0){if(mt+=O-et,et<lt){lt-=et;do Et[b++]=J[mt++];while(--et);mt=b-Tt,Ct=Et}}else if(A<et){if(mt+=O+A-et,et-=A,et<lt){lt-=et;do Et[b++]=J[mt++];while(--et);if(mt=0,A<lt){et=A,lt-=et;do Et[b++]=J[mt++];while(--et);mt=b-Tt,Ct=Et}}}else if(mt+=A-et,et<lt){lt-=et;do Et[b++]=J[mt++];while(--et);mt=b-Tt,Ct=Et}for(;lt>2;)Et[b++]=Ct[mt++],Et[b++]=Ct[mt++],Et[b++]=Ct[mt++],lt-=3;lt&&(Et[b++]=Ct[mt++],lt>1&&(Et[b++]=Ct[mt++]))}else{mt=b-Tt;do Et[b++]=Et[mt++],Et[b++]=Et[mt++],Et[b++]=Et[mt++],lt-=3;while(lt>2);lt&&(Et[b++]=Et[mt++],lt>1&&(Et[b++]=Et[mt++]))}}else if((et&64)===0){z=tt[(z&65535)+(B&(1<<et)-1)];continue n}else{S.msg="invalid distance code",w.mode=y;break t}break}}else if((et&64)===0){z=St[(z&65535)+(B&(1<<et)-1)];continue e}else if(et&32){w.mode=g;break t}else{S.msg="invalid literal/length code",w.mode=y;break t}break}}while(v<a&&b<N);lt=H>>3,v-=lt,H-=lt<<3,B&=(1<<H)-1,S.next_in=v,S.next_out=b,S.avail_in=v<a?5+(a-v):5-(v-a),S.avail_out=b<N?257+(N-b):257-(b-N),w.hold=B,w.bits=H}},function(f,p,y){var g=y(33),I=15,S=852,k=592,w=0,v=1,a=2,b=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],N=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],x=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];f.exports=function(C,A,J,B,H,St,tt,kt){var dt=kt.bits,z=0,et=0,lt=0,Tt=0,mt=0,Ct=0,Lt=0,Et=0,Zt=0,j=0,U,K,ft,Rt,gt,_t=null,Ft=0,Wt,Mt=new g.Buf16(I+1),T=new g.Buf16(I+1),F=null,Z=0,rt,pt,bt;for(z=0;z<=I;z++)Mt[z]=0;for(et=0;et<B;et++)Mt[A[J+et]]++;for(mt=dt,Tt=I;Tt>=1&&Mt[Tt]===0;Tt--);if(mt>Tt&&(mt=Tt),Tt===0)return H[St++]=1<<24|64<<16|0,H[St++]=1<<24|64<<16|0,kt.bits=1,0;for(lt=1;lt<Tt&&Mt[lt]===0;lt++);for(mt<lt&&(mt=lt),Et=1,z=1;z<=I;z++)if(Et<<=1,Et-=Mt[z],Et<0)return-1;if(Et>0&&(C===w||Tt!==1))return-1;for(T[1]=0,z=1;z<I;z++)T[z+1]=T[z]+Mt[z];for(et=0;et<B;et++)A[J+et]!==0&&(tt[T[A[J+et]]++]=et);if(C===w?(_t=F=tt,Wt=19):C===v?(_t=b,Ft-=257,F=u,Z-=257,Wt=256):(_t=N,F=x,Wt=-1),j=0,et=0,z=lt,gt=St,Ct=mt,Lt=0,ft=-1,Zt=1<<mt,Rt=Zt-1,C===v&&Zt>S||C===a&&Zt>k)return 1;for(;;){rt=z-Lt,tt[et]<Wt?(pt=0,bt=tt[et]):tt[et]>Wt?(pt=F[Z+tt[et]],bt=_t[Ft+tt[et]]):(pt=96,bt=0),U=1<<z-Lt,K=1<<Ct,lt=K;do K-=U,H[gt+(j>>Lt)+K]=rt<<24|pt<<16|bt|0;while(K!==0);for(U=1<<z-1;j&U;)U>>=1;if(U!==0?(j&=U-1,j+=U):j=0,et++,--Mt[z]===0){if(z===Tt)break;z=A[J+tt[et]]}if(z>mt&&(j&Rt)!==ft){for(Lt===0&&(Lt=mt),gt+=lt,Ct=z-Lt,Et=1<<Ct;Ct+Lt<Tt&&(Et-=Mt[Ct+Lt],!(Et<=0));)Ct++,Et<<=1;if(Zt+=1<<Ct,C===v&&Zt>S||C===a&&Zt>k)return 1;ft=j&Rt,H[ft]=mt<<24|Ct<<16|gt-St|0}}return j!==0&&(H[gt+j]=z-Lt<<24|64<<16|0),kt.bits=mt,0}},function(f,p,y){var g=y(33),I=!0,S=!0;try{String.fromCharCode.apply(null,[0])}catch{I=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{S=!1}for(var k=new g.Buf8(256),w=0;w<256;w++)k[w]=w>=252?6:w>=248?5:w>=240?4:w>=224?3:w>=192?2:1;k[254]=k[254]=1,p.string2buf=function(a){var b,u,N,x,O,C=a.length,A=0;for(x=0;x<C;x++)u=a.charCodeAt(x),(u&64512)===55296&&x+1<C&&(N=a.charCodeAt(x+1),(N&64512)===56320&&(u=65536+(u-55296<<10)+(N-56320),x++)),A+=u<128?1:u<2048?2:u<65536?3:4;for(b=new g.Buf8(A),O=0,x=0;O<A;x++)u=a.charCodeAt(x),(u&64512)===55296&&x+1<C&&(N=a.charCodeAt(x+1),(N&64512)===56320&&(u=65536+(u-55296<<10)+(N-56320),x++)),u<128?b[O++]=u:u<2048?(b[O++]=192|u>>>6,b[O++]=128|u&63):u<65536?(b[O++]=224|u>>>12,b[O++]=128|u>>>6&63,b[O++]=128|u&63):(b[O++]=240|u>>>18,b[O++]=128|u>>>12&63,b[O++]=128|u>>>6&63,b[O++]=128|u&63);return b};function v(a,b){if(b<65537&&(a.subarray&&S||!a.subarray&&I))return String.fromCharCode.apply(null,g.shrinkBuf(a,b));for(var u="",N=0;N<b;N++)u+=String.fromCharCode(a[N]);return u}p.buf2binstring=function(a){return v(a,a.length)},p.binstring2buf=function(a){for(var b=new g.Buf8(a.length),u=0,N=b.length;u<N;u++)b[u]=a.charCodeAt(u);return b},p.buf2string=function(a,b){var u,N,x,O,C=b||a.length,A=new Array(C*2);for(N=0,u=0;u<C;){if(x=a[u++],x<128){A[N++]=x;continue}if(O=k[x],O>4){A[N++]=65533,u+=O-1;continue}for(x&=O===2?31:O===3?15:7;O>1&&u<C;)x=x<<6|a[u++]&63,O--;if(O>1){A[N++]=65533;continue}x<65536?A[N++]=x:(x-=65536,A[N++]=55296|x>>10&1023,A[N++]=56320|x&1023)}return v(A,N)},p.utf8border=function(a,b){var u;for(b=b||a.length,b>a.length&&(b=a.length),u=b-1;u>=0&&(a[u]&192)===128;)u--;return u<0||u===0?b:u+k[a[u]]>b?u:b}},function(f,p){f.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(f,p){f.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(f,p){function y(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}f.exports=y},function(f,p){function y(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}f.exports=y}])})})(Hn)),Hn.exports}var zs=Us();const Ri=Ps(zs),Wn={STORAGE_KEY:"desktopOS_fileSystem"},ee={IMAGE:"image",TEXT:"text",OTHER:"other"},qn={home:{reeyuki:{Documents:{"INFO.txt":{type:"file",content:"Files you saved in notepad get saved in your browser session.",kind:ee.TEXT,icon:"/static/icons/notepad.webp"}},Pictures:{"wallpaper1.webp":{type:"file",content:"/static/wallpapers/wallpaper1.webp",kind:ee.IMAGE,icon:"/static/wallpapers/wallpaper1.webp"},"wallpaper2.webp":{type:"file",content:"/static/wallpapers/wallpaper2.webp",kind:ee.IMAGE,icon:"/static/wallpapers/wallpaper2.webp"},"wallpaper3.webp":{type:"file",content:"/static/wallpapers/wallpaper3.webp",kind:ee.IMAGE,icon:"/static/wallpapers/wallpaper3.webp"},"wallpaper4.webp":{type:"file",content:"/static/wallpapers/wallpaper4.webp",kind:ee.IMAGE,icon:"/static/wallpapers/wallpaper4.webp"},"wallpaper5.webp":{type:"file",content:"/static/wallpapers/wallpaper5.webp",kind:ee.IMAGE,icon:"/static/wallpapers/wallpaper5.webp"},"wallpaper6.webp":{type:"file",content:"/static/wallpapers/wallpaper6.webp",kind:ee.IMAGE,icon:"/static/wallpapers/wallpaper6.webp"},"wallpaper7.webp":{type:"file",content:"/static/wallpapers/wallpaper7.webp",kind:ee.IMAGE,icon:"/static/wallpapers/wallpaper7.webp"},"wallpaper8.webp":{type:"file",content:"/static/wallpapers/wallpaper8.webp",kind:ee.IMAGE,icon:"/static/wallpapers/wallpaper8.webp"},"wallpaper9.webp":{type:"file",content:"/static/wallpapers/wallpaper9.webp",kind:ee.IMAGE,icon:"/static/wallpapers/wallpaper9.webp"},"wallpaper10.webp":{type:"file",content:"/static/wallpapers/wallpaper10.webp",kind:ee.IMAGE,icon:"/static/wallpapers/wallpaper10.webp"}},Music:{}}}};function Ti(it,c){for(const f in it)f in c?typeof it[f]=="object"&&it[f]!==null&&!Array.isArray(it[f])&&Ti(it[f],c[f]):c[f]=it[f];return c}class js{constructor(){this.fsReady=this.initFS()}async initFS(){return new Promise(c=>{Ri.configure({fs:"IndexedDB",options:{}},()=>{this.fs=Ri.BFSRequire("fs"),this.loadFromStorage(),c()})})}async loadFromStorage(){if(!await this.exists(Wn.STORAGE_KEY))await this.writeFile(Wn.STORAGE_KEY,JSON.stringify(qn)),this.fileSystem=JSON.parse(JSON.stringify(qn));else{const f=await this.readFile(Wn.STORAGE_KEY),p=JSON.parse(f);this.fileSystem=Ti(qn,p),await this.saveToStorage()}}async saveToStorage(){await this.writeFile(Wn.STORAGE_KEY,JSON.stringify(this.fileSystem))}normalizePath(c){return typeof c=="string"?c.split("/").filter(f=>f):Array.isArray(c)?c.filter(f=>f):[]}getFolder(c){const f=this.normalizePath(c);let p=this.fileSystem;for(const y of f){if(!p[y])throw new Error("Invalid path");if(p[y].type==="file")throw new Error("Not a directory");p=p[y]}return p}inferKind(c){const f=c.split(".").pop().toLowerCase();return["png","jpg","jpeg","gif","webp"].includes(f)?ee.IMAGE:["txt","js","json","md","html","css"].includes(f)?ee.TEXT:ee.OTHER}async createFile(c,f,p="",y=null,g=null){await this.fsReady;const I=this.getFolder(c);if(I[f])throw new Error("Already exists");const S=y||this.inferKind(f),k=g||(S===ee.TEXT?"/static/icons/notepad.webp":"/static/icons/file.png");I[f]={type:"file",content:p,kind:S,icon:k},await this.saveToStorage()}async createFolder(c,f){await this.fsReady;const p=this.getFolder(c);if(p[f])throw new Error("Already exists");p[f]={},await this.saveToStorage()}async deleteItem(c,f){await this.fsReady;const p=this.getFolder(c);delete p[f],await this.saveToStorage()}async renameItem(c,f,p){await this.fsReady;const y=this.getFolder(c);y[p]=y[f],delete y[f],await this.saveToStorage()}async updateFile(c,f,p){await this.fsReady;const y=this.getFolder(c);if(y[f]?.type==="file")y[f].content=p;else{const g=this.inferKind(f),I=g===ee.TEXT?"/static/icons/notepad.webp":"/static/icons/file.png";y[f]={type:"file",content:p,kind:g,icon:I}}await this.saveToStorage()}getFileContent(c,f){const p=this.getFolder(c);return p[f]?.type==="file"?p[f].content:""}async getFileKind(c,f){await this.fsReady;const p=this.getFolder(c);return p[f]?.type==="file"?p[f].kind:null}async getFileIcon(c,f){await this.fsReady;const p=this.getFolder(c);return p[f]?.type==="file"?p[f].icon:null}isFile(c,f){return this.getFolder(c)[f]?.type==="file"}async writeFile(c,f){return new Promise((p,y)=>{this.fs.writeFile(c,f,g=>{g?y(g):p()})})}async readFile(c){return new Promise((f,p)=>{this.fs.readFile(c,"utf8",(y,g)=>{y?p(y):f(g)})})}async exists(c){return new Promise(f=>{this.fs.exists(c,p=>f(p))})}resolvePath(c,f=[]){const p=typeof c=="string"?c.split("/"):[];let y=c.startsWith("/")?[]:[...f];for(const g of p)!g||g==="."||(g===".."?y.pop():y.push(g));return y}}const Li="desktopOS_selectedWallpaper";class fr{static startClock(){const c=()=>{const f=new Date;document.getElementById("clock").textContent=f.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),document.getElementById("date").textContent=f.toLocaleDateString()};setInterval(c,1e3),c()}static setRandomWallpaper(){const c=qn.home.reeyuki.Pictures,f=Object.values(c).filter(y=>y.kind==="image").map(y=>y.content);if(!f.length)return;const p=f[Math.floor(Math.random()*f.length)];this.setWallpaper(p)}static setWallpaper(c){let f=document.getElementById("wallpaper-img");f||(f=document.createElement("img"),f.id="wallpaper-img",Object.assign(f.style,{position:"fixed",inset:"0",width:"100vw",height:"100vh",objectFit:"cover",zIndex:"-1",pointerEvents:"none",userSelect:"none"}),f.addEventListener("contextmenu",p=>p.preventDefault()),document.body.appendChild(f)),f.src=c,localStorage.setItem(Li,c)}static loadWallpaper(){const c=localStorage.getItem(Li);c?this.setWallpaper(c):this.setRandomWallpaper()}}const ce=document.getElementById("context-menu");class Ws{constructor(c,f,p){this.fs=c,this.wm=f,this.notepadApp=p,this.currentPath=["home","reeyuki"],this.fileSelectCallback=null,this.open=this.open.bind(this)}async open(c=null){if(this.fileSelectCallback=c,document.getElementById("explorer-win")){this.wm.bringToFront(document.getElementById("explorer-win"));return}const f=document.createElement("div");f.className="window",f.id="explorer-win",f.dataset.fullscreen="false",f.innerHTML=`
      <div class="window-header">
        <span>File Explorer</span>
        ${this.wm.getWindowControls()}
      </div>
      <div class="explorer-nav">
        <div class="back-btn" id="exp-back">← Back</div>
        <div id="exp-path" style="color:#555"></div>
      </div>
      <div class="explorer-container">
        <div class="explorer-sidebar">
          <div class="start-item" data-path="home/reeyuki/Documents">Documents</div>
          <div class="start-item" data-path="home/reeyuki/Pictures">Pictures</div>
          <div class="start-item" data-path="home/reeyuki/Music">Music</div>
        </div>
        <div class="explorer-main" id="explorer-view"></div>
      </div>
    `,Oe.appendChild(f);const p=f.querySelector("#explorer-view");p.style.width="600px",p.style.height="300px",this.wm.makeDraggable(f),this.wm.makeResizable(f),this.wm.setupWindowControls(f),setTimeout(()=>this.wm.bringToFront(f),0),this.wm.addToTaskbar(f.id,"File Explorer","/static/icons/file.png"),this.setupExplorerControls(f),await this.render()}setupExplorerControls(c){c.querySelector("#exp-back").onclick=async()=>{this.currentPath.length>1&&(this.currentPath.pop(),await this.render())},c.querySelectorAll(".explorer-sidebar .start-item").forEach(p=>{p.onclick=async()=>{const y=p.dataset.path.split("/").filter(g=>g);this.currentPath=y,await this.render()}});const f=c.querySelector("#explorer-view");f.addEventListener("contextmenu",p=>{p.target===f&&this.showBackgroundContextMenu(p)})}async renderMusicPage(c){c&&(c.innerHTML=`
      <div style="display: flex; gap: 20px; flex-wrap: wrap;">
        <iframe src="https://open.spotify.com/embed/playlist/6oK6F4LglYBr4mYLSRDJOa" width="300" height="380" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe>
        <iframe src="https://open.spotify.com/embed/playlist/1q7zv2ScwtR2jIxaIRj9iG" width="300" height="380" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe>
        <iframe src="https://open.spotify.com/embed/playlist/6q8mgrJZ5L4YxabVQoAZZf" width="300" height="380" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe>
      </div>
    `)}async render(){const c=document.getElementById("explorer-view"),f=document.getElementById("exp-path");if(!c)return;if(c.innerHTML="",f.textContent="/"+this.currentPath.join("/"),this.currentPath[2]==="Music"){await this.renderMusicPage(c);return}const p=this.fs.getFolder(this.currentPath);for(const[y,g]of Object.entries(p)){const I=g?.type==="file";let S;I?g.icon?S=g.icon.startsWith("/")?g.icon:`data:image/*;base64,${g.icon}`:S=g.kind===ee.IMAGE?g.content.startsWith("/")?g.content:`data:image/*;base64,${g.content}`:"/static/icons/notepad.webp":S="/static/icons/file.png";const k=document.createElement("div");k.className="file-item",k.innerHTML=`
        <img src="${S}" style="width:64px;height:64px;object-fit:cover">
        <span>${y}</span>
      `,k.ondblclick=async()=>this.openItem(y,I),k.oncontextmenu=async w=>this.showFileContextMenu(w,y,I),c.appendChild(k)}}async openItem(c,f){if(f){if(this.fileSelectCallback){this.fileSelectCallback(this.currentPath,c),this.fileSelectCallback=null;return}const p=await this.fs.getFileContent(this.currentPath,c);await this.fs.getFileKind(this.currentPath,c)===ee.IMAGE?this.openImageViewer(c,p):this.notepadApp.open(c,p,this.currentPath)}else this.currentPath.push(c),await this.render()}openImageViewer(c,f){const p=document.createElement("div");p.className="window",Object.assign(p.style,{width:"500px",height:"400px",left:"150px",top:"150px",zIndex:2e3}),p.innerHTML=`
      <div class="window-header">
        <span>${c}</span>
        ${this.wm.getWindowControls()}
      </div>
      <div style="display:flex;justify-content:center;align-items:center;height:calc(100% - 30px);background:#222">
        <img src="${f}" style="max-width:100%; max-height:100%">
      </div>
    `,Oe.appendChild(p),this.wm.makeDraggable(p),this.wm.makeResizable(p),this.wm.setupWindowControls(p),this.wm.addToTaskbar(p.id,c,"/static/icons/file.png")}async showFileContextMenu(c,f,p){c.preventDefault(),c.stopPropagation(),ce.innerHTML="";const y=(w,v)=>{const a=document.createElement("div");return a.textContent=w,a.onclick=()=>v(),a},g=p?"Open":"Open Folder",I=async()=>{ce.style.display="none",await this.openItem(f,p)};ce.appendChild(y(g,I)),p&&(ce.appendChild(document.createElement("hr")),ce.appendChild(y("Delete",async()=>{ce.style.display="none",await this.fs.deleteItem(this.currentPath,f),await this.render()})),ce.appendChild(y("Rename",async()=>{ce.style.display="none";const w=prompt("Enter new name:",f);w&&w!==f&&(await this.fs.renameItem(this.currentPath,f,w),await this.render())})));const S=p?await this.fs.getFileKind(this.currentPath,f):null,k=p?await this.fs.getFileContent(this.currentPath,f):null;S===ee.IMAGE&&ce.appendChild(y("Set Wallpaper",()=>{ce.style.display="none",fr.setWallpaper(k)})),ce.appendChild(y("Properties",()=>{ce.style.display="none",this.wm.showPopup(`Name: ${f}
Type: ${p?"File":"Folder"}`)})),Object.assign(ce.style,{left:`${c.pageX}px`,top:`${c.pageY}px`,display:"block"})}showBackgroundContextMenu(c){c.preventDefault(),c.stopPropagation(),ce.innerHTML=`
      <div id="ctx-new-file">New File</div>
      <div id="ctx-new-folder">New Folder</div>
      <hr>
      <div id="ctx-refresh">Refresh</div>
    `;const f=(p,y)=>{document.getElementById(p).onclick=async()=>{ce.style.display="none",await y()}};f("ctx-new-file",async()=>{const p=prompt("Enter file name:","NewFile.txt");p&&(await this.fs.createFile(this.currentPath,p),await this.render())}),f("ctx-new-folder",async()=>{const p=prompt("Enter folder name:","NewFolder");p&&(await this.fs.createFolder(this.currentPath,p),await this.render())}),f("ctx-refresh",async()=>await this.render()),Object.assign(ce.style,{left:`${c.pageX}px`,top:`${c.pageY}px`,display:"block"})}}const bn=document.getElementById("window-style");let Fi=bn.parentNode;function Hs(){bn.parentNode&&Fi.removeChild(bn)}function qs(){bn.parentNode||Fi.appendChild(bn)}class Gs{constructor(){this.openWindows=new Map,this.zIndexCounter=1e3,this.gameWindowCount=0}updateTransparency(){this.gameWindowCount>0?Hs():qs()}createWindow(c,f,p="80vw",y="80vh",g=!1){const I=document.createElement("div");I.className="window",I.id=c,I.dataset.fullscreen="false";const S=p!=null?String(p):"80vw",k=y!=null?String(y):"80vh",w=S.includes("vw")?window.innerWidth*parseFloat(S)/100:parseInt(S),v=k.includes("vh")?window.innerHeight*parseFloat(k)/100:parseInt(k);return Object.assign(I.style,{width:`${w}px`,height:`${v}px`,left:`${(window.innerWidth-w)/2}px`,top:`${(window.innerHeight-v)/2}px`,position:"absolute",zIndex:this.zIndexCounter++}),g&&this.gameWindowCount++,this.updateTransparency(),I}addToTaskbar(c,f,p){if(document.getElementById(`taskbar-${c}`))return;const y=document.createElement("div");if(y.id=`taskbar-${c}`,y.className="taskbar-item",p){const S=document.createElement("img");S.src=p,y.appendChild(S)}const g=document.createElement("span");g.textContent=f,y.appendChild(g),y.onclick=()=>{const S=document.getElementById(c);S&&(S.style.display==="none"?(S.style.display="block",y.classList.add("active")):this.bringToFront(S))},y.oncontextmenu=S=>{S.preventDefault();const k=document.getElementById("taskbar-context-menu");k&&k.remove();const w=document.createElement("div");w.id="taskbar-context-menu",w.className="kde-menu";const v=document.getElementById(c),a=(x,O)=>{const C=document.createElement("div");C.textContent=x,C.className="kde-item",C.onclick=()=>{O(),w.remove()},w.appendChild(C)};a(v.style.display==="none"?"Restore":"Minimize",()=>{v.style.display==="none"?v.style.display="block":this.minimizeWindow(v),this.bringToFront(v)}),a(v.dataset.fullscreen==="true"?"Restore Size":"Maximize",()=>{this.toggleFullscreen(v),this.bringToFront(v)}),a("Bring to Front",()=>this.bringToFront(v)),a("Properties",()=>{const x=this.openWindows.get(c);if(!x)return;const O=document.getElementById(c);if(!O)return;const C=O.dataset,A=O.getBoundingClientRect(),B=[`Window ID: ${c}`,`Title: ${x.title}`,C.appType?`Type: ${C.appType}`:"",C.appId?`App ID: ${C.appId}`:"",C.swf?`SWF Path: ${C.swf}`:"",C.rom?`ROM: ${C.rom}`:"",C.core?`Core: ${C.core}`:"",C.externalUrl?`URL: ${C.externalUrl}`:"",`Width: ${Math.round(A.width)}px`,`Height: ${Math.round(A.height)}px`,`Left: ${Math.round(A.left)}px`,`Top: ${Math.round(A.top)}px`,`Z-Index: ${O.style.zIndex}`,`Fullscreen: ${C.fullscreen==="true"?"Yes":"No"}`].filter(Boolean).map(St=>`<div style="margin:2px 0;">${St}</div>`).join(""),H=this.createWindow(`${c}-props`,`Properties: ${x.title}`,"40vw","40vh");H.innerHTML=`
          <div class="window-header">
            <span>Properties: ${x.title}</span>
            ${this.wm.getWindowControls()}
          </div>
          <div class="window-content" style="width:100%; height:100%; overflow:auto; user-select:text;">
            ${B}
          </div>
        `,Oe.appendChild(H),this.makeDraggable(H),this.makeResizable(H),this.setupWindowControls(H)}),a("Close Window",()=>{this.removeFromTaskbar(c),v&&v.remove()}),document.body.appendChild(w);const b=w.getBoundingClientRect();let u=S.pageX,N=window.innerHeight-S.pageY;u+b.width>window.innerWidth&&(u=window.innerWidth-b.width-10),N+b.height>window.innerHeight&&(N=10),w.style.setProperty("--ctx-left",`${u}px`),w.style.setProperty("--ctx-bottom",`${N}px`),document.addEventListener("click",function x(){w.remove(),document.removeEventListener("click",x)})},document.getElementById("taskbar-windows").appendChild(y),this.openWindows.set(c,{taskbarItem:y,title:f})}registerCloseWindow(c,f){c.addEventListener("click",()=>{const p=document.getElementById(f);if(p)p.remove();else return;this.removeFromTaskbar(f)})}removeFromTaskbar(c){const f=document.getElementById(`taskbar-${c}`);f&&f.remove(),this.openWindows.delete(c)}bringToFront(c){c&&(c.style.zIndex=this.zIndexCounter++)}minimizeWindow(c){c.style.display="none";const f=document.getElementById(`taskbar-${c.id}`);f&&(f.style.background="#1a1a1a")}toggleFullscreen(c){const f=c.dataset.fullscreen==="true",p=c.querySelector(".window-header");if(f)document.fullscreenElement===c&&document.exitFullscreen(),Object.assign(c.style,{width:c.dataset.prevWidth,height:c.dataset.prevHeight,left:c.dataset.prevLeft,top:c.dataset.prevTop}),p&&(p.style.display=""),c.dataset.fullscreen="false";else{Object.assign(c.dataset,{prevWidth:c.style.width,prevHeight:c.style.height,prevLeft:c.style.left,prevTop:c.style.top});const y=()=>{Object.assign(c.style,{width:"100vw",height:"100vh",left:"0",top:"0"}),p&&(p.style.display="none")};c.requestFullscreen?c.requestFullscreen().then(y).catch(y):y(),c.dataset.fullscreen="true";const g=()=>{document.fullscreenElement||(p&&(p.style.display=""),c.dataset.fullscreen="false",document.removeEventListener("fullscreenchange",g))};document.addEventListener("fullscreenchange",g)}}setupWindowControls(c){c.querySelector(".close-btn").onclick=()=>{this.removeFromTaskbar(c.id),c.remove(),c.dataset.isGame==="true"&&(this.gameWindowCount=Math.max(0,this.gameWindowCount-1)),this.updateTransparency()},c.querySelector(".minimize-btn").onclick=()=>this.minimizeWindow(c),c.querySelector(".maximize-btn").onclick=()=>this.toggleFullscreen(c);const f=c.querySelector(".close-btn");f&&this.registerCloseWindow(f),c.addEventListener("mousedown",()=>this.bringToFront(c))}makeDraggable(c){const f=c.querySelector(".window-header");f.onmousedown=p=>{if(p.target.tagName==="BUTTON")return;const y=p.clientX-c.offsetLeft,g=p.clientY-c.offsetTop;document.onmousemove=I=>{c.style.left=`${I.clientX-y}px`,c.style.top=`${I.clientY-g}px`},document.onmouseup=()=>document.onmousemove=null}}makeResizable(c){const p=y=>{const g=c.getBoundingClientRect();let I="";return y.clientY-g.top<10?I+="n":g.bottom-y.clientY<10&&(I+="s"),y.clientX-g.left<10?I+="w":g.right-y.clientX<10&&(I+="e"),I};c.addEventListener("mousemove",y=>{const g=p(y),I={n:"n-resize",s:"s-resize",w:"w-resize",e:"e-resize",nw:"nw-resize",ne:"ne-resize",sw:"sw-resize",se:"se-resize","":"default"};c.style.cursor=I[g]||"default"}),c.addEventListener("mousedown",y=>{const g=p(y);if(!g)return;y.preventDefault();const I=y.clientX,S=y.clientY,k=c.getBoundingClientRect(),w=k.width,v=k.height,a=k.left,b=k.top,u=x=>{let O=w,C=v,A=a,J=b;g.includes("e")&&(O=w+(x.clientX-I)),g.includes("s")&&(C=v+(x.clientY-S)),g.includes("w")&&(O=w-(x.clientX-I),A=a+(x.clientX-I)),g.includes("n")&&(C=v-(x.clientY-S),J=b+(x.clientY-S));const B=300;O>B&&(c.style.width=`${O}px`,c.style.left=`${A}px`),C>B&&(c.style.height=`${C}px`,c.style.top=`${J}px`)},N=()=>{document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",N)};document.addEventListener("mousemove",u),document.addEventListener("mouseup",N)})}getWindowControls(){return`<div class="window-controls">
              <button class="minimize-btn" title="Minimize">−</button>
              <button class="maximize-btn" title="Maximize">□</button>
              <button class="close-btn" title="Close">X</button>
            </div>
    `}showPopup(c){const f=document.createElement("div");f.textContent=c,Object.assign(f.style,{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",padding:"20px 40px",backgroundColor:"rgba(0,0,0,0.8)",color:"#fff",fontSize:"18px",borderRadius:"10px",textAlign:"center",zIndex:9999,cursor:"pointer",boxShadow:"0 4px 15px rgba(0,0,0,0.3)"}),f.addEventListener("click",()=>{f.remove()}),document.body.appendChild(f)}}class Xs{constructor(c){this.wm=c,this.history=[],this.historyIndex=-1,this.currentURL="https://www.google.com/webhp?igu=1"}open(){if(document.getElementById("browser-win")){this.wm.bringToFront(document.getElementById("browser-win"));return}const c=document.createElement("div");c.className="window",c.id="browser-win",c.dataset.fullscreen="false",c.innerHTML=`
      <div class="window-header">
        <span>Browser</span>
        <div class="window-controls">
          <button class="minimize-btn" title="Minimize">−</button>
          <button class="maximize-btn" title="Maximize">□</button>
          <button class="close-btn" title="Close">X</button>
        </div>
      </div>
      <nav class="browser-nav">
        <div>
          <button id="back-btn" disabled aria-label="Click to go back" title="Click to go back">
            ←
          </button>
          <button id="forward-btn" disabled aria-label="Click to go forward" title="Click to go forward">
            →
          </button>
          <button id="reload-btn" aria-label="Reload this page" title="Reload this page">
            ⟳
          </button>
        </div>
        <input id="address-bar" type="url" value="${this.currentURL}" aria-label="Address" enterkeyhint="go">
      </nav>
      <nav class="bookmark-bar">
      <button data-url="https://www.google.com/webhp?igu=1">Google</button>
      <button data-url="https://reeyuki.github.io">Reeyuki Site</button>
      <button data-url="https://liventcord.github.io">LiventCord</button>
      <button data-url="https://www.wikipedia.org">Wikipedia</button>
      <button data-url="https://www.mixconvert.com">Mix Convert</button>
      <button data-url="https://dustinbrett.com/Program%20Files/Browser/dino/index.html">T-Rex Dino</button>
      <button onclick="window.open('https://dn721809.ca.archive.org/0/items/youtube-xvFZjo5PgG0/xvFZjo5PgG0.mp4','_blank')">Click me</button>
      <button data-url="https://bluemaxima.org/flashpoint">Flashpoint Archive</button>
      <button data-url="https://jsfiddle.net">JS Fiddle</button>
      <a href="https://emupedia.net/beta/emuos/">EmuOS</a>
      </nav>
      <iframe id="browser-frame" src="${this.currentURL}" style="width:100%;height:calc(100% - 88px);border:none"></iframe>
    `,Oe.appendChild(c),this.wm.makeDraggable(c),this.wm.makeResizable(c),this.wm.setupWindowControls(c),this.wm.addToTaskbar(c.id,"Browser","/static/icons/chromium.webp"),this.wm.registerCloseWindow(c.querySelector(".close-btn"),c.id),this.frame=c.querySelector("#browser-frame"),this.addressInput=c.querySelector("#address-bar"),this.backBtn=c.querySelector("#back-btn"),this.forwardBtn=c.querySelector("#forward-btn"),this.reloadBtn=c.querySelector("#reload-btn"),c.style.width="70vw",c.style.height="70vh",c.style.left="15vw",c.style.top="15vh",this.setupControls(c)}setupControls(c){this.backBtn.onclick=()=>this.goBack(),this.forwardBtn.onclick=()=>this.goForward(),this.reloadBtn.onclick=()=>this.frame.src=this.currentURL,this.addressInput.addEventListener("keydown",f=>{f.key==="Enter"&&this.navigate(this.addressInput.value)}),c.querySelectorAll(".bookmark-bar button").forEach(f=>{f.addEventListener("click",()=>{this.navigate(f.dataset.url)})})}navigate(c){if(!c){console.error("No url found");return}!c.startsWith("http")&&!c.startsWith("chrome")&&(c="https://"+c),this.historyIndex<this.history.length-1&&(this.history=this.history.slice(0,this.historyIndex+1)),this.history.push(c),this.historyIndex++,this.updateNavigation()}goBack(){this.historyIndex>0&&(this.historyIndex--,this.updateNavigation())}goForward(){this.historyIndex<this.history.length-1&&(this.historyIndex++,this.updateNavigation())}updateNavigation(){this.currentURL=this.history[this.historyIndex],this.frame.src=this.currentURL,this.addressInput.value=this.currentURL,this.backBtn.disabled=this.historyIndex<=0,this.forwardBtn.disabled=this.historyIndex>=this.history.length-1}}const Oi="kdeFavorites";function un(){return JSON.parse(localStorage.getItem(Oi))||[]}function Ni(it){localStorage.setItem(Oi,JSON.stringify(it))}function Ys(it){let c=un();c.includes(it)||(c.push(it),Ni(c),hr(),Ci(it,!0))}function Zs(it){let c=un();c=c.filter(f=>f!==it),Ni(c),hr(),Ci(it,!1)}function Di(it){const c=document.createElement("span");return c.textContent="★",c.className="star",c.style.color=un().includes(it)?"gold":"#ccc",c.addEventListener("click",f=>{f.stopPropagation(),un().includes(it)?Zs(it):Ys(it)}),c.dataset.app=it,c}function Ci(it,c){document.querySelectorAll(`.kde-item[data-app="${it}"] span`).forEach(p=>{p.textContent==="★"&&(p.style.color=c?"gold":"#ccc")});const f=document.querySelector(`.kde-item[data-app="${it}"]`);f&&(f.style.background=c?"rgba(255, 215, 0, 0.1)":"transparent")}function hr(it){if(!it){console.error("No app launcher");return}const c=document.querySelector('.kde-page[data-page="favorites"]');c.innerHTML="";const f=un();if(f.length===0){const p=document.createElement("div");p.textContent="No favorite apps",p.style.padding="10px",p.style.color="#888",c.appendChild(p);return}f.forEach(p=>{const y=document.querySelector(`.kde-item[data-app="${p}"]`);if(!y)return;const g=y.cloneNode(!0);g.style.position="relative",g.style.background="rgba(255, 215, 0, 0.1)",g.onclick=()=>it.launch(p);const I=g.querySelector(".star");I&&I.remove(),g.appendChild(Di(p)),c.appendChild(g)})}function Vs(){document.querySelectorAll(".kde-page:not([data-page='favorites']) .kde-item").forEach(it=>{const c=it.dataset.app;it.style.position="relative";const f=Di(c);f.style.opacity="0",f.style.transition="opacity 0.2s",it.appendChild(f),it.addEventListener("mouseenter",()=>f.style.opacity="1"),it.addEventListener("mouseleave",()=>f.style.opacity="0"),un().includes(c)&&(it.style.background="rgba(255, 215, 0, 0.1)")})}function Ks(){document.querySelectorAll(".kde-cat").forEach(it=>{it.onclick=()=>{document.querySelectorAll(".kde-cat").forEach(c=>c.classList.remove("active")),document.querySelectorAll(".kde-page").forEach(c=>c.classList.remove("active")),it.classList.add("active"),document.querySelector(`.kde-page[data-page="${it.dataset.cat}"]`).classList.add("active")}}),document.getElementById("kde-search").addEventListener("input",it=>{const c=it.target.value.toLowerCase();document.querySelectorAll(".kde-item").forEach(f=>{f.style.display=f.textContent.toLowerCase().includes(c)?"":"none"})}),Vs()}function Js(it){return it.replace(/(?:^\w|[A-Z]|\b\w)/g,function(c,f){return f===0?c.toLowerCase():c.toUpperCase()}).replace(/\s+/g,"")}function Ai(it){if(it=Js(it),it==="explorer")return"/static/icons/file.png";if(it==="computer")return"/static/icons/pc.webp";try{return document.querySelector(`#desktop div[data-app="${it}"]`)?.querySelector("img")?.src||null}catch(c){return console.error(c),null}}function Qs(it){const c={system:document.querySelector('.kde-page[data-page="system"]'),apps:document.querySelector('.kde-page[data-page="apps"]'),games:document.querySelector('.kde-page[data-page="games"]'),favorites:document.querySelector('.kde-page[data-page="favorites"]')};["system","apps","games"].forEach(f=>{c[f]&&(c[f].innerHTML="")}),Object.entries(it.appMap).forEach(([f,p])=>{const y=document.createElement("div");y.classList.add("kde-item"),y.dataset.app=f;const g=Ai(f),I=document.createElement("img");I.classList.add("kde-item-icon"),g?(I.src=g,I.alt=""):I.style.display="none";const S=f.charAt(0).toUpperCase()+f.slice(1),k=document.createElement("span");k.textContent=S,y.appendChild(I),y.appendChild(k),y.addEventListener("click",()=>it.launch(f)),p.type==="system"?c.system?.appendChild(y):p.type==="game"||p.type==="swf"?c.games?.appendChild(y):c.apps?.appendChild(y)})}class $s{constructor(c,f,p,y,g,I,S,k){this.wm=c,this.fs=f,this.musicPlayer=p,this.explorerApp=y,this.terminalApp=g,this.notepadApp=I,this.browserApp=S,this.cameraApp=k,this.pageLoadTime=Date.now(),this.TRANSPARENCY_ALLOWED_APP_IDS=new Set(["paint","vscode","liventcord"]);const w=this._getAnalyticsBase("hit-page");this.sendAnalytics({...w,event:"start"}),this.appMap={return:{type:"system",action:()=>window.location.href="/"},explorer:{type:"system",action:()=>this.explorerApp.open()},computer:{type:"system",action:()=>this.explorerApp.open()},terminal:{type:"system",action:()=>this.terminalApp.open()},notepad:{type:"system",action:()=>this.notepadApp.open()},browser:{type:"system",action:()=>this.browserApp.open()},cameraApp:{type:"system",action:()=>this.cameraApp.open()},music:{type:"system",action:()=>this.musicPlayer.open(this.wm)},photopea:{type:"game",url:"https://www.photopea.com"},sonic:{type:"swf",swf:"/static/games/swfGames/sonic.swf"},flight:{type:"swf",swf:"/static/games/swfGames/flight.swf"},swarmQueen:{type:"swf",swf:"/static/games/swfGames/swarmQueen.swf"},paint:{type:"game",url:"https://paint.js.org/"},pacman:{type:"game",url:"https://pacman-e281c.firebaseapp.com"},pvz:{type:"game",url:"https://emupedia.net/emupedia-game-pvz"},pvz2:{type:"remote",url:"https://play.pvzge.com"},pvzHybrid:{type:"remote",url:"https://www.miniplay.com/embed/plants-vs-zombies-hybrid-story"},tetris:{type:"game",url:"https://turbowarp.org/embed.html?autoplay#31651654"},roads:{type:"game",url:"https://slowroads.io"},vscode:{type:"game",url:"https://emupedia.net/emupedia-app-vscode"},isaac:{type:"game",url:"https://emupedia.net/emupedia-game-binding-of-isaac"},mario:{type:"game",url:"https://emupedia.net/emupedia-game-mario"},papaGames:{type:"game",url:"https://papasgamesfree.io"},zombieTd:{type:"swf",swf:"/static/games/swfGames/zombietd.swf"},zombotron:{type:"swf",swf:"/static/games/zombotron/zombotron.swf"},zombotron2:{type:"swf",swf:"/static/games/zombotron/zombotron2.swf"},zombotron2Time:{type:"game",url:"/static/rfiv.html?game=zombotron"},breach:{type:"swf",swf:"/static/games/swfGames/breach.swf"},fancyPants:{type:"swf",swf:"/static/games/swfGames/fancypantsadventure.swf"},fancyPants2:{type:"swf",swf:"/static/games/swfGames/fancypantsadventure2.swf"},fancyPants3:{type:"swf",swf:"/static/games/swfGames/fancypantsadventure3.swf"},strikeForce:{type:"swf",swf:"https://cache.armorgames.com/files/games/strikeforce-kitty-16008.swf?v=1404201513"},strikeForce2:{type:"swf",swf:"https://cache.armorgames.com/files/games/strikeforce-kitty-2-17643.swf?v=1423725280"},baloonsTd5:{type:"swf",swf:"/static/games/swfGames/baloonstd5.swf"},baloonsTd6:{type:"swf",swf:"https://truffled.lol/iframe.html?url=%2Fgames%2Fbtd6%2Findex.html"},trinitas:{type:"game",url:"/static/games/trinitas"},jojo:{type:"game",url:"https://www.retrogames.cc/embed/8843-jojos-bizarre-adventure%3A-heritage-for-the-future-jojo-no-kimyou-na-bouken%3A-mirai-e-no-isan-japan-990927-no-cd.html"},gtaVc:{type:"game",url:"/static/vciframe.html"},subwaySurfers:{type:"game",url:"https://g.igroutka.ru/games/164/Xm2W5MIcPqrF1Y90/12/subway_surfers_easter_edinburgh"},mutantFighting:{type:"swf",swf:"https://cache.armorgames.com/files/games/mutant-fighting-cup-14425.swf?v=1373587528"},mutantFighting2:{type:"swf",swf:"/static/games/swfGames/mutantfightingcup2.swf"},finnAndBones:{type:"game",url:"/static/flashpointarchive.html?fpGameName=finnAndBones"},obama:{type:"game",url:"/static/flashpointarchive.html?fpGameName=obama-alien-defense"},intrusion2:{type:"swf",swf:"/static/games/swfGames/intrusion2.swf"},dan:{type:"game",url:"https://www.silvergames.com/en/dan-the-man/gameframe"},infectonator:{type:"swf",swf:"https://cache.armorgames.com/files/games/infectonator-5020.swf?v=1373587522"},infectonator2:{type:"swf",swf:"https://cache.armorgames.com/files/games/infectonator-2-13150.swf?v=1373587527"},newyorkShark:{type:"swf",swf:"https://cache.armorgames.com/files/games/new-york-shark-12969.swf?v=1373587527"},swordsSouls:{type:"swf",swf:"https://cache.armorgames.com/files/games/swordssouls-17817.swf?v=1464609285"},corporationInc:{type:"swf",swf:"https://cache.armorgames.com/files/games/corporation-inc-7348.swf?v=1373587524"},aground:{type:"game",url:"https://cache.armorgames.com/files/games/aground-18245/index.html?v=1591832301"},mobyDick:{type:"swf",swf:"https://cache.armorgames.com/files/games/moby-dick-the-video--7199.swf?v=1373587524"},mobyDick2:{type:"swf",swf:"https://cache.armorgames.com/files/games/moby-dick-2-12662.swf?v=1373587526"},elfStory:{type:"swf",swf:"https://cache.armorgames.com/files/games/elf-story-14680.swf?v=1373587528"},frogDares:{type:"swf",swf:"https://cache.armorgames.com/files/games/frog-dares-12672.swf?v=1373587526"},kamikazePigs:{type:"swf",swf:"https://cache.armorgames.com/files/games/kamikaze-pigs-13545.swf?v=1373587527"},icyFishes:{type:"swf",swf:"https://cache.armorgames.com/files/games/icy-fishes-12977.swf?v=1373587527"},feedUs6:{type:"swf",swf:"/static/games/swfGames/feeduslostisland.swf"},superrobotwar:{type:"game",url:"/static/flashpointarchive.html?fpGameName=super-robot-war"},feedUsPirates:{type:"swf",swf:"/static/games/swfGames/feeduspirates.swf"},epicbossfighter2:{type:"swf",swf:"/static/games/swfGames/EpicBossFighter2.swf"},avatarFortressFight2:{type:"swf",swf:"/static/games/swfGames/avatarFortressFight2.swf"},incredibles:{type:"swf",swf:"/static/games/swfGames/incredibles.swf"},savagePursuit:{type:"swf",swf:"/static/games/swfGames/savagepursuit.swf"},cactusMcCoy:{type:"game",url:"https://papasgamesfree.io/cactus-mccoy-1"},jackSmith:{type:"game",url:"https://papasgamesfree.io/jacksmith"},pokemonRed:{type:"gba",url:"pokemon-red.gba"},pokemonEmerald:{type:"gba",url:"pokemon-emerald.gba"},pokemonPlatinum:{type:"nds",url:"pokemon-platinum.nds"},pokemonHeartgold:{type:"nds",url:"pokemon-heartgold.nds"},pokemonWhite:{type:"nds",url:"pokemon-white.nds"},pokemonWhite2:{type:"nds",url:"pokemon-white-2.zip"},minecraft:{type:"remote",url:"https://eaglercraft.com/play"},liventcord:{type:"game",url:"https://liventcord.github.io"},fnaf:{type:"game",url:"/static/games/fnaf"},geometryDash:{type:"game",url:"https://emupedia.net/emupedia-game-geometry-dash"},cutTheRope:{type:"game",url:"https://emupedia.net/emupedia-game-cut-the-rope2"},game2048:{type:"game",url:"https://emupedia.net/emupedia-game-2048"},pinball:{type:"game",url:"https://emupedia.net/emupedia-game-space-cadet-pinball"},flappyBird:{type:"game",url:"https://emupedia.net/emupedia-game-flappy-bird"},jetpack:{type:"game",url:"https://emupedia.net/emupedia-game-jetpack-joyride"},happyWheels:{type:"game",url:"https://emupedia.net/emupedia-game-happy-wheels/flash"},fistPunch:{type:"game",url:"/static/flashpointarchive.html?fpGameName=fistPunch"},hollowKnight:{type:"game",url:"/static/hollowknight.html"},slimeRancher:{type:"game",url:"https://dev.snubby.top"},kindergarten:{type:"game",url:"https://truffled.lol/games/kindergarten/1/index.html"},kindergarten2:{type:"game",url:"https://truffled.lol/games/kindergarten/2/index.html"},cuphead:{type:"game",url:"https://truffled.lol/games/Cuphead/index.html"},raft:{type:"game",url:"https://truffled.lol/games/raft/index.html"},celeste:{type:"game",url:"https://truffled.lol/games/celeste/index.html"},terraria:{type:"game",url:"https://truffled.lol/games/terraria/terraria-wrapper.html"},yandereSim:{type:"game",url:"https://truffled.lol/gamefile/yandere.html"},undertale:{type:"game",url:"https://truffled.lol/games/bts"},balatro:{type:"game",url:"https://truffled.lol/games/balatro/index.html"},granny:{type:"game",url:"https://truffled.lol/gamefile/Granny.html"},bendy:{type:"game",url:"https://truffled.lol/games/BATIM/BATIM/index.html"},tattletail:{type:"game",url:"https://truffled.lol/games/tattletail/index.html"}},Qs(this)}launch(c){const f=this.appMap[c];if(!f){console.error(`App ${c} not found.`);return}console.log("Starting app : ",c);const p=this._getAnalyticsBase(c);this.sendAnalytics({...p,event:"launch"}),{system:()=>f.action(),swf:()=>this.openRuffleApp(c,f.swf,p),gba:()=>this.openEmulatorApp(c,f.url,"gba",p),nds:()=>this.openEmulatorApp(c,f.url,"nds",p),game:()=>this.openGameApp(c,f.url,p),html:()=>this.openHtmlApp(c,f.html,p,f),remote:()=>this.openRemoteApp(f.url)}[f.type]?.()}_getAnalyticsBase(c){let f="Unknown";try{const k=document.createElement("canvas"),w=k.getContext("webgl")||k.getContext("experimental-webgl");if(w){const v=w.getExtension("WEBGL_debug_renderer_info");f=v?w.getParameter(v.UNMASKED_RENDERER_WEBGL):w.getParameter(w.RENDERER)}}catch(k){console.error(k)}const p=Date.now()-this.pageLoadTime,y=Math.floor(p/36e5),g=Math.floor(p%36e5/6e4),I=`${y}h, ${g}m`,S=/Brave\//.test(navigator.userAgent)||window.navigator.brave&&typeof window.navigator.brave.isBrave=="function";return{app:c,timestamp:Date.now(),browser:{userAgent:navigator.userAgent,isBrave:S,language:navigator.language,platform:navigator.platform,screenWidth:window.screen.width,screenHeight:window.screen.height,uptime:I,gpu:f,ram:navigator.deviceMemory?`${navigator.deviceMemory} GB`:"Unknown",cpuCores:navigator.hardwareConcurrency||"Unknown",dnt:navigator.doNotTrack==="1"||window.doNotTrack==="1"?"Enabled":"Disabled"}}}sendAnalytics(c){window.location.hostname!=="localhost"&&fetch("https://analytics.liventcord-a60.workers.dev/analytics",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})}recordUsage(c,f){const p=Date.now(),y=document.getElementById(c),g=()=>{const I=Date.now()-p;this.sendAnalytics({...f,event:"usage",durationMs:I})};y.querySelector(".close-btn").addEventListener("click",g),y.addEventListener("blur",g)}openRemoteApp(c){const f=this._getAnalyticsBase(c);this.sendAnalytics({...f,event:"launch"}),window.open(c,"_blank","noopener,noreferrer")}openHtmlApp(c,f,p){if(document.getElementById(`${c}-win`)){this.wm.bringToFront(document.getElementById(`${c}-win`));return}this.createWindow(c,c.replace(/([A-Z])/g," $1").replace(/^./,y=>y.toUpperCase()),f,null,c,p)}openRuffleApp(c,f){if(!f)return;const p=document.querySelector(`[data-app="${c}"] div`);p&&(c=p.textContent);const y=f.replace(/[^a-zA-Z0-9]/g,"");if(document.getElementById(`${y}-win`)){this.wm.bringToFront(document.getElementById(`${y}-win`));return}const g=`<embed src="${f}" width="100%" height="100%">`;this.createWindow(y,c.toUpperCase(),g,null,c,{type:"swf",swf:f})}openEmulatorApp(c,f,p){const y=document.querySelector(`[data-app="${c}"] div`);y&&(c=y.textContent);const g=`${p}-${f.replace(/\W/g,"")}-${Date.now()}`;if(document.getElementById(g)){this.wm.bringToFront(document.getElementById(g));return}const I=`/static/emulatorjs.html?rom=${encodeURIComponent(f)}&core=${encodeURIComponent(p)}&color=%230064ff`,S=`<iframe src="${I}" style="width:100%; height:100%; border:none;" allow="autoplay; fullscreen; clipboard-write; encrypted-media; picture-in-picture" sandbox="allow-forms allow-downloads allow-modals allow-pointer-lock allow-popups allow-same-origin allow-scripts allow-top-navigation-by-user-activation"></iframe>`;this.createWindow(g,c,S,I,c,{type:p,rom:f,core:p})}openGameApp(c,f){let p;const y=document.querySelector(`[data-app="${c}"] div`);if(y&&(p=y.textContent),document.getElementById(`${c}-win`)){this.wm.bringToFront(document.getElementById(`${c}-win`));return}const g=`<iframe src="${f}" style="width:100%; height:100%; border:none;" allow="autoplay; fullscreen; clipboard-write; encrypted-media; picture-in-picture" sandbox="allow-forms allow-downloads allow-modals allow-pointer-lock allow-popups allow-same-origin allow-scripts allow-top-navigation-by-user-activation"></iframe>`;this.createWindow(c,p,g,f,c,{type:"game"})}isTransparencyBlocked(c,f){return!(f.type==="system"||this.TRANSPARENCY_ALLOWED_APP_IDS.has(c))}createWindow(c,f,p,y=null,g=null,I={}){const S=this.isTransparencyBlocked(g,I),k=this.wm.createWindow(`${c}-win`,f,"80vw","80vh",S);k.dataset.appType=I.type||"",k.dataset.externalUrl=y||"",k.dataset.appId=g||"",k.dataset.swf=I.swf||"",k.dataset.isGame=S,k.dataset.rom=I.rom||"",k.dataset.core=I.core||"",console.log(`Id: ${c}, ${g}, appMeta ${I.toString()}, title: ${f}`),k.innerHTML=`
      <div class="window-header">
        <span>${f}</span>
        <div class="window-controls">
          <button class="minimize-btn" title="Minimize">−</button>
          ${y?'<button class="external-btn" title="Open in External">↗</button>':""}
          <button class="maximize-btn" title="Maximize">□</button>
          <button class="close-btn" title="Close">X</button>
        </div>
      </div>
      <div class="window-content" style="width:100%; height:100%;">
        ${p}
      </div>
    `,Oe.appendChild(k),this.wm.makeDraggable(k),this.wm.makeResizable(k),this.wm.setupWindowControls(k),this.wm.bringToFront(k),y&&k.querySelector(".external-btn").addEventListener("click",()=>this.openRemoteApp(y));const w=Ai(g||c);this.wm.addToTaskbar(k.id,f,w),this.recordUsage(`${c}-win`)}}class ta{constructor(c,f){this.fs=c,this.wm=f}setExplorer(c){this.explorerApp=c}open(c="Untitled",f="",p=null){const y=`notepad-${c.replace(/\s/g,"")}`;if(document.getElementById(y)){this.wm.bringToFront(document.getElementById(y));return}const g=this.wm.createWindow(y,`${c} - Notepad`,"600px","400px");Object.assign(g.style,{left:"250px",top:"150px"}),g.innerHTML=`
      <div class="window-header">
        <span>${c} - Notepad</span>
        <div class="window-controls">
          <button class="minimize-btn" title="Minimize">−</button>
          <button class="maximize-btn" title="Maximize">□</button>
          <button class="close-btn" title="Close">X</button>
        </div>
      </div>
      <div class="notepad-menu">
        <button class="notepad-btn" data-action="save">Save</button>
        <button class="notepad-btn" data-action="saveAs">Save As</button>
        <button class="notepad-btn" data-action="open">Open</button>
      </div>
      <div class="window-content">
        <textarea class="notepad-textarea" style="width:100%; height:calc(100% - 40px); border:none; padding:10px; font-family:monospace;">${f}</textarea>
      </div>
    `,Oe.appendChild(g),this.wm.makeDraggable(g),this.wm.makeResizable(g),this.wm.setupWindowControls(g),this.wm.addToTaskbar(g.id,`${c} - Notepad`,"/static/icons/music.png"),this.setupNotepadControls(g,c,p)}setupNotepadControls(c,f,p){const y=c.querySelector(".notepad-textarea");c.querySelectorAll(".notepad-btn").forEach(I=>{I.onclick=()=>{const S=I.dataset.action;S==="save"?this.saveFile(c,y,f,p):S==="saveAs"?this.saveAsFile(y):S==="open"&&this.openFileDialog()}})}saveFile(c,f,p,y){if(!y){this.saveAsFile(f);return}const g=f.value;this.fs.updateFile(y,p,g),alert(`File saved: ${p}`)}saveAsFile(c){const f=prompt("Enter file name:","NewFile.txt");if(!f)return;const p=prompt("Enter path (e.g., home/reeyuki/Documents):","home/reeyuki/Documents");if(!p)return;const y=p.split("/").filter(I=>I),g=c.value;try{this.fs.createFile(y,f,g),alert(`File saved: ${f} at /${p}`)}catch(I){console.error(I),alert("Error saving file. Please check the path.")}}openFileDialog(){this.explorerApp.open(async(c,f)=>{const p=await this.fs.getFileContent(c,f);this.open(f,p,c)})}}class ea{constructor(c){this.wm=c,this.stream=null,this.mediaRecorder=null,this.recordedChunks=[],this.recordings=[],this.recordingInterval=null,this.historyWin=null}open(){if(document.getElementById("camera-win")){this.wm.bringToFront(document.getElementById("camera-win"));return}const c=document.createElement("div");c.className="window",c.id="camera-win",c.dataset.fullscreen="false",c.innerHTML=`
      <div class="window-header">
        <span>Camera</span>
        ${this.wm.getWindowControls()}
      </div>
      <div style="padding:10px; display:flex; flex-direction:column; align-items:center; position:relative;">
      <div class="video-shell">
        <video id="camera-video" autoplay playsinline></video>
        <span id="recording-icon"></span>
        <span id="recording-timer"></span>
      </div>

        <div style="margin-top:10px; display:flex; gap:10px;">
          <button id="take-photo-btn" style="padding:5px 15px;">Take Photo</button>
          <button id="start-record-btn" style="padding:5px 15px;">Start Recording</button>
          <button id="stop-record-btn" style="padding:5px 15px;" disabled>Stop Recording</button>
          <button id="start-screen-btn" style="padding:5px 15px;">Record Screen</button>
          <button id="open-history-btn" style="padding:5px 15px;">History</button>
        </div>
        <a id="download-link" style="display:none; margin-top:10px;"></a>
      </div>
    `,Oe.appendChild(c),this.wm.makeDraggable(c),this.wm.makeResizable(c),this.wm.setupWindowControls(c),this.wm.addToTaskbar(c.id,"Camera","/static/icons/camera.svg");const f=c.querySelector(".close-btn");f.addEventListener("click"),this.wm.registerCloseWindow(f,c.id),this.video=c.querySelector("#camera-video"),this.takePhotoBtn=c.querySelector("#take-photo-btn"),this.startRecordBtn=c.querySelector("#start-record-btn"),this.stopRecordBtn=c.querySelector("#stop-record-btn"),this.downloadLink=c.querySelector("#download-link"),this.recordingIcon=c.querySelector("#recording-icon"),this.recordingTimer=c.querySelector("#recording-timer"),this.historyBtn=c.querySelector("#open-history-btn"),this.startScreenBtn=c.querySelector("#start-screen-btn"),c.style.width="50vw",c.style.height="70vh",c.style.left="25vw",c.style.top="15vh",this.startCamera(),this.takePhotoBtn.onclick=()=>this.takePhoto(),this.startRecordBtn.onclick=()=>this.startRecording(),this.stopRecordBtn.onclick=()=>this.stopRecording(),this.historyBtn.onclick=()=>this.openHistoryWindow(),this.startScreenBtn.onclick=()=>this.startScreenRecording(),this.db=this.initDB(),this.restoreHistory()}async startCamera(){try{this.stream=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0}),this.video.srcObject=this.stream}catch(c){alert("Camera access denied or not available."),console.error(c)}}takePhoto(){const c=document.createElement("canvas");c.width=this.video.videoWidth,c.height=this.video.videoHeight,c.getContext("2d").drawImage(this.video,0,0);const f=c.toDataURL("image/png");this.downloadLink.href=f,this.downloadLink.download="photo.png",this.downloadLink.textContent="Download Photo",this.downloadLink.style.display="block"}startRecording(){this.stream&&(this.recordedChunks=[],this.mediaRecorder=new MediaRecorder(this.stream),this.mediaRecorder.ondataavailable=c=>{c.data.size>0&&this.recordedChunks.push(c.data)},this.mediaRecorder.onstop=()=>{const c=new Blob(this.recordedChunks,{type:"video/webm"}),f=URL.createObjectURL(c);this.addRecording(f,c),this.stopTimer(),this.downloadLink.href=f,this.downloadLink.download=`video-${Date.now()}.webm`,this.downloadLink.textContent="Download Video",this.downloadLink.style.display="block",this.historyWin&&this.renderHistory()},this.mediaRecorder.start(),this.startRecordBtn.disabled=!0,this.stopRecordBtn.disabled=!1,this.recordingIcon.style.display="block",this.startTimer())}stopRecording(){this.mediaRecorder&&this.mediaRecorder.state!=="inactive"&&(this.mediaRecorder.stop(),this.stopTimer(),this.recordingIcon.style.display="none",this.startRecordBtn.disabled=!1,this.stopRecordBtn.disabled=!0)}async startScreenRecording(){try{const c=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0});this.activeStream=c,this.video.srcObject=c,this.recordedChunks=[],this.mediaRecorder=new MediaRecorder(c),this.mediaRecorder.ondataavailable=f=>{f.data.size>0&&this.recordedChunks.push(f.data)},this.mediaRecorder.onstop=()=>{const f=new Blob(this.recordedChunks,{type:"video/webm"}),p=URL.createObjectURL(f);this.addRecording(p,f),this.downloadLink.href=p,this.downloadLink.download=`screen-${Date.now()}.webm`,this.downloadLink.textContent="Download Screen Recording",this.downloadLink.style.display="block",this.stopTimer(),this.recordingIcon.style.display="none",this.startRecordBtn.disabled=!1,this.stopRecordBtn.disabled=!0,this.activeStream.getTracks().forEach(y=>y.stop()),this.activeStream=null,this.video.srcObject=this.stream,this.historyWin&&this.renderHistory()},c.getVideoTracks()[0].onended=()=>{this.mediaRecorder.state!=="inactive"&&this.mediaRecorder.stop()},this.mediaRecorder.start(),this.startRecordBtn.disabled=!0,this.stopRecordBtn.disabled=!1,this.recordingIcon.style.display="block",this.startTimer()}catch(c){console.error(c),alert("Screen capture cancelled or not allowed")}}startTimer(){let c=0;this.recordingTimer.textContent="00:00",this.recordingInterval=setInterval(()=>{c++;const f=String(Math.floor(c/60)).padStart(2,"0"),p=String(c%60).padStart(2,"0");this.recordingTimer.textContent=`${f}:${p}`},1e3)}stopTimer(){clearInterval(this.recordingInterval),this.recordingTimer.textContent=""}async addRecording(c,f){const p={id:crypto.randomUUID(),name:`Recording ${new Date().toLocaleTimeString()}`,blob:f};if(this.recordings.unshift({...p,url:URL.createObjectURL(f)}),await this.saveRecordingToDB(p),this.recordings.length>5){const y=this.recordings.pop();URL.revokeObjectURL(y.url),await this.deleteRecordingFromDB(y.id)}}openHistoryWindow(){if(this.historyWin){this.wm.bringToFront(this.historyWin);return}this.historyWin=document.createElement("div"),this.historyWin.className="window",this.historyWin.id="history-win",this.historyWin.innerHTML=`
      <div class="window-header">
        <span>Recordings History</span>
        ${this.wm.getWindowControls()}
      </div>
      <div id="history-list" style="padding:10px; display:flex; flex-direction:column; gap:5px; overflow-y:auto; height:calc(100% - 30px);"></div>
    `,Oe.appendChild(this.historyWin),this.wm.makeDraggable(this.historyWin),this.wm.makeResizable(this.historyWin),this.wm.setupWindowControls(this.historyWin),this.wm.bringToFront(this.historyWin),this.historyWin.querySelector(".close-btn").onclick=()=>{this.historyWin.remove(),this.historyWin=null},this.historyWin.style.width="30vw",this.historyWin.style.height="50vh",this.historyWin.style.left="60vw",this.historyWin.style.top="20vh",this.renderHistory()}renderHistory(){if(!this.historyWin)return;const c=this.historyWin.querySelector("#history-list");c.innerHTML="",this.recordings.forEach(f=>{const p=document.createElement("div");p.style.display="flex",p.style.alignItems="center",p.style.justifyContent="space-between",p.style.gap="6px",p.style.borderBottom="1px solid #ccc",p.style.padding="6px";const y=document.createElement("span");y.textContent=f.name,y.style.cursor="pointer",y.onclick=()=>this.playRecording(f.url);const g=document.createElement("div");g.style.display="flex",g.style.gap="4px";const I=document.createElement("button");I.textContent="Rename",I.onclick=()=>this.renameRecording(f.id);const S=document.createElement("button");S.textContent="Delete",S.onclick=()=>this.deleteRecording(f.id),g.appendChild(I),g.appendChild(S),p.appendChild(y),p.appendChild(g),c.appendChild(p)})}async renameRecording(c){const f=this.recordings.find(g=>g.id===c);if(!f)return;const p=prompt("Rename recording:",f.name);if(!p)return;f.name=p;const y={id:c,name:p,blob:f.blob};await this.saveRecordingToDB(y),this.renderHistory()}async deleteRecording(c){const f=this.recordings.findIndex(p=>p.id===c);f!==-1&&(URL.revokeObjectURL(this.recordings[f].url),this.recordings.splice(f,1),await this.deleteRecordingFromDB(c),this.renderHistory())}playRecording(c){const f=document.createElement("div");f.className="window",f.innerHTML=`
      <div class="window-header">
        <span>Playback</span>
        <div class="window-controls">
          <button class="close-btn">X</button>
        </div>
      </div>
      <video controls autoplay style="width:100%; height:90%;"></video>
    `,Oe.appendChild(f),this.wm.makeDraggable(f),this.wm.makeResizable(f),this.wm.bringToFront(f),f.querySelector(".close-btn").onclick=()=>f.remove();const p=f.querySelector("video");p.src=c,f.style.width="50vw",f.style.height="50vh",f.style.left="30vw",f.style.top="25vh"}stopCamera(){this.stream&&this.stream.getTracks().forEach(c=>c.stop())}async initDB(){return new Promise((c,f)=>{const p=indexedDB.open("camera-recordings-db",1);p.onupgradeneeded=y=>{y.target.result.createObjectStore("recordings",{keyPath:"id"})},p.onsuccess=y=>c(y.target.result),p.onerror=y=>f(y)})}async saveRecordingToDB(c){const f=await this.db;return new Promise(p=>{const y=f.transaction("recordings","readwrite");y.objectStore("recordings").put(c),y.oncomplete=p})}async deleteRecordingFromDB(c){const f=await this.db;return new Promise(p=>{const y=f.transaction("recordings","readwrite");y.objectStore("recordings").delete(c),y.oncomplete=p})}async loadRecordingsFromDB(){const c=await this.db;return new Promise(f=>{const y=c.transaction("recordings","readonly").objectStore("recordings").getAll();y.onsuccess=()=>f(y.result)})}async restoreHistory(){const c=await this.loadRecordingsFromDB();this.recordings=c.map(f=>({...f,url:URL.createObjectURL(f.blob)}))}}class na{constructor(){}open(c){if(document.getElementById("music-win")){console.log("bringing window to front"),c.bringToFront(document.getElementById("music-win"));return}console.log("Creating window");const f=c.createWindow("music-win","MUSIC");f.innerHTML=`
    <div class="window-header">
      <span>MUSIC</span>
      ${c.getWindowControls()}
    </div>
    <div class="window-content" style="width:100%; height:100%;">
      <div id="player-container" style="display:flex; flex-direction:column; align-items:center; gap:10px; padding:10px;"></div>
      </div>
    </div>`,Gn.appendChild(f),ze.renderMusicPage(document.getElementById("player-container")),c.makeDraggable(f),c.makeResizable(f),c.setupWindowControls(f),c.addToTaskbar(f.id,"MUSIC","/static/icons/music.png")}}class ra{constructor(c){this.appLauncher=c,this.desktop=document.getElementById("desktop"),this.startButton=document.getElementById("start-button"),this.startMenu=document.getElementById("start-menu"),this.contextMenu=document.getElementById("context-menu"),this.selectionBox=document.getElementById("selection-box"),this.clipboardCurrentCopied=null,this.isDragging=!1,this.draggedIcons=[],this.dragOffsets=[],this.setupEventListeners()}setupEventListeners(){this.startButton.addEventListener("click",c=>{c.stopPropagation(),this.startMenu.style.display=this.startMenu.style.display==="flex"?"none":"flex",hr(this.appLauncher)}),this.startMenu.addEventListener("click",c=>c.stopPropagation()),document.addEventListener("click",()=>{this.startMenu.style.display="none",this.contextMenu.style.display="none"}),this.desktop.addEventListener("contextmenu",c=>{c.target.classList.contains("selectable")?(c.preventDefault(),this.showIconContextMenu(c,c.target)):c.target===this.desktop&&(c.preventDefault(),this.showDesktopContextMenu(c))}),this.setupIconHandlers(),this.setupSelectionBox(),this.setupStartMenu()}setupIconHandlers(){document.querySelectorAll(".icon.selectable").forEach(c=>{this.makeIconDraggable(c)})}makeIconDraggable(c){c.draggable=!1,Object.assign(c.style,{userSelect:"none",webkitUserDrag:"none"}),c.addEventListener("dblclick",p=>{p.stopPropagation(),this.appLauncher.launch(c.dataset.app,c)});let f={x:0,y:0};c.addEventListener("mousedown",p=>{f={x:p.clientX,y:p.clientY},p.ctrlKey?c.classList.toggle("selected"):c.classList.contains("selected")||(document.querySelectorAll(".icon.selectable").forEach(S=>S.classList.remove("selected")),c.classList.add("selected"));const y=Array.from(document.querySelectorAll(".icon.selectable.selected"));this.draggedIcons=y,this.dragOffsets=y.map(S=>({x:p.clientX-S.offsetLeft,y:p.clientY-S.offsetTop}));const g=S=>{Math.sqrt(Math.pow(S.clientX-f.x,2)+Math.pow(S.clientY-f.y,2))>5&&!this.isDragging&&(this.isDragging=!0,this.draggedIcons.forEach(w=>{w.style.opacity="0.7",w.style.zIndex="1000"})),this.isDragging&&this.draggedIcons.forEach((w,v)=>{const a=S.clientX-this.dragOffsets[v].x,b=S.clientY-this.dragOffsets[v].y;w.style.left=`${Math.max(0,a)}px`,w.style.top=`${Math.max(0,b)}px`})},I=()=>{this.isDragging&&(this.draggedIcons.forEach(v=>{const a=parseInt(v.style.left),b=parseInt(v.style.top),u=85,N=105;let x=Math.round(a/u)*u+5,O=Math.round(b/N)*N+5;for(;this.isPositionOccupied(x,O,v);){const C=this.desktop.clientHeight;O+=N,O+100>C&&(O=5,x+=u)}v.style.left=`${x}px`,v.style.top=`${O}px`,v.style.opacity="1",v.style.zIndex="1"}),this.isDragging=!1),this.draggedIcons=[],this.dragOffsets=[],document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",I)};document.addEventListener("mousemove",g),document.addEventListener("mouseup",I)})}isPositionOccupied(c,f,p){const y=Array.from(document.querySelectorAll(".icon.selectable")),g=10;return y.some(I=>{if(I===p)return!1;const S=parseInt(I.style.left)||0,k=parseInt(I.style.top)||0;return Math.abs(S-c)<g&&Math.abs(k-f)<g})}showIconContextMenu(c,f){const p=Array.from(document.querySelectorAll(".icon.selectable.selected"));p.includes(f)||(document.querySelectorAll(".icon.selectable").forEach(g=>g.classList.remove("selected")),f.classList.add("selected"));const y=Array.from(document.querySelectorAll(".icon.selectable.selected")).pop();this.contextMenu.innerHTML=`
      <div id="ctx-open">Open</div>
      <div id="ctx-cut">Cut</div>
      <div id="ctx-copy">Copy</div>
      <div id="ctx-delete">Delete</div>
      <div id="ctx-properties">Properties</div>
    `,document.getElementById("ctx-open").onclick=()=>{this.contextMenu.style.display="none",this.appLauncher.launch(y.dataset.app,y)},document.getElementById("ctx-cut").onclick=()=>{this.clipboardCurrentCopied={action:"cut",icons:p.map(g=>({element:g,data:{app:g.dataset.app,name:g.dataset.name,path:g.dataset.path,innerHTML:g.innerHTML,className:g.className}}))},this.contextMenu.style.display="none"},document.getElementById("ctx-copy").onclick=()=>{this.clipboardCurrentCopied={action:"copy",icons:p.map(g=>({data:{app:g.dataset.app,name:g.dataset.name,path:g.dataset.path,innerHTML:g.innerHTML,className:g.className}}))},this.contextMenu.style.display="none"},document.getElementById("ctx-delete").onclick=()=>{p.forEach(g=>{g.remove()}),this.contextMenu.style.display="none"},document.getElementById("ctx-properties").onclick=()=>{this.showPropertiesDialog(y),this.contextMenu.style.display="none"},Object.assign(this.contextMenu.style,{left:`${c.pageX}px`,top:`${c.pageY}px`,display:"block"})}showPropertiesDialog(c){const f=c.id||`icon-${Date.now()}`,p=c.dataset,y=c.getBoundingClientRect(),g=p.app,I=this.appLauncher?.appMap?.[g]||{},k=[`Name: ${p.name||"Unknown"}`,`Type: ${p.app||"Application"}`,p.path?`Path: ${p.path}`:"",I.type?`App Type: ${I.type}`:"",I.swf?`SWF Path: ${I.swf}`:"",I.url?`URL: ${I.url}`:"",p.core?`Core: ${p.core}`:"",`Width: ${Math.round(y.width)}px`,`Height: ${Math.round(y.height)}px`,`Left: ${Math.round(y.left)}px`,`Top: ${Math.round(y.top)}px`,`Z-Index: ${c.style.zIndex||"0"}`].filter(Boolean).map(v=>`<div style="margin:2px 0;">${v}</div>`).join(""),w=this.appLauncher.wm.createWindow(`${f}-props`,`Properties: ${p.name||"Unknown"}`,"300px","auto");w.innerHTML=`
        <div class="window-header">
            <span>Properties: ${p.name||"Unknown"}</span>
            <div class="window-controls">
                <button class="minimize-btn" title="Minimize">−</button>
                <button class="maximize-btn" title="Maximize">□</button>
                <button class="close-btn" title="Close">X</button>
            </div>
        </div>
        <div class="window-content" style="width:100%; height:100%; overflow:auto; user-select:text; padding:10px;">
            ${k}
        </div>
    `,Gn.appendChild(w),this.appLauncher.wm.makeDraggable(w),this.appLauncher.wm.makeResizable(w),this.appLauncher.wm.setupWindowControls(w)}showDesktopContextMenu(c){const f=['<div id="ctx-new-notepad">New Notepad</div>','<div id="ctx-open-explorer">Open File Explorer</div>'];this.clipboardCurrentCopied&&f.push('<div id="ctx-paste">Paste</div>'),f.push("<hr>",'<div id="ctx-refresh">Refresh</div>'),this.contextMenu.innerHTML=f.join(""),document.getElementById("ctx-new-notepad").onclick=()=>{this.contextMenu.style.display="none",kn.open()},document.getElementById("ctx-open-explorer").onclick=()=>{this.contextMenu.style.display="none",ze.open()},this.clipboardCurrentCopied&&(document.getElementById("ctx-paste").onclick=()=>{this.pasteIcons(c.pageX,c.pageY),this.contextMenu.style.display="none"}),document.getElementById("ctx-refresh").onclick=()=>{this.contextMenu.style.display="none",location.reload()},Object.assign(this.contextMenu.style,{left:`${c.pageX}px`,top:`${c.pageY}px`,display:"block"})}pasteIcons(c,f){if(!this.clipboardCurrentCopied)return;const{action:p,icons:y}=this.clipboardCurrentCopied;y.forEach((g,I)=>{const S=document.createElement("div");S.className=g.data.className,S.innerHTML=g.data.innerHTML,S.dataset.app=g.data.app,S.dataset.name=g.data.name,S.dataset.path=g.data.path,Object.assign(S.style,{position:"absolute",left:`${c+I*10}px`,top:`${f+I*10}px`,userSelect:"none",webkitUserDrag:"none"}),this.makeIconDraggable(S),this.desktop.appendChild(S),p==="cut"&&g.element&&g.element.remove()}),p==="cut"&&(this.clipboardCurrentCopied=null)}setupSelectionBox(){let c,f;this.desktop.addEventListener("mousedown",p=>{if(p.target!==this.desktop)return;c=p.pageX,f=p.pageY,Object.assign(this.selectionBox.style,{left:`${c}px`,top:`${f}px`,width:"0px",height:"0px",display:"block"});const y=document.querySelectorAll(".icon.selectable");y.forEach(S=>S.classList.remove("selected"));const g=S=>{const k=Math.abs(S.pageX-c),w=Math.abs(S.pageY-f),v=Math.min(S.pageX,c),a=Math.min(S.pageY,f);Object.assign(this.selectionBox.style,{width:`${k}px`,height:`${w}px`,left:`${v}px`,top:`${a}px`});const b=this.selectionBox.getBoundingClientRect();y.forEach(u=>{const N=u.getBoundingClientRect();!(N.right<b.left||N.left>b.right||N.bottom<b.top||N.top>b.bottom)?u.classList.add("selected"):u.classList.remove("selected")})},I=()=>{this.selectionBox.style.display="none",document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",I)};document.addEventListener("mousemove",g),document.addEventListener("mouseup",I)})}setupStartMenu(){this.startMenu.querySelectorAll(".start-item").forEach(c=>{c.onclick=f=>{f.stopPropagation();const p=c.dataset.app;p==="documents"?(ze.open(),ze.navigate(["home","reeyuki","Documents"])):p==="pictures"?(ze.open(),ze.navigate(["home","reeyuki","Pictures"])):p==="notes"&&kn.open(),this.startMenu.style.display="none"}})}}const Gn=document.getElementById("desktop"),Xn=new js,fn=new Gs,kn=new ta(Xn,fn,null),ze=new Ws(Xn,fn,kn),ia=new Xs(fn);kn.setExplorer(ze);const oa=new Ms(Xn,fn),sa=new na,aa=new ea(fn),Mi=new $s(fn,Xn,sa,ze,oa,kn,ia,aa);new ra(Mi);fr.startClock();fr.setRandomWallpaper();const ca=window.location.search,la=new URLSearchParams(ca),xi=la.get("game");xi&&setTimeout(()=>{Mi.launch(xi)},100);const ua=Gn.querySelectorAll(".icon");function Pi(){const it=Gn.clientHeight,c=80,f=100,p=5;let y=p,g=p;ua.forEach(I=>{(!I.style.left||!I.style.top)&&(I.style.position="absolute",I.style.left=`${y}px`,I.style.top=`${g}px`,g+=f+p,g+f>it&&(g=p,y+=c+p))})}window.addEventListener("load",Pi);window.addEventListener("resize",Pi);console.log("Howdy, devtools user! the source of this site is available at: https://github.com/Reeyuki/reeyuki.github.io");Ks();As({immediate:!0});
